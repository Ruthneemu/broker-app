{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{AuthProvider,useAuth}from'./AuthContext';import AdminLogin from'./adminLogin';import AdminDashboard from'./AdminDashboard';import AdminListings from'./AdminListings';import AdminUsers from'./AdminUsers';import AdminInquiries from'./AdminInquiries';import AdminSettings from'./AdminSettings';import AdminAnalytics from'./AdminAnalytics';import AdminResetPassword from'./AdminResetPassword';import AuthHandler from'./AuthHandler';import'./admin.css';// Move ProtectedRoute outside of App component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{user,isAdmin,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-screen\",children:\"Loading...\"});}if(!user||!isAdmin){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\",replace:true});}return children;};// Add a root redirect component\nconst RootRedirect=()=>{const{user,isAdmin,loading}=useAuth();// Destructure loading state\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-screen\",children:\"Loading...\"});}if(user&&isAdmin){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true});}return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\",replace:true});};function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 min-h-screen\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/admin/login\",element:/*#__PURE__*/_jsx(AdminLogin,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/reset-password\",element:/*#__PURE__*/_jsx(AdminResetPassword,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/auth-handler\",element:/*#__PURE__*/_jsx(AuthHandler,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(AdminDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/listings\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(AdminListings,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/users\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(AdminUsers,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/inquiries\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(AdminInquiries,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/analytics\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(AdminAnalytics,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/settings\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(AdminSettings,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(RootRedirect,{})}),\"  \",/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})}),\"  \"]})})})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","useAuth","AdminLogin","AdminDashboard","AdminListings","AdminUsers","AdminInquiries","AdminSettings","AdminAnalytics","AdminResetPassword","AuthHandler","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","user","isAdmin","loading","className","to","replace","RootRedirect","App","path","element"],"sources":["/workspaces/broker-app/admin/src/admin.jsx"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './AuthContext';\nimport AdminLogin from './adminLogin';\nimport AdminDashboard from './AdminDashboard';\nimport AdminListings from './AdminListings';\nimport AdminUsers from './AdminUsers';\nimport AdminInquiries from './AdminInquiries';\nimport AdminSettings from './AdminSettings';\nimport AdminAnalytics from './AdminAnalytics';\nimport AdminResetPassword from './AdminResetPassword';\nimport AuthHandler from './AuthHandler';\nimport './admin.css';\n\n// Move ProtectedRoute outside of App component\nconst ProtectedRoute = ({ children }) => {\n  const { user, isAdmin, loading } = useAuth();\n\n  if (loading) {\n    return <div className=\"loading-screen\">Loading...</div>;\n  }\n\n  if (!user || !isAdmin) {\n    return <Navigate to=\"/admin/login\" replace />;\n  }\n\n  return children;\n};\n\n// Add a root redirect component\nconst RootRedirect = () => {\n  const { user, isAdmin, loading } = useAuth(); // Destructure loading state\n\n  if (loading) {\n    return <div className=\"loading-screen\">Loading...</div>;\n  }\n\n  if (user && isAdmin) {\n    return <Navigate to=\"/admin/dashboard\" replace />;\n  }\n\n  return <Navigate to=\"/admin/login\" replace />;\n};\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <div className=\"bg-gray-50 min-h-screen\">\n          <Routes>\n            {/* Public Routes */}\n            <Route path=\"/admin/login\" element={<AdminLogin />} />\n            <Route path=\"/admin/reset-password\" element={<AdminResetPassword />} />\n            <Route path=\"/admin/auth-handler\" element={<AuthHandler />} />\n            \n            {/* Protected Routes */}\n            <Route path=\"/admin/dashboard\" element={\n              <ProtectedRoute>\n                <AdminDashboard />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/admin/listings\" element={\n              <ProtectedRoute>\n                <AdminListings />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/admin/users\" element={\n              <ProtectedRoute>\n                <AdminUsers />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/admin/inquiries\" element={\n              <ProtectedRoute>\n                <AdminInquiries />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/admin/analytics\" element={\n              <ProtectedRoute>\n                <AdminAnalytics />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/admin/settings\" element={\n              <ProtectedRoute>\n                <AdminSettings />\n              </ProtectedRoute>\n            } />\n            \n            {/* Root and Catch-all */}\n            <Route path=\"/\" element={<RootRedirect />} />  {/* This is already in your code */}\n            <Route path=\"*\" element={<Navigate to=\"/\" replace />} />  {/* CHANGE THIS LINE */}\n          </Routes>\n        </div>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,OAASC,YAAY,CAAEC,OAAO,KAAQ,eAAe,CACrD,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,kBAAkB,KAAM,sBAAsB,CACrD,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,aAAa,CAEpB;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAClC,KAAM,CAAEE,IAAI,CAAEC,OAAO,CAAEC,OAAQ,CAAC,CAAGnB,OAAO,CAAC,CAAC,CAE5C,GAAImB,OAAO,CAAE,CACX,mBAAOR,IAAA,QAAKS,SAAS,CAAC,gBAAgB,CAAAJ,QAAA,CAAC,YAAU,CAAK,CAAC,CACzD,CAEA,GAAI,CAACC,IAAI,EAAI,CAACC,OAAO,CAAE,CACrB,mBAAOP,IAAA,CAACb,QAAQ,EAACuB,EAAE,CAAC,cAAc,CAACC,OAAO,MAAE,CAAC,CAC/C,CAEA,MAAO,CAAAN,QAAQ,CACjB,CAAC,CAED;AACA,KAAM,CAAAO,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAEN,IAAI,CAAEC,OAAO,CAAEC,OAAQ,CAAC,CAAGnB,OAAO,CAAC,CAAC,CAAE;AAE9C,GAAImB,OAAO,CAAE,CACX,mBAAOR,IAAA,QAAKS,SAAS,CAAC,gBAAgB,CAAAJ,QAAA,CAAC,YAAU,CAAK,CAAC,CACzD,CAEA,GAAIC,IAAI,EAAIC,OAAO,CAAE,CACnB,mBAAOP,IAAA,CAACb,QAAQ,EAACuB,EAAE,CAAC,kBAAkB,CAACC,OAAO,MAAE,CAAC,CACnD,CAEA,mBAAOX,IAAA,CAACb,QAAQ,EAACuB,EAAE,CAAC,cAAc,CAACC,OAAO,MAAE,CAAC,CAC/C,CAAC,CAED,QAAS,CAAAE,GAAGA,CAAA,CAAG,CACb,mBACEb,IAAA,CAACZ,YAAY,EAAAiB,QAAA,cACXL,IAAA,CAAChB,MAAM,EAAAqB,QAAA,cACLL,IAAA,QAAKS,SAAS,CAAC,yBAAyB,CAAAJ,QAAA,cACtCH,KAAA,CAACjB,MAAM,EAAAoB,QAAA,eAELL,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,cAAc,CAACC,OAAO,cAAEf,IAAA,CAACV,UAAU,GAAE,CAAE,CAAE,CAAC,cACtDU,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,uBAAuB,CAACC,OAAO,cAAEf,IAAA,CAACH,kBAAkB,GAAE,CAAE,CAAE,CAAC,cACvEG,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,qBAAqB,CAACC,OAAO,cAAEf,IAAA,CAACF,WAAW,GAAE,CAAE,CAAE,CAAC,cAG9DE,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,kBAAkB,CAACC,OAAO,cACpCf,IAAA,CAACG,cAAc,EAAAE,QAAA,cACbL,IAAA,CAACT,cAAc,GAAE,CAAC,CACJ,CACjB,CAAE,CAAC,cACJS,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,iBAAiB,CAACC,OAAO,cACnCf,IAAA,CAACG,cAAc,EAAAE,QAAA,cACbL,IAAA,CAACR,aAAa,GAAE,CAAC,CACH,CACjB,CAAE,CAAC,cACJQ,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,cAAc,CAACC,OAAO,cAChCf,IAAA,CAACG,cAAc,EAAAE,QAAA,cACbL,IAAA,CAACP,UAAU,GAAE,CAAC,CACA,CACjB,CAAE,CAAC,cACJO,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,kBAAkB,CAACC,OAAO,cACpCf,IAAA,CAACG,cAAc,EAAAE,QAAA,cACbL,IAAA,CAACN,cAAc,GAAE,CAAC,CACJ,CACjB,CAAE,CAAC,cACJM,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,kBAAkB,CAACC,OAAO,cACpCf,IAAA,CAACG,cAAc,EAAAE,QAAA,cACbL,IAAA,CAACJ,cAAc,GAAE,CAAC,CACJ,CACjB,CAAE,CAAC,cACJI,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,iBAAiB,CAACC,OAAO,cACnCf,IAAA,CAACG,cAAc,EAAAE,QAAA,cACbL,IAAA,CAACL,aAAa,GAAE,CAAC,CACH,CACjB,CAAE,CAAC,cAGJK,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEf,IAAA,CAACY,YAAY,GAAE,CAAE,CAAE,CAAC,KAAE,cAC/CZ,IAAA,CAACd,KAAK,EAAC4B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEf,IAAA,CAACb,QAAQ,EAACuB,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,KAAE,EACpD,CAAC,CACN,CAAC,CACA,CAAC,CACG,CAAC,CAEnB,CAEA,cAAe,CAAAE,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}