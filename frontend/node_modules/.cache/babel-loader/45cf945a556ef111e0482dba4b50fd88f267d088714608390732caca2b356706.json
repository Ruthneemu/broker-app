{"ast":null,"code":"import _objectSpread from\"/workspaces/broker-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useMemo,useCallback}from'react';import{BrowserRouter as Router,Routes,Route,useNavigate}from'react-router-dom';import{GoogleMap,useLoadScript,MarkerF}from'@react-google-maps/api';import'./index.css';import{createClient}from'@supabase/supabase-js';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const supabaseUrl='https://ouscjkmgdsnzakairivo.supabase.co';const supabaseAnonKey='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91c2Nqa21nZHNuemFrYWlyaXZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MzY0MzYsImV4cCI6MjA3MTUxMjQzNn0.ii49ymR7Bi7WZTYOkYnE1-kJIlZ7DV5xR_tM3kbX-MU';const supabase=createClient(supabaseUrl,supabaseAnonKey);// Header Component\nconst Header=_ref=>{let{currentView,setCurrentView,isLoggedIn,session,showProfileModal,setShowProfileModal,profileForm,setProfileForm,handleProfileChange,handleLogout,setShowLoginModal,setShowRegistrationModal}=_ref;const[showDropdown,setShowDropdown]=useState(false);const navigate=useNavigate();const handleCategorySelect=category=>{setCurrentView(category);navigate(\"/\".concat(category));setShowDropdown(false);};return/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm sticky top-0 z-40 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-xl\",children:\"B\"})}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"Broker\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:\"Connect\"})]})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"hidden md:flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('public');navigate('/');},className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='public'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:\"Home\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowDropdown(!showDropdown),className:\"px-4 py-2 rounded-lg font-medium text-gray-600 hover:bg-gray-100 transition-colors flex items-center\",children:[\"Categories\",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-down ml-2 text-xs\"})]}),showDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleCategorySelect('apartments'),className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Apartments\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleCategorySelect('cars'),className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Cars\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleCategorySelect('land'),className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Land\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleCategorySelect('clothing'),className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Clothing\"})]})]}),isLoggedIn&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setCurrentView('private'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='private'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:\"My Listings\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setCurrentView('favorites'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='favorites'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:\"Favorites\"})]}),isLoggedIn?/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium\",children:session.user.email.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:session.user.email.split('@')[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-50\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setProfileForm({name:session.user.user_metadata.name||''});setShowProfileModal(true);},className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Update Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleLogout,className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Logout\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowLoginModal(true),className:\"px-4 py-2 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowRegistrationModal(true),className:\"ml-2 px-4 py-2 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 transition-colors\",children:\"Register\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bars text-xl\"})})})]})})});};// Home Page Component\nconst HomePage=_ref2=>{let{setCurrentView,isLoggedIn,setShowAddForm}=_ref2;const navigate=useNavigate();return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 min-h-screen\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto px-6 py-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-16\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl font-bold text-gray-900 mb-6\",children:\"Welcome to BrokerConnect\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-600 max-w-3xl mx-auto\",children:\"Your ultimate marketplace for premium apartments, reliable cars, and valuable land. Discover your next great investment with ease, precision, and trust.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10 flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('apartments');navigate('/apartments');},className:\"px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition-colors\",children:\"Browse Apartments\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('cars');navigate('/cars');},className:\"px-8 py-3 bg-green-600 text-white font-semibold rounded-lg shadow hover:bg-green-700 transition-colors\",children:\"Browse Cars\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('land');navigate('/land');},className:\"px-8 py-3 bg-yellow-600 text-white font-semibold rounded-lg shadow hover:bg-yellow-700 transition-colors\",children:\"Browse Land\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('clothing');navigate('/clothing');},className:\"px-8 py-3 bg-purple-600 text-white font-semibold rounded-lg shadow hover:bg-purple-700 transition-colors\",children:\"Browse Clothing\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-building text-blue-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Premium Apartments\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Discover luxury apartments in prime locations with top-notch amenities.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('apartments');navigate('/apartments');},className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\",children:\"View Apartments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg border border-green-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-car text-green-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Reliable Cars\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Find quality vehicles from trusted sellers with verified history reports.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('cars');navigate('/cars');},className:\"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\",children:\"View Cars\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tree text-yellow-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Valuable Land\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Invest in prime land parcels with great potential for development.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('land');navigate('/land');},className:\"px-6 py-3 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 transition-colors\",children:\"View Land\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg border border-purple-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tshirt text-purple-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Clothing\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Discover trendy clothing items from various brands and styles.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('clothing');navigate('/clothing');},className:\"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors\",children:\"View Clothing\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-900 mb-6\",children:\"How It Works\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold\",children:\"1\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Browse Listings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Explore our extensive collection of properties, vehicles, and land.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold\",children:\"2\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Connect with Brokers\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Get in touch with professional brokers for expert guidance.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold\",children:\"3\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Make Your Investment\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Secure your next great investment with confidence and ease.\"})]})]})]})]})});};// Category Listings Page Component\nconst CategoryListingsPage=_ref3=>{let{category,title,colorClass,listings,loading,currentImageIndex,handleSelectListing,handleToggleFavorite,favorites,isLoggedIn,handleOpenChat,setListingForReview,setShowReviewModal,handleShareListing,handleOpenNotesModal,currentView,userId}=_ref3;const navigate=useNavigate();const getCategoryIcon=()=>{switch(category){case'apartments':return'fas fa-building';case'cars':return'fas fa-car';case'land':return'fas fa-tree';case'clothing':return'from-purple-600 to-indigo-700';default:return'fas fa-home';}};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 min-h-screen\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto px-6 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>navigate('/'),className:\"flex items-center text-blue-600 hover:text-blue-800 transition-colors mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Back to Home\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-grow max-w-md\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title, description, or location...\",className:\"w-full p-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search mr-2\"}),\"Search\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading listings...\"})]}):listings.length>0?listings.filter(listing=>listing.type===category.slice(0,-1)).map(listing=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleSelectListing(listing.id),className:\"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-300 cursor-pointer\",children:[listing.image_urls&&listing.image_urls.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-48 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.image_urls[currentImageIndex[listing.id]||0],alt:\"Listing at \".concat(listing.address),className:\"w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 right-3 flex space-x-2\",children:isLoggedIn&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(listing.id);},className:\"w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm \".concat(favorites.includes(listing.id)?'bg-red-500 text-white':'bg-white/80 text-gray-700'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(listing.id)?'fa-heart':'fa-heart',\" text-lg\")})})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home text-4xl mb-2\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No Image Available\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold text-gray-900 mb-1\",children:listing.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:listing.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold text-blue-600 mb-3\",children:[\"$\",new Intl.NumberFormat().format(listing.price)]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-4 line-clamp-2\",children:listing.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mt-4\",children:[isLoggedIn&&/*#__PURE__*/_jsxs(_Fragment,{children:[listing.owner_id===userId?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit mr-1\"}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash mr-1\"}),\" Delete\"]})]}):/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(listing.id);},className:\"flex-1 text-center px-3 py-2 font-medium rounded-lg transition-colors text-sm \".concat(favorites.includes(listing.id)?'bg-red-100 text-red-600 hover:bg-red-200':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(listing.id)?'fa-heart':'fa-heart',\" mr-1\")}),favorites.includes(listing.id)?'Saved':'Save']}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenChat(listing);},className:\"flex-1 text-center px-3 py-2 bg-blue-100 text-blue-600 font-medium rounded-lg hover:bg-blue-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comment mr-1\"}),\" Chat\"]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();setListingForReview(listing);setShowReviewModal(true);},className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star mr-1\"}),\" Reviews\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleShareListing(listing);},className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-share-alt mr-1\"}),\" Share\"]}),currentView==='favorites'&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenNotesModal(listing);},className:\"flex-1 text-center px-3 py-2 bg-purple-100 text-purple-700 font-medium rounded-lg hover:bg-purple-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sticky-note mr-1\"}),\" Note\"]})]})]})]},listing.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(getCategoryIcon(),\" text-4xl mb-4 text-gray-300\")}),/*#__PURE__*/_jsx(\"p\",{children:\"No listings found.\"})]})})]})});};// Listing Detail Page Component\nconst ListingDetailPage=_ref4=>{let{selectedListing,currentImageIndex,handlePrevImage,handleNextImage,renderStars,getAverageRating,isLoggedIn,favorites,handleToggleFavorite,setListingForReview,setShowReviewModal,setCurrentListing,setUploadedImage,setShowEditModal,handleOpenChat,userId}=_ref4;const navigate=useNavigate();if(!selectedListing){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}const getCategoryColor=()=>{switch(selectedListing.type){case'house':return'from-blue-600 to-indigo-700';case'car':return'from-green-600 to-emerald-700';case'land':return'from-red-600 to-orange-700';case'clothing':return'from-purple-600 to-indigo-700';default:return'from-gray-600 to-gray-700';}};const getCategoryName=()=>{switch(selectedListing.type){case'house':return'Apartment';case'car':return'Car';case'land':return'Land';case'clothing':return'from-purple-600 to-indigo-700';default:return'Property';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 min-h-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r \".concat(getCategoryColor(),\" py-6\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-6\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>navigate(-1),className:\"flex items-center text-white hover:text-gray-200 transition-colors mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Back to List\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white\",children:selectedListing.address})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-6 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full h-80 md:h-[500px]\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedListing.image_urls[currentImageIndex[selectedListing.id]||0],alt:\"Property at \".concat(selectedListing.address),className:\"w-full h-full object-cover\"}),selectedListing.image_urls.length>1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handlePrevImage(selectedListing.id,selectedListing.image_urls);},className:\"absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-left\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleNextImage(selectedListing.id,selectedListing.image_urls);},className:\"absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl md:text-4xl font-bold text-gray-900 mb-2\",children:selectedListing.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:selectedListing.city})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 md:mt-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold text-blue-600\",children:[\"$\",new Intl.NumberFormat().format(selectedListing.price)]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-x-6 gap-y-3 text-gray-700 mb-8\",children:[selectedListing.type==='house'&&selectedListing.details&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bed text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.bedrooms,\" Beds\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bath text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.bathrooms,\" Baths\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-ruler-combined text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.sqft,\" sqft\"]})]})]}),selectedListing.type==='car'&&selectedListing.details&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-car text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.make,\" \",selectedListing.details.model]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tachometer-alt text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.mileage,\" miles\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-calendar-alt text-blue-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedListing.details.year})]})]}),selectedListing.type==='land'&&selectedListing.details&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tree text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.acres,\" Acres\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-ruler text-blue-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedListing.details.zoning})]})]}),selectedListing.type==='clothing'&&selectedListing.details&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tshirt text-blue-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedListing.details.brand||'Unknown Brand'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tag text-blue-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedListing.details.category||'General'})]}),selectedListing.details.size&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-ruler text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"Size: \",selectedListing.details.size]})]}),selectedListing.details.color&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-palette text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"Color: \",selectedListing.details.color]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-3\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 leading-relaxed\",children:selectedListing.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-3\",children:\"Reviews\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[renderStars(getAverageRating(selectedListing.reviews)),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[\"(\",selectedListing.reviews.length,\" reviews)\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Contact Broker\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-6\",children:[\"Interested in this \",getCategoryName().toLowerCase(),\"? Reach out to the broker for more details or to schedule a viewing.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-xl border border-blue-200 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope text-blue-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"broker@example.com\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Response time: Usually within 24 hours\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your Name\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Your Email\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Your Message\",rows:\"4\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors\",children:\"Send Message\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-6 rounded-xl border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setListingForReview(selectedListing);setShowReviewModal(true);},className:\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star mr-2 text-yellow-500\"}),\"View Reviews\"]}),isLoggedIn&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(selectedListing.id);},className:\"w-full px-4 py-3 font-medium rounded-lg transition-colors flex items-center justify-center \".concat(favorites.includes(selectedListing.id)?'bg-red-50 border border-red-200 text-red-600 hover:bg-red-100':'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(selectedListing.id)?'fa-heart':'fa-heart',\" mr-2\")}),favorites.includes(selectedListing.id)?'Remove from Favorites':'Add to Favorites']}),isLoggedIn&&selectedListing.owner_id===userId&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();setCurrentListing(selectedListing);setUploadedImage(null);setShowEditModal(true);},className:\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit mr-2 text-blue-500\"}),\"Edit Listing\"]}),isLoggedIn&&selectedListing.owner_id!==userId&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenChat(selectedListing);},className:\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comment mr-2 text-green-500\"}),\"Chat with Broker\"]})]})]})})]})]})]})})]});};// Main App Component\nconst App=()=>{var _session$user3;const[session,setSession]=useState(null);const[listings,setListings]=useState([]);const[currentView,setCurrentView]=useState('public');const[showAddForm,setShowAddForm]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[currentListing,setCurrentListing]=useState(null);const[showConfirmDeleteModal,setShowConfirmDeleteModal]=useState(false);const[listingToDelete,setListingToDelete]=useState(null);const[favorites,setFavorites]=useState([]);const[showReviewModal,setShowReviewModal]=useState(false);const[showAddReviewModal,setShowAddReviewModal]=useState(false);const[listingForReview,setListingForReview]=useState(null);const[showNotesModal,setShowNotesModal]=useState(false);const[currentNote,setCurrentNote]=useState('');const[showChatModal,setShowChatModal]=useState(false);const[listingForChat,setListingForChat]=useState(null);const[chatMessages,setChatMessages]=useState([]);const[newChatMessage,setNewChatMessage]=useState('');const[currentImageIndex,setCurrentImageIndex]=useState({});const[loading,setLoading]=useState(false);const[uploadedImage,setUploadedImage]=useState(null);const[isGeneratingImage,setIsGeneratingImage]=useState(false);const chatMessagesEndRef=useRef(null);const[showProfileModal,setShowProfileModal]=useState(false);const[showLoginModal,setShowLoginModal]=useState(false);const[selectedListingId,setSelectedListingId]=useState(null);const[profileForm,setProfileForm]=useState({name:''});const[showRegistrationModal,setShowRegistrationModal]=useState(false);const[filters]=useState({priceMin:'',priceMax:'',bedroomsMin:'',bathroomsMin:'',sqftMin:''});const[listingType,setListingType]=useState('house');const[formDetails,setFormDetails]=useState({});const[selectedType]=useState(null);const[carFilters]=useState({make:'',mileageMax:''});const[landFilters]=useState({acresMax:'',zoning:''});const[searchTerm]=useState('');// Google Maps\nconst{isLoaded,loadError}=useLoadScript({googleMapsApiKey:process.env.REACT_APP_GOOGLE_MAPS_API_KEY});const mapCenter=useMemo(()=>({lat:34.0522,lng:-118.2437}),[]);const fetchListings=useCallback(async()=>{setLoading(true);try{let query=supabase.from('listings').select('*');if(selectedType){query=query.eq('type',selectedType);}if(searchTerm){query=query.textSearch('search_vector',searchTerm,{config:'english',type:'websearch'});}if(filters.priceMin){query=query.gte('price',parseFloat(filters.priceMin));}if(filters.priceMax){query=query.lte('price',parseFloat(filters.priceMax));}if(filters.bedroomsMin){query=query.gte('details->>bedrooms',parseInt(filters.bedroomsMin,10));}if(filters.bathroomsMin){query=query.gte('details->>bathrooms',parseInt(filters.bathroomsMin,10));}if(filters.sqftMin){query=query.gte('details->>sqft',parseInt(filters.sqftMin,10));}if(selectedType==='car'&&carFilters.make){query=query.ilike('details->>make',\"%\".concat(carFilters.make,\"%\"));}if(selectedType==='car'&&carFilters.mileageMax){query=query.lte('details->>mileage',parseFloat(carFilters.mileageMax));}if(selectedType==='land'&&landFilters.acresMax){query=query.lte('details->>acres',parseFloat(landFilters.acresMax));}if(selectedType==='land'&&landFilters.zoning){query=query.ilike('details->>zoning',\"%\".concat(landFilters.zoning,\"%\"));}const{data:listingsData,error:listingsError}=await query;if(listingsError)throw listingsError;setListings(listingsData);if(session){const{data:favoritesData,error:favoritesError}=await supabase.from('favorites').select('listing_id');if(favoritesError)throw favoritesError;setFavorites(favoritesData.map(fav=>fav.listing_id));}}catch(error){console.error('Error fetching data:',error.message);}finally{setLoading(false);}},[selectedType,searchTerm,filters,carFilters,landFilters,session]);useEffect(()=>{const{data:authListener}=supabase.auth.onAuthStateChange(async(event,session)=>{setSession(session);fetchListings();});return()=>{authListener.subscription.unsubscribe();};},[fetchListings]);useEffect(()=>{fetchListings();},[fetchListings]);const trackListingView=async listingId=>{var _session$user;if(!(session!==null&&session!==void 0&&(_session$user=session.user)!==null&&_session$user!==void 0&&_session$user.id))return;try{await supabase.from('listing_views').insert({listing_id:listingId,viewer_id:session.user.id});}catch(error){console.error('Error tracking listing view:',error.message);}};const handleProfileChange=e=>{setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{[e.target.name]:e.target.value}));};const handleSelectListing=listingId=>{var _session$user2;setSelectedListingId(listingId);if(session!==null&&session!==void 0&&(_session$user2=session.user)!==null&&_session$user2!==void 0&&_session$user2.id){trackListingView(listingId);}};useEffect(()=>{if(listingForChat&&session){const fetchMessages=async()=>{const{data,error}=await supabase.from('messages').select('*').eq('listing_id',listingForChat.id).order('created_at',{ascending:true});if(error){console.error(\"Error fetching messages:\",error);}else{setChatMessages(data);}};fetchMessages();const channel=supabase.channel(\"chat-room-\".concat(listingForChat.id)).on('postgres_changes',{event:'INSERT',schema:'public',table:'messages',filter:\"listing_id=eq.\".concat(listingForChat.id)},payload=>{setChatMessages(prevMessages=>[...prevMessages,payload.new]);}).subscribe();return()=>{supabase.removeChannel(channel);};}},[listingForChat,session]);const userId=session===null||session===void 0?void 0:(_session$user3=session.user)===null||_session$user3===void 0?void 0:_session$user3.id;const isLoggedIn=!!session;useEffect(()=>{scrollToBottom();},[chatMessages]);const generateListingImage=async listingDetails=>{setIsGeneratingImage(true);return new Promise(resolve=>{setTimeout(()=>{const imageUrl=\"https://loremflickr.com/640/480/\".concat(listingDetails.bedrooms,\" bed \").concat(listingDetails.bathrooms,\" bath, \").concat(listingDetails.city,\", real estate?lock=\").concat(Math.floor(Math.random()*1000));setIsGeneratingImage(false);resolve(imageUrl);},2000);});};const uploadImage=async file=>{if(!file)return null;const fileExt=file.name.split('.').pop();const fileName=\"\".concat(Math.random(),\".\").concat(fileExt);const filePath=\"listings/\".concat(fileName);try{const{error}=await supabase.storage.from('listing_photos').upload(filePath,file);if(error)throw error;const{data:publicUrlData}=supabase.storage.from('listing_photos').getPublicUrl(filePath);return publicUrlData.publicUrl;}catch(error){console.error('Error uploading image:',error.message);return null;}};const handleImageUpload=e=>{const file=e.target.files[0];if(file){setUploadedImage(file);}else{setUploadedImage(null);}};const getAverageRating=reviews=>{if(!reviews||reviews.length===0)return 0;const totalRating=reviews.reduce((sum,review)=>sum+review.rating,0);return totalRating/reviews.length;};const renderStars=rating=>{const stars=[];const fullStars=Math.floor(rating);const hasHalfStar=rating%1!==0;for(let i=0;i<fullStars;i++){stars.push(/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star text-yellow-400\"},\"star-solid-\".concat(i)));}if(hasHalfStar){stars.push(/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star-half-alt text-yellow-400\"},\"star-half\"));}for(let i=stars.length;i<5;i++){stars.push(/*#__PURE__*/_jsx(\"i\",{className:\"far fa-star text-gray-400\"},\"star-empty-\".concat(i)));}return/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-0.5\",children:stars});};const handleAddListing=async e=>{e.preventDefault();setLoading(true);let imageUrls=[];if(uploadedImage){const url=await uploadImage(uploadedImage);if(url){imageUrls.push(url);}}else{const aiImageUrl=await generateListingImage({city:formDetails.city,bedrooms:formDetails.bedrooms,bathrooms:formDetails.bathrooms});imageUrls.push(aiImageUrl);}const newListing={type:listingType,address:formDetails.address,city:formDetails.city,price:parseInt(formDetails.price,10),latitude:parseFloat(formDetails.latitude),longitude:parseFloat(formDetails.longitude),description:formDetails.description,image_urls:imageUrls,reviews:[],owner_id:userId,details:formDetails.details};try{const{error}=await supabase.from('listings').insert([newListing]);if(error){throw error;}await fetchListings();setShowAddForm(false);setUploadedImage(null);setListingType('house');setFormDetails({});}catch(error){console.error('Error adding listing:',error.message);}finally{setLoading(false);}};const handleDeleteListing=async id=>{setLoading(true);try{const{error}=await supabase.from('listings').delete().eq('id',id);if(error){throw error;}await fetchListings();}catch(error){console.error('Error deleting listing:',error.message);}finally{setShowConfirmDeleteModal(false);setListingToDelete(null);setLoading(false);}};const handleUpdateListing=async e=>{e.preventDefault();setLoading(true);let imageUrls=currentListing.image_urls;if(uploadedImage){const url=await uploadImage(uploadedImage);if(url){imageUrls=[url];}}const updatedListing=_objectSpread(_objectSpread({},currentListing),{},{address:formDetails.address,city:formDetails.city,price:parseInt(formDetails.price,10),latitude:parseFloat(formDetails.latitude),longitude:parseFloat(formDetails.longitude),description:formDetails.description,image_urls:imageUrls,details:formDetails.details});try{const{error}=await supabase.from('listings').update(updatedListing).eq('id',currentListing.id);if(error){throw error;}await fetchListings();setShowEditModal(false);setCurrentListing(null);setUploadedImage(null);}catch(error){console.error('Error updating listing:',error.message);}finally{setLoading(false);}};const handleAddReview=async e=>{e.preventDefault();const form=e.target;const newReview={reviewer_id:userId,rating:parseInt(form.rating.value,10),review_text:form.reviewText.value};const updatedReviews=[...listingForReview.reviews,newReview];try{const{error}=await supabase.from('listings').update({reviews:updatedReviews}).eq('id',listingForReview.id);if(error){throw error;}await fetchListings();setShowAddReviewModal(false);setShowReviewModal(true);}catch(error){console.error('Error adding review:',error.message);}};const handleUpdateProfile=async e=>{e.preventDefault();setLoading(true);try{const{error}=await supabase.auth.updateUser({data:{name:profileForm.name}});if(error)throw error;alert('Profile updated successfully!');}catch(error){console.error('Error updating profile:',error.message);alert('Error updating profile. Please try again.');}finally{setLoading(false);}};const handleToggleFavorite=async listingId=>{if(!userId){alert(\"Please log in to add favorites.\");return;}const isFavorite=favorites.includes(listingId);setLoading(true);try{if(isFavorite){const{error}=await supabase.from('favorites').delete().eq('user_id',userId).eq('listing_id',listingId);if(error)throw error;const{error:noteError}=await supabase.from('private_notes').delete().eq('user_id',userId).eq('listing_id',listingId);if(noteError)console.error(\"Error deleting private note:\",noteError);setFavorites(favorites.filter(id=>id!==listingId));}else{const{error}=await supabase.from('favorites').insert([{user_id:userId,listing_id:listingId}]);if(error)throw error;setFavorites([...favorites,listingId]);}}catch(error){console.error('Error toggling favorite:',error.message);}finally{setLoading(false);}};const handleOpenChat=listing=>{if(!isLoggedIn){alert(\"Please log in to chat with a broker.\");return;}setListingForChat(listing);setShowChatModal(true);};const handleSendMessage=async e=>{e.preventDefault();if(!newChatMessage.trim()||!userId||!listingForChat)return;try{const{error}=await supabase.from('messages').insert({listing_id:listingForChat.id,user_id:userId,content:newChatMessage});if(error){throw error;}setNewChatMessage('');}catch(error){console.error('Error sending message:',error.message);}};const scrollToBottom=()=>{if(chatMessagesEndRef.current){chatMessagesEndRef.current.scrollIntoView({behavior:'smooth'});}};const handleShareListing=async listing=>{const listingUrl=\"\".concat(window.location.origin,\"?listingId=\").concat(listing.id);if(navigator.clipboard&&navigator.clipboard.writeText){try{await navigator.clipboard.writeText(listingUrl);alert('Listing link copied to clipboard!');}catch(err){console.error('Failed to copy text:',err);alert('Failed to copy link. Please try again.');}}else{const textarea=document.createElement('textarea');textarea.value=listingUrl;document.body.appendChild(textarea);textarea.select();try{document.execCommand('copy');alert('Listing link copied to clipboard!');}catch(err){console.error('Fallback: Failed to copy text:',err);alert('Failed to copy link. Please copy it manually from the URL bar.');}document.body.removeChild(textarea);}};const handleNextImage=(listingId,imageUrls)=>{setCurrentImageIndex(prev=>{const currentIndex=prev[listingId]||0;const nextIndex=(currentIndex+1)%imageUrls.length;return _objectSpread(_objectSpread({},prev),{},{[listingId]:nextIndex});});};const handlePrevImage=(listingId,imageUrls)=>{setCurrentImageIndex(prev=>{const currentIndex=prev[listingId]||0;const prevIndex=(currentIndex-1+imageUrls.length)%imageUrls.length;return _objectSpread(_objectSpread({},prev),{},{[listingId]:prevIndex});});};const handleRegistration=async e=>{e.preventDefault();setLoading(true);const form=e.target;const email=form.email.value;const password=form.password.value;const name=form.name.value;try{const{data:authData,error}=await supabase.auth.signUp({email,password,options:{data:{name}}});if(error)throw error;if(authData.user){const{error:profileError}=await supabase.from('profiles').insert([{id:authData.user.id,email:authData.user.email,name:name,role:'user'}]);if(profileError)throw profileError;}alert('Registration successful! Please check your email to confirm your account.');setShowRegistrationModal(false);setShowLoginModal(true);}catch(error){alert(error.message);}finally{setLoading(false);}};const handleLogin=async e=>{e.preventDefault();setLoading(true);const form=e.target;const{error}=await supabase.auth.signInWithPassword({email:form.email.value,password:form.password.value});setLoading(false);if(error){alert(error.message);}else{setShowLoginModal(false);}};const handleForgotPassword=async()=>{const email=prompt('Please enter your email address to reset your password:');if(email){try{const{error}=await supabase.auth.resetPasswordForEmail(email,{redirectTo:\"\".concat(window.location.origin,\"/reset-password\")});if(error)throw error;alert('Password reset email sent. Please check your inbox.');}catch(error){console.error('Error sending password reset email:',error.message);alert('Error sending password reset email. Please try again.');}}};const handleLogout=async()=>{try{const{error}=await supabase.auth.signOut();if(error)throw error;setSession(null);setFavorites([]);}catch(error){console.error('Error signing out:',error.message);alert('Error signing out. Please try again.');}};const handleOpenNotesModal=async listing=>{setCurrentListing(listing);setLoading(true);try{var _result$data;const result=await supabase.from('private_notes').select('note_content').eq('user_id',userId).eq('listing_id',listing.id).single();if(result.error&&result.error.code!=='PGRST116')throw result.error;setCurrentNote(((_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.note_content)||'');setShowNotesModal(true);}catch(error){console.error('Error fetching private note:',error.message);setCurrentNote('');}finally{setLoading(false);}};const handleSaveNote=async()=>{if(!currentListing||!userId)return;setLoading(true);try{const noteData={user_id:userId,listing_id:currentListing.id,note_content:currentNote};const{data:existingNote,error:fetchError}=await supabase.from('private_notes').select('id').eq('user_id',userId).eq('listing_id',currentListing.id).single();if(fetchError&&fetchError.code!=='PGRST116')throw fetchError;if(existingNote){const{error:updateError}=await supabase.from('private_notes').update(noteData).eq('id',existingNote.id);if(updateError)throw updateError;}else{const{error:insertError}=await supabase.from('private_notes').insert(noteData);if(insertError)throw insertError;}setShowNotesModal(false);alert('Note saved successfully!');}catch(error){console.error('Error saving note:',error.message);alert('Failed to save note.');}finally{setLoading(false);}};const selectedListing=selectedListingId?listings.find(l=>l.id===selectedListingId):null;const renderMapAndListings=()=>{if(loadError)return/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center font-semibold p-8\",children:\"Error loading maps\"});if(!isLoaded)return/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-center font-semibold p-8\",children:\"Loading Map...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-[1fr_2fr] gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-[60vh] lg:h-[80vh] sticky top-28 rounded-2xl overflow-hidden shadow-lg border border-gray-200\",children:/*#__PURE__*/_jsx(GoogleMap,{mapContainerStyle:{width:'100%',height:'100%'},center:mapCenter,zoom:10,options:{disableDefaultUI:true,zoomControl:true},children:listings.map(listing=>/*#__PURE__*/_jsx(MarkerF,{position:{lat:listing.latitude,lng:listing.longitude},onClick:()=>handleSelectListing(listing.id)},listing.id))})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading listings...\"})]}):listings.length>0?listings.map(listing=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleSelectListing(listing.id),className:\"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-300 cursor-pointer\",children:[listing.image_urls&&listing.image_urls.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-48 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.image_urls[currentImageIndex[listing.id]||0],alt:\"Listing at \".concat(listing.address),className:\"w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 right-3 flex space-x-2\",children:isLoggedIn&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(listing.id);},className:\"w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm \".concat(favorites.includes(listing.id)?'bg-red-500 text-white':'bg-white/80 text-gray-700'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(listing.id)?'fa-heart':'fa-heart',\" text-lg\")})})}),listing.image_urls.length>1&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-3 left-1/2 transform -translate-x-1/2 flex space-x-1\",children:listing.image_urls.map((_,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"block w-2 h-2 rounded-full transition-colors \".concat(index===currentImageIndex[listing.id]?'bg-white':'bg-white/50')},index))})]}):/*#__PURE__*/_jsx(\"div\",{className:\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home text-4xl mb-2\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No Image Available\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold text-gray-900 mb-1\",children:listing.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:listing.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold text-blue-600 mb-3\",children:[\"$\",new Intl.NumberFormat().format(listing.price)]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-4 line-clamp-2\",children:listing.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mt-4\",children:[isLoggedIn&&currentView==='public'&&/*#__PURE__*/_jsxs(_Fragment,{children:[listing.owner_id===userId?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit mr-1\"}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash mr-1\"}),\" Delete\"]})]}):/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(listing.id);},className:\"flex-1 text-center px-3 py-2 font-medium rounded-lg transition-colors text-sm \".concat(favorites.includes(listing.id)?'bg-red-100 text-red-600 hover:bg-red-200':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(listing.id)?'fa-heart':'fa-heart',\" mr-1\")}),favorites.includes(listing.id)?'Saved':'Save']}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenChat(listing);},className:\"flex-1 text-center px-3 py-2 bg-blue-100 text-blue-600 font-medium rounded-lg hover:bg-blue-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comment mr-1\"}),\" Chat\"]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();setListingForReview(listing);setShowReviewModal(true);},className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star mr-1\"}),\" Reviews\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleShareListing(listing);},className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-share-alt mr-1\"}),\" Share\"]}),currentView==='favorites'&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenNotesModal(listing);},className:\"flex-1 text-center px-3 py-2 bg-purple-100 text-purple-700 font-medium rounded-lg hover:bg-purple-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sticky-note mr-1\"}),\" Note\"]})]})]})]},listing.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home text-4xl mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No listings found.\"})]})})})]});};const renderDynamicForm=function(){let isEdit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const currentListingDetails=isEdit&&currentListing?currentListing.details:formDetails.details;const currentType=isEdit&&currentListing?currentListing.type:listingType;let dynamicFields=null;switch(currentType){case'house':dynamicFields=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Bedrooms\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"bedrooms\",placeholder:\"Number of bedrooms\",required:true,min:\"0\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.bedrooms,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{bedrooms:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Bathrooms\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"bathrooms\",placeholder:\"Number of bathrooms\",required:true,min:\"0\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.bathrooms,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{bathrooms:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Square Feet\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"sqft\",placeholder:\"Square footage\",required:true,min:\"0\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.sqft,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{sqft:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]});break;case'car':dynamicFields=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Make\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"make\",placeholder:\"Car make\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.make,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{make:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Model\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"model\",placeholder:\"Car model\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.model,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{model:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"year\",placeholder:\"Year\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.year,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{year:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Mileage\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"mileage\",placeholder:\"Mileage\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.mileage,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{mileage:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]});break;case'land':dynamicFields=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Acres\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"acres\",placeholder:\"Number of acres\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.acres,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{acres:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Zoning\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"zoning\",placeholder:\"Zoning type\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.zoning,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{zoning:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]});break;case'clothing':dynamicFields=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"brand\",placeholder:\"Brand name\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.brand,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{brand:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.category,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{category:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"shirts\",children:\"Shirts\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pants\",children:\"Pants\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dresses\",children:\"Dresses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"shoes\",children:\"Shoes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"accessories\",children:\"Accessories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"outerwear\",children:\"Outerwear\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Size\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"size\",placeholder:\"Size (e.g., S, M, L, XL)\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.size,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{size:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Color\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"color\",placeholder:\"Color\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.color,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{color:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]});break;default:dynamicFields=null;}return dynamicFields;};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 min-h-screen\",children:[/*#__PURE__*/_jsx(Header,{currentView:currentView,setCurrentView:setCurrentView,isLoggedIn:isLoggedIn,session:session,showProfileModal:showProfileModal,setShowProfileModal:setShowProfileModal,profileForm:profileForm,setProfileForm:setProfileForm,handleProfileChange:handleProfileChange,handleLogout:handleLogout,setShowLoginModal:setShowLoginModal,setShowRegistrationModal:setShowRegistrationModal}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{setCurrentView:setCurrentView,isLoggedIn:isLoggedIn,setShowAddForm:setShowAddForm})}),/*#__PURE__*/_jsx(Route,{path:\"/apartments\",element:/*#__PURE__*/_jsx(CategoryListingsPage,{category:\"apartments\",title:\"Apartment Listings\",colorClass:\"from-blue-600 to-indigo-700\",listings:listings,loading:loading,currentImageIndex:currentImageIndex,handleSelectListing:handleSelectListing,handleToggleFavorite:handleToggleFavorite,favorites:favorites,isLoggedIn:isLoggedIn,handleOpenChat:handleOpenChat,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,handleShareListing:handleShareListing,handleOpenNotesModal:handleOpenNotesModal,currentView:currentView,userId:userId})}),/*#__PURE__*/_jsx(Route,{path:\"/cars\",element:/*#__PURE__*/_jsx(CategoryListingsPage,{category:\"cars\",title:\"Car Listings\",colorClass:\"from-green-600 to-emerald-700\",listings:listings,loading:loading,currentImageIndex:currentImageIndex,handleSelectListing:handleSelectListing,handleToggleFavorite:handleToggleFavorite,favorites:favorites,isLoggedIn:isLoggedIn,handleOpenChat:handleOpenChat,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,handleShareListing:handleShareListing,handleOpenNotesModal:handleOpenNotesModal,currentView:currentView,userId:userId})}),/*#__PURE__*/_jsx(Route,{path:\"/land\",element:/*#__PURE__*/_jsx(CategoryListingsPage,{category:\"land\",title:\"Land Listings\",colorClass:\"from-yellow-600 to-orange-700\",listings:listings,loading:loading,currentImageIndex:currentImageIndex,handleSelectListing:handleSelectListing,handleToggleFavorite:handleToggleFavorite,favorites:favorites,isLoggedIn:isLoggedIn,handleOpenChat:handleOpenChat,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,handleShareListing:handleShareListing,handleOpenNotesModal:handleOpenNotesModal,currentView:currentView,userId:userId})}),/*#__PURE__*/_jsx(Route,{path:\"/clothing\",element:/*#__PURE__*/_jsx(CategoryListingsPage,{category:\"clothing\",title:\"Clothing Listings\",colorClass:\"from-purple-600 to-indigo-700\",listings:listings,loading:loading,currentImageIndex:currentImageIndex,handleSelectListing:handleSelectListing,handleToggleFavorite:handleToggleFavorite,favorites:favorites,isLoggedIn:isLoggedIn,handleOpenChat:handleOpenChat,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,handleShareListing:handleShareListing,handleOpenNotesModal:handleOpenNotesModal,currentView:currentView,userId:userId})}),/*#__PURE__*/_jsx(Route,{path:\"/listing/:id\",element:/*#__PURE__*/_jsx(ListingDetailPage,{selectedListing:selectedListing,currentImageIndex:currentImageIndex,handlePrevImage:handlePrevImage,handleNextImage:handleNextImage,renderStars:renderStars,getAverageRating:getAverageRating,isLoggedIn:isLoggedIn,favorites:favorites,handleToggleFavorite:handleToggleFavorite,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,setCurrentListing:setCurrentListing,setUploadedImage:setUploadedImage,setShowEditModal:setShowEditModal,handleOpenChat:handleOpenChat,userId:userId})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:currentView==='public'?/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-6 py-8\",children:renderMapAndListings()}):selectedListing?/*#__PURE__*/_jsx(ListingDetailPage,{selectedListing:selectedListing,currentImageIndex:currentImageIndex,handlePrevImage:handlePrevImage,handleNextImage:handleNextImage,renderStars:renderStars,getAverageRating:getAverageRating,isLoggedIn:isLoggedIn,favorites:favorites,handleToggleFavorite:handleToggleFavorite,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,setCurrentListing:setCurrentListing,setUploadedImage:setUploadedImage,setShowEditModal:setShowEditModal,handleOpenChat:handleOpenChat,userId:userId}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Page Not Found\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setCurrentView('public'),className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\",children:\"Go to Home\"})]})})]}),showAddForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Add New Listing\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddForm(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Listing Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:listingType,onChange:e=>{setListingType(e.target.value);setFormDetails({});},className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"car\",children:\"Car\"}),/*#__PURE__*/_jsx(\"option\",{value:\"land\",children:\"Land\"}),/*#__PURE__*/_jsx(\"option\",{value:\"clothing\",children:\"Clothing\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddListing,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",placeholder:\"Street address\",required:true,value:formDetails.address||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{address:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",placeholder:\"City\",required:true,value:formDetails.city||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{city:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",placeholder:\"Price\",required:true,min:\"0\",value:formDetails.price||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{price:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Latitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"latitude\",placeholder:\"Latitude\",required:true,value:formDetails.latitude||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{latitude:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Longitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"longitude\",placeholder:\"Longitude\",required:true,value:formDetails.longitude||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{longitude:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description\",required:true,value:formDetails.description||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{description:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",rows:\"3\"})]}),renderDynamicForm(),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Upload Image (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddForm(false),className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||isGeneratingImage,className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:loading||isGeneratingImage?'Processing...':'Add Listing'})]})]})]})]})}),showEditModal&&currentListing&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Edit Listing\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowEditModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateListing,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",placeholder:\"Address\",required:true,defaultValue:currentListing.address,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{address:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",placeholder:\"City\",required:true,defaultValue:currentListing.city,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{city:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",placeholder:\"Price\",required:true,min:\"0\",defaultValue:currentListing.price,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{price:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Latitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"latitude\",placeholder:\"Latitude\",required:true,defaultValue:currentListing.latitude,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{latitude:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Longitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"longitude\",placeholder:\"Longitude\",required:true,defaultValue:currentListing.longitude,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{longitude:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description\",required:true,defaultValue:currentListing.description,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{description:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",rows:\"3\"})]}),renderDynamicForm(true),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Upload New Image (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowEditModal(false),className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:loading?'Updating...':'Update Listing'})]})]})})]})}),showConfirmDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle text-red-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:\"Confirm Deletion\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Are you sure you want to delete this listing? This action cannot be undone.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowConfirmDeleteModal(false);setListingToDelete(null);},className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleDeleteListing(listingToDelete),className:\"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors\",children:\"Delete\"})]})]})})}),showReviewModal&&listingForReview&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white\",children:[\"Reviews for \",listingForReview.address]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowReviewModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[listingForReview.reviews.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 max-h-96 overflow-y-auto pr-2\",children:listingForReview.reviews.map((review,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-xl border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[renderStars(review.rating),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:review.rating===5?'Excellent':review.rating===4?'Good':review.rating===3?'Average':review.rating===2?'Poor':'Terrible'})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(review.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:review.review_text}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-gray-500\",children:[\"by User \",review.reviewer_id.substring(0,8),\"...\"]})]},index))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star text-gray-400 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No Reviews Yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Be the first to share your experience with this property.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-center\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setShowReviewModal(false);setShowAddReviewModal(true);},className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-2\"}),\"Add Your Review\"]})})]})]})}),showAddReviewModal&&listingForReview&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Add Review\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddReviewModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddReview,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:[1,2,3,4,5].map(num=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"rating\",value:num,required:true,className:\"sr-only\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-medium\",children:num})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 mt-1\",children:num===1?'Poor':num===2?'Fair':num===3?'Good':num===4?'Very Good':'Excellent'})]},num))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Your Review\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"reviewText\",placeholder:\"Share your experience with this property...\",rows:\"4\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddReviewModal(false),className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\",children:\"Submit Review\"})]})]})})]})}),showNotesModal&&currentListing&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Personal Note\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowNotesModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:currentListing.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:currentListing.city}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Your Note\"}),/*#__PURE__*/_jsx(\"textarea\",{value:currentNote,onChange:e=>setCurrentNote(e.target.value),placeholder:\"Write your private notes here...\",rows:\"6\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowNotesModal(false);setCurrentNote('');},className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSaveNote,className:\"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors\",children:\"Save Note\"})]})]})]})}),showChatModal&&listingForChat&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md flex flex-col h-full max-h-[80vh]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-green-600 to-teal-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-white\",children:[\"Chat for \",listingForChat.address]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowChatModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow overflow-y-auto p-4 bg-gray-50\",children:chatMessages.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[chatMessages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(message.user_id===userId?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-[80%] p-4 rounded-2xl \".concat(message.user_id===userId?'bg-green-500 text-white rounded-tr-none':'bg-white border border-gray-200 rounded-tl-none'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"break-words\",children:message.content}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(message.user_id===userId?'text-green-100':'text-gray-500'),children:new Date(message.created_at).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]})},message.id)),/*#__PURE__*/_jsx(\"div\",{ref:chatMessagesEndRef})]}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-200 mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comments text-gray-500 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No Messages Yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Start the conversation with the broker.\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newChatMessage,onChange:e=>setNewChatMessage(e.target.value),placeholder:\"Type a message...\",className:\"flex-grow p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-3 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-paper-plane\"})})]})})]})}),showRegistrationModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-green-600 to-emerald-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Create Account\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowRegistrationModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegistration,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Your full name\",required:true,value:profileForm.name,onChange:handleProfileChange,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Your email address\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Create a password\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\",children:\"Create Account\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-6 text-center text-gray-600\",children:[\"Already have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowRegistrationModal(false);setShowLoginModal(true);},className:\"text-green-600 hover:text-green-700 font-medium\",children:\"Sign in\"})]})]})]})}),showLoginModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowLoginModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Enter your email\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Enter your password\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleForgotPassword,className:\"text-sm text-blue-600 hover:text-blue-700 font-medium\",children:\"Forgot your password?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:loading?'Logging in...':'Sign In'})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-6 text-center text-gray-600\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowLoginModal(false);setShowRegistrationModal(true);},className:\"text-blue-600 hover:text-blue-700 font-medium\",children:\"Sign up\"})]})]})]})}),showProfileModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Update Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowProfileModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateProfile,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:profileForm.name,onChange:handleProfileChange,placeholder:\"Your name\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowProfileModal(false),className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:loading?'Updating...':'Update Profile'})]})]})})]})})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","useCallback","BrowserRouter","Router","Routes","Route","useNavigate","GoogleMap","useLoadScript","MarkerF","createClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","supabaseUrl","supabaseAnonKey","supabase","Header","_ref","currentView","setCurrentView","isLoggedIn","session","showProfileModal","setShowProfileModal","profileForm","setProfileForm","handleProfileChange","handleLogout","setShowLoginModal","setShowRegistrationModal","showDropdown","setShowDropdown","navigate","handleCategorySelect","category","concat","className","children","type","onClick","user","email","charAt","toUpperCase","split","name","user_metadata","HomePage","_ref2","setShowAddForm","CategoryListingsPage","_ref3","title","colorClass","listings","loading","currentImageIndex","handleSelectListing","handleToggleFavorite","favorites","handleOpenChat","setListingForReview","setShowReviewModal","handleShareListing","handleOpenNotesModal","userId","getCategoryIcon","placeholder","length","filter","listing","slice","map","id","image_urls","src","alt","address","e","stopPropagation","includes","city","Intl","NumberFormat","format","price","description","owner_id","ListingDetailPage","_ref4","selectedListing","handlePrevImage","handleNextImage","renderStars","getAverageRating","setCurrentListing","setUploadedImage","setShowEditModal","getCategoryColor","getCategoryName","details","bedrooms","bathrooms","sqft","make","model","mileage","year","acres","zoning","brand","size","color","reviews","toLowerCase","required","rows","App","_session$user3","setSession","setListings","showAddForm","showEditModal","currentListing","showConfirmDeleteModal","setShowConfirmDeleteModal","listingToDelete","setListingToDelete","setFavorites","showReviewModal","showAddReviewModal","setShowAddReviewModal","listingForReview","showNotesModal","setShowNotesModal","currentNote","setCurrentNote","showChatModal","setShowChatModal","listingForChat","setListingForChat","chatMessages","setChatMessages","newChatMessage","setNewChatMessage","setCurrentImageIndex","setLoading","uploadedImage","isGeneratingImage","setIsGeneratingImage","chatMessagesEndRef","showLoginModal","selectedListingId","setSelectedListingId","showRegistrationModal","filters","priceMin","priceMax","bedroomsMin","bathroomsMin","sqftMin","listingType","setListingType","formDetails","setFormDetails","selectedType","carFilters","mileageMax","landFilters","acresMax","searchTerm","isLoaded","loadError","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","mapCenter","lat","lng","fetchListings","query","from","select","eq","textSearch","config","gte","parseFloat","lte","parseInt","ilike","data","listingsData","error","listingsError","favoritesData","favoritesError","fav","listing_id","console","message","authListener","auth","onAuthStateChange","event","subscription","unsubscribe","trackListingView","listingId","_session$user","insert","viewer_id","_objectSpread","target","value","_session$user2","fetchMessages","order","ascending","channel","on","schema","table","payload","prevMessages","new","subscribe","removeChannel","scrollToBottom","generateListingImage","listingDetails","Promise","resolve","setTimeout","imageUrl","Math","floor","random","uploadImage","file","fileExt","pop","fileName","filePath","storage","upload","publicUrlData","getPublicUrl","publicUrl","handleImageUpload","files","totalRating","reduce","sum","review","rating","stars","fullStars","hasHalfStar","i","push","handleAddListing","preventDefault","imageUrls","url","aiImageUrl","newListing","latitude","longitude","handleDeleteListing","delete","handleUpdateListing","updatedListing","update","handleAddReview","form","newReview","reviewer_id","review_text","reviewText","updatedReviews","handleUpdateProfile","updateUser","alert","isFavorite","noteError","user_id","handleSendMessage","trim","content","current","scrollIntoView","behavior","listingUrl","window","location","origin","navigator","clipboard","writeText","err","textarea","document","createElement","body","appendChild","execCommand","removeChild","prev","currentIndex","nextIndex","prevIndex","handleRegistration","password","authData","signUp","options","profileError","role","handleLogin","signInWithPassword","handleForgotPassword","prompt","resetPasswordForEmail","redirectTo","signOut","_result$data","result","single","code","note_content","handleSaveNote","noteData","existingNote","fetchError","updateError","insertError","find","l","renderMapAndListings","mapContainerStyle","width","height","center","zoom","disableDefaultUI","zoomControl","position","_","index","renderDynamicForm","isEdit","arguments","undefined","currentListingDetails","currentType","dynamicFields","min","defaultValue","onChange","step","path","element","onSubmit","accept","disabled","Date","created_at","toLocaleDateString","substring","num","toLocaleTimeString","hour","minute","ref"],"sources":["/workspaces/broker-app/frontend/src/app.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\nimport { BrowserRouter as Router, Routes, Route, useNavigate } from 'react-router-dom';\nimport { GoogleMap, useLoadScript, MarkerF } from '@react-google-maps/api';\nimport './index.css';\nimport { createClient } from '@supabase/supabase-js';\nconst supabaseUrl = 'https://ouscjkmgdsnzakairivo.supabase.co';\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91c2Nqa21nZHNuemFrYWlyaXZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MzY0MzYsImV4cCI6MjA3MTUxMjQzNn0.ii49ymR7Bi7WZTYOkYnE1-kJIlZ7DV5xR_tM3kbX-MU';\nconst supabase = createClient(supabaseUrl, supabaseAnonKey);\n// Header Component\nconst Header = ({ currentView, setCurrentView, isLoggedIn, session, showProfileModal, setShowProfileModal, profileForm, setProfileForm, handleProfileChange, handleLogout, setShowLoginModal, setShowRegistrationModal }) => {\n  const [showDropdown, setShowDropdown] = useState(false);\n  const navigate = useNavigate();\n  const handleCategorySelect = (category) => {\n    setCurrentView(category);\n    navigate(`/${category}`);\n    setShowDropdown(false);\n  };\n  return (\n    <header className=\"bg-white shadow-sm sticky top-0 z-40 border-b border-gray-200\">\n      <div className=\"max-w-7xl mx-auto px-6 py-4\">\n        <div className=\"flex justify-between items-center\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-sm\">\n              <span className=\"text-white font-bold text-xl\">B</span>\n            </div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">\n              <span className=\"text-blue-600\">Broker</span><span className=\"text-gray-800\">Connect</span>\n            </h1>\n          </div>\n          <nav className=\"hidden md:flex items-center space-x-1\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                setCurrentView('public');\n                navigate('/');\n              }}\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                currentView === 'public' \n                  ? 'bg-blue-100 text-blue-700' \n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              Home\n            </button>\n            <div className=\"relative\">\n              <button\n                type=\"button\"\n                onClick={() => setShowDropdown(!showDropdown)}\n                className=\"px-4 py-2 rounded-lg font-medium text-gray-600 hover:bg-gray-100 transition-colors flex items-center\"\n              >\n                Categories\n                <i className=\"fas fa-chevron-down ml-2 text-xs\"></i>\n              </button>\n              {showDropdown && (\n                <div className=\"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleCategorySelect('apartments')}\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\n                  >\n                    Apartments\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleCategorySelect('cars')}\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\n                  >\n                    Cars\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleCategorySelect('land')}\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\n                  >\n                    Land\n                  </button>\n                  <button\n        type=\"button\"\n        onClick={() => handleCategorySelect('clothing')}\n        className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\n      >\n        Clothing\n      </button>\n                </div>\n              )}\n            </div>\n            {isLoggedIn && (\n              <>\n                <button\n                  type=\"button\"\n                  onClick={() => setCurrentView('private')}\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                    currentView === 'private' \n                      ? 'bg-blue-100 text-blue-700' \n                      : 'text-gray-600 hover:bg-gray-100'\n                  }`}\n                >\n                  My Listings\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setCurrentView('favorites')}\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                    currentView === 'favorites' \n                      ? 'bg-blue-100 text-blue-700' \n                      : 'text-gray-600 hover:bg-gray-100'\n                  }`}\n                >\n                  Favorites\n                </button>\n              </>\n            )}\n            {isLoggedIn ? (\n              <div className=\"relative group\">\n                <button className=\"flex items-center space-x-2\">\n                  <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium\">\n                    {session.user.email.charAt(0).toUpperCase()}\n                  </div>\n                  <span className=\"text-gray-700\">{session.user.email.split('@')[0]}</span>\n                </button>\n                <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-50\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setProfileForm({ name: session.user.user_metadata.name || '' });\n                      setShowProfileModal(true);\n                    }}\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\n                  >\n                    Update Profile\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={handleLogout}\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\n                  >\n                    Logout\n                  </button>\n                </div>\n              </div>\n            ) : (\n              <>\n                <button \n                  type=\"button\"\n                  onClick={() => setShowLoginModal(true)} \n                  className=\"px-4 py-2 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors\"\n                >\n                  Login\n                </button>\n                <button \n                  type=\"button\"\n                  onClick={() => setShowRegistrationModal(true)} \n                  className=\"ml-2 px-4 py-2 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 transition-colors\"\n                >\n                  Register\n                </button>\n              </>\n            )}\n          </nav>\n          {/* Mobile menu button */}\n          <div className=\"md:hidden\">\n            <button className=\"text-gray-500 hover:text-gray-700\">\n              <i className=\"fas fa-bars text-xl\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n};\n// Home Page Component\nconst HomePage = ({ setCurrentView, isLoggedIn, setShowAddForm }) => {\n  const navigate = useNavigate();\n  return (\n    <div className=\"bg-gray-50 min-h-screen\">\n      <main className=\"max-w-7xl mx-auto px-6 py-16\">\n        <div className=\"text-center mb-16\">\n          <h1 className=\"text-5xl font-bold text-gray-900 mb-6\">Welcome to BrokerConnect</h1>\n          <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n            Your ultimate marketplace for premium apartments, reliable cars, and valuable land. \n            Discover your next great investment with ease, precision, and trust.\n          </p>\n          <div className=\"mt-10 flex justify-center space-x-4\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                setCurrentView('apartments');\n                navigate('/apartments');\n              }}\n              className=\"px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition-colors\"\n            >\n              Browse Apartments\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setCurrentView('cars');\n                navigate('/cars');\n              }}\n              className=\"px-8 py-3 bg-green-600 text-white font-semibold rounded-lg shadow hover:bg-green-700 transition-colors\"\n            >\n              Browse Cars\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setCurrentView('land');\n                navigate('/land');\n              }}\n              className=\"px-8 py-3 bg-yellow-600 text-white font-semibold rounded-lg shadow hover:bg-yellow-700 transition-colors\"\n            >\n              Browse Land\n            </button>\n            <button\n    type=\"button\"\n    onClick={() => {\n      setCurrentView('clothing');\n      navigate('/clothing');\n    }}\n    className=\"px-8 py-3 bg-purple-600 text-white font-semibold rounded-lg shadow hover:bg-purple-700 transition-colors\"\n  >\n    Browse Clothing\n  </button>\n          </div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16\">\n          <div className=\"bg-white p-8 rounded-2xl shadow-lg border border-blue-200\">\n            <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-6\">\n              <i className=\"fas fa-building text-blue-600 text-2xl\"></i>\n            </div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Premium Apartments</h3>\n            <p className=\"text-gray-600 mb-6\">Discover luxury apartments in prime locations with top-notch amenities.</p>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setCurrentView('apartments');\n                navigate('/apartments');\n              }}\n              className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              View Apartments\n            </button>\n          </div>\n          <div className=\"bg-white p-8 rounded-2xl shadow-lg border border-green-200\">\n            <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6\">\n              <i className=\"fas fa-car text-green-600 text-2xl\"></i>\n            </div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Reliable Cars</h3>\n            <p className=\"text-gray-600 mb-6\">Find quality vehicles from trusted sellers with verified history reports.</p>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setCurrentView('cars');\n                navigate('/cars');\n              }}\n              className=\"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              View Cars\n            </button>\n          </div>\n          <div className=\"bg-white p-8 rounded-2xl shadow-lg border border-yellow-200\">\n            <div className=\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-6\">\n              <i className=\"fas fa-tree text-yellow-600 text-2xl\"></i>\n            </div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Valuable Land</h3>\n            <p className=\"text-gray-600 mb-6\">Invest in prime land parcels with great potential for development.</p>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setCurrentView('land');\n                navigate('/land');\n              }}\n              className=\"px-6 py-3 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 transition-colors\"\n            >\n              View Land\n            </button>\n          </div>\n    \n        <div className=\"bg-white p-8 rounded-2xl shadow-lg border border-purple-200\">\n    <div className=\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-6\">\n      <i className=\"fas fa-tshirt text-purple-600 text-2xl\"></i>\n    </div>\n    <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Clothing</h3>\n    <p className=\"text-gray-600 mb-6\">Discover trendy clothing items from various brands and styles.</p>\n    <button\n      type=\"button\"\n      onClick={() => {\n        setCurrentView('clothing');\n        navigate('/clothing');\n      }}\n      className=\"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors\"\n    >\n      View Clothing\n    </button>\n  </div>\n</div>\n        <div className=\"text-center\">\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-6\">How It Works</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            <div className=\"bg-white p-6 rounded-xl shadow-sm\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-blue-600 font-bold\">1</span>\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Browse Listings</h3>\n              <p className=\"text-gray-600\">Explore our extensive collection of properties, vehicles, and land.</p>\n            </div>\n            <div className=\"bg-white p-6 rounded-xl shadow-sm\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-blue-600 font-bold\">2</span>\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Connect with Brokers</h3>\n              <p className=\"text-gray-600\">Get in touch with professional brokers for expert guidance.</p>\n            </div>\n            <div className=\"bg-white p-6 rounded-xl shadow-sm\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-blue-600 font-bold\">3</span>\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Make Your Investment</h3>\n              <p className=\"text-gray-600\">Secure your next great investment with confidence and ease.</p>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n};\n// Category Listings Page Component\nconst CategoryListingsPage = ({ \n  category, \n  title, \n  colorClass, \n  listings, \n  loading, \n  currentImageIndex, \n  handleSelectListing, \n  handleToggleFavorite, \n  favorites, \n  isLoggedIn, \n  handleOpenChat, \n  setListingForReview, \n  setShowReviewModal, \n  handleShareListing, \n  handleOpenNotesModal, \n  currentView,\n  userId\n}) => {\n  const navigate = useNavigate();\n  const getCategoryIcon = () => {\n    switch(category) {\n      case 'apartments': return 'fas fa-building';\n      case 'cars': return 'fas fa-car';\n      case 'land': return 'fas fa-tree';\n      case 'clothing': return 'from-purple-600 to-indigo-700';\n      default: return 'fas fa-home';\n    }\n  };\n  return (\n    <div className=\"bg-gray-50 min-h-screen\">\n      <main className=\"max-w-7xl mx-auto px-6 py-8\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <div>\n            <button \n              type=\"button\"\n              onClick={() => navigate('/')}\n              className=\"flex items-center text-blue-600 hover:text-blue-800 transition-colors mb-4\"\n            >\n              <i className=\"fas fa-arrow-left mr-2\"></i>\n              <span>Back to Home</span>\n            </button>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{title}</h1>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"relative flex-grow max-w-md\">\n              <input\n                type=\"text\"\n                placeholder={`Search by title, description, or location...`}\n                className=\"w-full p-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n              <i className=\"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\n            </div>\n            <button\n              type=\"button\"\n              className=\"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors flex items-center\"\n            >\n              <i className=\"fas fa-search mr-2\"></i>\n              Search\n            </button>\n          </div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n          {loading ? (\n            <div className=\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\">\n              <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"></div>\n              <p>Loading listings...</p>\n            </div>\n          ) : listings.length > 0 ? (\n            listings.filter(listing => listing.type === category.slice(0, -1)).map(listing => (\n              <div\n                key={listing.id}\n                onClick={() => handleSelectListing(listing.id)}\n                className=\"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-300 cursor-pointer\"\n              >\n                {listing.image_urls && listing.image_urls.length > 0 ? (\n                  <div className=\"relative h-48 overflow-hidden\">\n                    <img\n                      src={listing.image_urls[currentImageIndex[listing.id] || 0]}\n                      alt={`Listing at ${listing.address}`}\n                      className=\"w-full h-full object-cover\"\n                    />\n                    <div className=\"absolute top-3 right-3 flex space-x-2\">\n                      {isLoggedIn && (\n                        <button \n                          type=\"button\"\n                          onClick={(e) => { e.stopPropagation(); handleToggleFavorite(listing.id); }}\n                          className={`w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm ${\n                            favorites.includes(listing.id) \n                              ? 'bg-red-500 text-white' \n                              : 'bg-white/80 text-gray-700'\n                          }`}\n                        >\n                          <i className={`fas ${favorites.includes(listing.id) ? 'fa-heart' : 'fa-heart'} text-lg`}></i>\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500\">\n                    <div className=\"text-center\">\n                      <i className=\"fas fa-home text-4xl mb-2\"></i>\n                      <p>No Image Available</p>\n                    </div>\n                  </div>\n                )}\n                <div className=\"p-5\">\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <div>\n                      <h2 className=\"text-lg font-bold text-gray-900 mb-1\">{listing.address}</h2>\n                      <p className=\"text-gray-600 text-sm\">{listing.city}</p>\n                    </div>\n                    <div className=\"text-xl font-bold text-blue-600 mb-3\">\n                      ${new Intl.NumberFormat().format(listing.price)}\n                    </div>\n                  </div>\n                  <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">{listing.description}</p>\n                  <div className=\"flex flex-wrap gap-2 mt-4\">\n                    {isLoggedIn && (\n                      <>\n                        {listing.owner_id === userId ? (\n                          <>\n                            <button className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\">\n                              <i className=\"fas fa-edit mr-1\"></i> Edit\n                            </button>\n                            <button className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\">\n                              <i className=\"fas fa-trash mr-1\"></i> Delete\n                            </button>\n                          </>\n                        ) : (\n                          <button \n                            type=\"button\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleToggleFavorite(listing.id);\n                            }}\n                            className={`flex-1 text-center px-3 py-2 font-medium rounded-lg transition-colors text-sm ${\n                              favorites.includes(listing.id) \n                                ? 'bg-red-100 text-red-600 hover:bg-red-200' \n                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                            }`}\n                          >\n                            <i className={`fas ${favorites.includes(listing.id) ? 'fa-heart' : 'fa-heart'} mr-1`}></i>\n                            {favorites.includes(listing.id) ? 'Saved' : 'Save'}\n                          </button>\n                        )}\n                        <button \n                          type=\"button\"\n                          onClick={(e) => { e.stopPropagation(); handleOpenChat(listing); }}\n                          className=\"flex-1 text-center px-3 py-2 bg-blue-100 text-blue-600 font-medium rounded-lg hover:bg-blue-200 transition-colors text-sm\"\n                        >\n                          <i className=\"fas fa-comment mr-1\"></i> Chat\n                        </button>\n                      </>\n                    )}\n                    <button \n                      type=\"button\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setListingForReview(listing);\n                        setShowReviewModal(true);\n                      }}\n                      className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\"\n                    >\n                      <i className=\"fas fa-star mr-1\"></i> Reviews\n                    </button>\n                    <button \n                      type=\"button\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleShareListing(listing);\n                      }}\n                      className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\"\n                    >\n                      <i className=\"fas fa-share-alt mr-1\"></i> Share\n                    </button>\n                    {currentView === 'favorites' && (\n                      <button\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleOpenNotesModal(listing);\n                        }}\n                        className=\"flex-1 text-center px-3 py-2 bg-purple-100 text-purple-700 font-medium rounded-lg hover:bg-purple-200 transition-colors text-sm\"\n                      >\n                        <i className=\"fas fa-sticky-note mr-1\"></i> Note\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))\n          ) : (\n            <div className=\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\">\n              <i className={`fas ${getCategoryIcon()} text-4xl mb-4 text-gray-300`}></i>\n              <p>No listings found.</p>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n};\n// Listing Detail Page Component\nconst ListingDetailPage = ({ \n  selectedListing, \n  currentImageIndex, \n  handlePrevImage, \n  handleNextImage, \n  renderStars, \n  getAverageRating, \n  isLoggedIn, \n  favorites, \n  handleToggleFavorite, \n  setListingForReview, \n  setShowReviewModal, \n  setCurrentListing, \n  setUploadedImage, \n  setShowEditModal, \n  handleOpenChat,\n  userId\n}) => {\n  const navigate = useNavigate();\n  if (!selectedListing) {\n    return <div>Loading...</div>;\n  }\n  const getCategoryColor = () => {\n    switch(selectedListing.type) {\n      case 'house': return 'from-blue-600 to-indigo-700';\n      case 'car': return 'from-green-600 to-emerald-700';\n      case 'land': return 'from-red-600 to-orange-700';\n      case 'clothing': return 'from-purple-600 to-indigo-700';\n      default: return 'from-gray-600 to-gray-700';\n    }\n  };\n  const getCategoryName = () => {\n    switch(selectedListing.type) {\n      case 'house': return 'Apartment';\n      case 'car': return 'Car';\n      case 'land': return 'Land';\n      case 'clothing': return 'from-purple-600 to-indigo-700';\n      default: return 'Property';\n    }\n  };\n  return (\n    <div className=\"bg-gray-50 min-h-screen\">\n      <div className={`bg-gradient-to-r ${getCategoryColor()} py-6`}>\n        <div className=\"max-w-7xl mx-auto px-6\">\n          <button \n            type=\"button\"\n            onClick={() => navigate(-1)}\n            className=\"flex items-center text-white hover:text-gray-200 transition-colors mb-4\"\n          >\n            <i className=\"fas fa-arrow-left mr-2\"></i>\n            <span>Back to List</span>\n          </button>\n          <h1 className=\"text-3xl font-bold text-white\">{selectedListing.address}</h1>\n        </div>\n      </div>\n      <main className=\"max-w-7xl mx-auto px-6 py-8\">\n        <div className=\"bg-white rounded-2xl shadow-lg overflow-hidden\">\n          <div className=\"relative w-full h-80 md:h-[500px]\">\n            <img\n              src={selectedListing.image_urls[currentImageIndex[selectedListing.id] || 0]}\n              alt={`Property at ${selectedListing.address}`}\n              className=\"w-full h-full object-cover\"\n            />\n            {selectedListing.image_urls.length > 1 && (\n              <>\n                <button\n                  type=\"button\"\n                  onClick={(e) => { e.stopPropagation(); handlePrevImage(selectedListing.id, selectedListing.image_urls); }}\n                  className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-colors\"\n                >\n                  <i className=\"fas fa-chevron-left\"></i>\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={(e) => { e.stopPropagation(); handleNextImage(selectedListing.id, selectedListing.image_urls); }}\n                  className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-colors\"\n                >\n                  <i className=\"fas fa-chevron-right\"></i>\n                </button>\n              </>\n            )}\n          </div>\n          <div className=\"p-6 md:p-8\">\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n              <div>\n                <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-2\">{selectedListing.address}</h1>\n                <p className=\"text-lg text-gray-600\">{selectedListing.city}</p>\n              </div>\n              <div className=\"mt-4 md:mt-0\">\n                <div className=\"text-3xl font-bold text-blue-600\">${new Intl.NumberFormat().format(selectedListing.price)}</div>\n              </div>\n            </div>\n            <div className=\"flex flex-wrap items-center gap-x-6 gap-y-3 text-gray-700 mb-8\">\n              {selectedListing.type === 'house' && selectedListing.details && (\n                <>\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n                    <i className=\"fas fa-bed text-blue-500 mr-2\"></i>\n                    <span className=\"font-medium\">{selectedListing.details.bedrooms} Beds</span>\n                  </div>\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n                    <i className=\"fas fa-bath text-blue-500 mr-2\"></i>\n                    <span className=\"font-medium\">{selectedListing.details.bathrooms} Baths</span>\n                  </div>\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n                    <i className=\"fas fa-ruler-combined text-blue-500 mr-2\"></i>\n                    <span className=\"font-medium\">{selectedListing.details.sqft} sqft</span>\n                  </div>\n                </>\n              )}\n              {selectedListing.type === 'car' && selectedListing.details && (\n                <>\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n                    <i className=\"fas fa-car text-blue-500 mr-2\"></i>\n                    <span className=\"font-medium\">{selectedListing.details.make} {selectedListing.details.model}</span>\n                  </div>\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n                    <i className=\"fas fa-tachometer-alt text-blue-500 mr-2\"></i>\n                    <span className=\"font-medium\">{selectedListing.details.mileage} miles</span>\n                  </div>\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n                    <i className=\"fas fa-calendar-alt text-blue-500 mr-2\"></i>\n                    <span className=\"font-medium\">{selectedListing.details.year}</span>\n                  </div>\n                </>\n              )}\n              {selectedListing.type === 'land' && selectedListing.details && (\n                <>\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n                    <i className=\"fas fa-tree text-blue-500 mr-2\"></i>\n                    <span className=\"font-medium\">{selectedListing.details.acres} Acres</span>\n                  </div>\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n                    <i className=\"fas fa-ruler text-blue-500 mr-2\"></i>\n                    <span className=\"font-medium\">{selectedListing.details.zoning}</span>\n                  </div>\n                </>\n              )}\n              {selectedListing.type === 'clothing' && selectedListing.details && (\n    <>\n      <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n        <i className=\"fas fa-tshirt text-blue-500 mr-2\"></i>\n        <span className=\"font-medium\">{selectedListing.details.brand || 'Unknown Brand'}</span>\n      </div>\n      <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n        <i className=\"fas fa-tag text-blue-500 mr-2\"></i>\n        <span className=\"font-medium\">{selectedListing.details.category || 'General'}</span>\n      </div>\n      {selectedListing.details.size && (\n        <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n          <i className=\"fas fa-ruler text-blue-500 mr-2\"></i>\n          <span className=\"font-medium\">Size: {selectedListing.details.size}</span>\n        </div>\n      )}\n      {selectedListing.details.color && (\n        <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\n          <i className=\"fas fa-palette text-blue-500 mr-2\"></i>\n          <span className=\"font-medium\">Color: {selectedListing.details.color}</span>\n        </div>\n      )}\n    </>\n  )}\n            </div>\n            <div className=\"mb-8\">\n              <h3 className=\"text-xl font-bold text-gray-800 mb-3\">Description</h3>\n              <p className=\"text-gray-600 leading-relaxed\">{selectedListing.description}</p>\n            </div>\n            <div className=\"mb-8\">\n              <h3 className=\"text-xl font-bold text-gray-800 mb-3\">Reviews</h3>\n              <div className=\"flex items-center space-x-2\">\n                {renderStars(getAverageRating(selectedListing.reviews))}\n                <span className=\"text-gray-600\">({selectedListing.reviews.length} reviews)</span>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n              <div className=\"md:col-span-2\">\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Contact Broker</h3>\n                <p className=\"text-gray-600 mb-6\">Interested in this {getCategoryName().toLowerCase()}? Reach out to the broker for more details or to schedule a viewing.</p>\n                <div className=\"bg-blue-50 p-6 rounded-xl border border-blue-200 mb-6\">\n                  <div className=\"flex items-center mb-4\">\n                    <i className=\"fas fa-envelope text-blue-600 mr-3\"></i>\n                    <span className=\"font-medium\">broker@example.com</span>\n                  </div>\n                  <p className=\"text-gray-600 text-sm\">Response time: Usually within 24 hours</p>\n                </div>\n                <form className=\"space-y-4\">\n                  <div>\n                    <input type=\"text\" placeholder=\"Your Name\" required className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                  </div>\n                  <div>\n                    <input type=\"email\" placeholder=\"Your Email\" required className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                  </div>\n                  <div>\n                    <textarea placeholder=\"Your Message\" rows=\"4\" required className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"></textarea>\n                  </div>\n                  <button type=\"submit\" className=\"w-full px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors\">\n                    Send Message\n                  </button>\n                </form>\n              </div>\n              <div>\n                <div className=\"bg-gray-50 p-6 rounded-xl border border-gray-200\">\n                  <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Actions</h3>\n                  <div className=\"space-y-3\">\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setListingForReview(selectedListing);\n                        setShowReviewModal(true);\n                      }}\n                      className=\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\"\n                    >\n                      <i className=\"fas fa-star mr-2 text-yellow-500\"></i>\n                      View Reviews\n                    </button>\n                    {isLoggedIn && (\n                      <button\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleToggleFavorite(selectedListing.id);\n                        }}\n                        className={`w-full px-4 py-3 font-medium rounded-lg transition-colors flex items-center justify-center ${\n                          favorites.includes(selectedListing.id) \n                            ? 'bg-red-50 border border-red-200 text-red-600 hover:bg-red-100' \n                            : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'\n                        }`}\n                      >\n                        <i className={`fas ${favorites.includes(selectedListing.id) ? 'fa-heart' : 'fa-heart'} mr-2`}></i>\n                        {favorites.includes(selectedListing.id) ? 'Remove from Favorites' : 'Add to Favorites'}\n                      </button>\n                    )}\n                    {isLoggedIn && selectedListing.owner_id === userId && (\n                      <button\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setCurrentListing(selectedListing);\n                          setUploadedImage(null);\n                          setShowEditModal(true);\n                        }}\n                        className=\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\"\n                      >\n                        <i className=\"fas fa-edit mr-2 text-blue-500\"></i>\n                        Edit Listing\n                      </button>\n                    )}\n                    {isLoggedIn && selectedListing.owner_id !== userId && (\n                      <button\n                        type=\"button\"\n                        onClick={(e) => { e.stopPropagation(); handleOpenChat(selectedListing); }}\n                        className=\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\"\n                      >\n                        <i className=\"fas fa-comment mr-2 text-green-500\"></i>\n                        Chat with Broker\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n};\n// Main App Component\nconst App = () => {\n  const [session, setSession] = useState(null);\n  const [listings, setListings] = useState([]);\n  const [currentView, setCurrentView] = useState('public');\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [currentListing, setCurrentListing] = useState(null);\n  const [showConfirmDeleteModal, setShowConfirmDeleteModal] = useState(false);\n  const [listingToDelete, setListingToDelete] = useState(null);\n  const [favorites, setFavorites] = useState([]);\n  const [showReviewModal, setShowReviewModal] = useState(false);\n  const [showAddReviewModal, setShowAddReviewModal] = useState(false);\n  const [listingForReview, setListingForReview] = useState(null);\n  const [showNotesModal, setShowNotesModal] = useState(false);\n  const [currentNote, setCurrentNote] = useState('');\n  const [showChatModal, setShowChatModal] = useState(false);\n  const [listingForChat, setListingForChat] = useState(null);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [newChatMessage, setNewChatMessage] = useState('');\n  const [currentImageIndex, setCurrentImageIndex] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [uploadedImage, setUploadedImage] = useState(null);\n  const [isGeneratingImage, setIsGeneratingImage] = useState(false);\n  const chatMessagesEndRef = useRef(null);\n  const [showProfileModal, setShowProfileModal] = useState(false);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [selectedListingId, setSelectedListingId] = useState(null);\n  const [profileForm, setProfileForm] = useState({ name: '' });\n  const [showRegistrationModal, setShowRegistrationModal] = useState(false);\n  const [filters] = useState({\n    priceMin: '',\n    priceMax: '',\n    bedroomsMin: '',\n    bathroomsMin: '',\n    sqftMin: '',\n  });\n  const [listingType, setListingType] = useState('house'); \n  const [formDetails, setFormDetails] = useState({});\n  const [selectedType] = useState(null);\n  const [carFilters] = useState({ make: '', mileageMax: '' });\n  const [landFilters] = useState({ acresMax: '', zoning: '' });\n  const [searchTerm] = useState('');\n  // Google Maps\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\n  });\n  const mapCenter = useMemo(() => ({ lat: 34.0522, lng: -118.2437 }), []);\n  const fetchListings = useCallback(async () => {\n    setLoading(true);\n    try {\n      let query = supabase.from('listings').select('*');\n      if (selectedType) {\n        query = query.eq('type', selectedType);\n      }\n      if (searchTerm) {\n        query = query.textSearch('search_vector', searchTerm, {\n          config: 'english',\n          type: 'websearch'\n        });\n      }\n      if (filters.priceMin) {\n        query = query.gte('price', parseFloat(filters.priceMin));\n      }\n      if (filters.priceMax) {\n        query = query.lte('price', parseFloat(filters.priceMax));\n      }\n      if (filters.bedroomsMin) {\n        query = query.gte('details->>bedrooms', parseInt(filters.bedroomsMin, 10));\n      }\n      if (filters.bathroomsMin) {\n        query = query.gte('details->>bathrooms', parseInt(filters.bathroomsMin, 10));\n      }\n      if (filters.sqftMin) {\n        query = query.gte('details->>sqft', parseInt(filters.sqftMin, 10));\n      }\n      if (selectedType === 'car' && carFilters.make) {\n        query = query.ilike('details->>make', `%${carFilters.make}%`);\n      }\n      if (selectedType === 'car' && carFilters.mileageMax) {\n        query = query.lte('details->>mileage', parseFloat(carFilters.mileageMax));\n      }\n      if (selectedType === 'land' && landFilters.acresMax) {\n        query = query.lte('details->>acres', parseFloat(landFilters.acresMax));\n      }\n      if (selectedType === 'land' && landFilters.zoning) {\n        query = query.ilike('details->>zoning', `%${landFilters.zoning}%`);\n      }\n      const { data: listingsData, error: listingsError } = await query;\n      if (listingsError) throw listingsError;\n      setListings(listingsData);\n      if (session) {\n        const { data: favoritesData, error: favoritesError } = await supabase\n          .from('favorites')\n          .select('listing_id');\n        if (favoritesError) throw favoritesError;\n        setFavorites(favoritesData.map(fav => fav.listing_id));\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [selectedType, searchTerm, filters, carFilters, landFilters, session]);\n useEffect(() => {\n  const { data: authListener } = supabase.auth.onAuthStateChange(\n    async (event, session) => {\n      setSession(session);\n      fetchListings();\n    }\n  );\n  return () => {\n    authListener.subscription.unsubscribe();\n  };\n}, [fetchListings]); \n useEffect(() => {\n  fetchListings();\n}, [fetchListings]);\n  const trackListingView = async (listingId) => {\n    if (!session?.user?.id) return;\n    try {\n      await supabase.from('listing_views').insert({\n        listing_id: listingId,\n        viewer_id: session.user.id,\n      });\n    } catch (error) {\n      console.error('Error tracking listing view:', error.message);\n    }\n  };\n  const handleProfileChange = (e) => {\n    setProfileForm({\n      ...profileForm,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSelectListing = (listingId) => {\n    setSelectedListingId(listingId);\n    if (session?.user?.id) {\n      trackListingView(listingId);\n    }\n  };\n  useEffect(() => {\n    if (listingForChat && session) {\n      const fetchMessages = async () => {\n        const { data, error } = await supabase\n          .from('messages')\n          .select('*')\n          .eq('listing_id', listingForChat.id)\n          .order('created_at', { ascending: true });\n        if (error) {\n          console.error(\"Error fetching messages:\", error);\n        } else {\n          setChatMessages(data);\n        }\n      };\n      fetchMessages();\n      const channel = supabase\n        .channel(`chat-room-${listingForChat.id}`)\n        .on(\n          'postgres_changes',\n          {\n            event: 'INSERT',\n            schema: 'public',\n            table: 'messages',\n            filter: `listing_id=eq.${listingForChat.id}`,\n          },\n          (payload) => {\n            setChatMessages(prevMessages => [...prevMessages, payload.new]);\n          }\n        )\n        .subscribe();\n      return () => {\n        supabase.removeChannel(channel);\n      };\n    }\n  }, [listingForChat, session]);\n  const userId = session?.user?.id;\n  const isLoggedIn = !!session;\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatMessages]);\n  const generateListingImage = async (listingDetails) => {\n    setIsGeneratingImage(true);\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        const imageUrl = `https://loremflickr.com/640/480/${listingDetails.bedrooms} bed ${listingDetails.bathrooms} bath, ${listingDetails.city}, real estate?lock=${Math.floor(Math.random() * 1000)}`;\n        setIsGeneratingImage(false);\n        resolve(imageUrl);\n      }, 2000);\n    });\n  };\n  const uploadImage = async (file) => {\n    if (!file) return null;\n    const fileExt = file.name.split('.').pop();\n    const fileName = `${Math.random()}.${fileExt}`;\n    const filePath = `listings/${fileName}`;\n    try {\n      const { error } = await supabase.storage\n        .from('listing_photos')\n        .upload(filePath, file);\n      if (error) throw error;\n      const { data: publicUrlData } = supabase.storage\n        .from('listing_photos')\n        .getPublicUrl(filePath);\n      return publicUrlData.publicUrl;\n    } catch (error) {\n      console.error('Error uploading image:', error.message);\n      return null;\n    }\n  };\n  const handleImageUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      setUploadedImage(file);\n    } else {\n      setUploadedImage(null);\n    }\n  };\n  const getAverageRating = (reviews) => {\n    if (!reviews || reviews.length === 0) return 0;\n    const totalRating = reviews.reduce((sum, review) => sum + review.rating, 0);\n    return totalRating / reviews.length;\n  };\n  const renderStars = (rating) => {\n    const stars = [];\n    const fullStars = Math.floor(rating);\n    const hasHalfStar = rating % 1 !== 0;\n    for (let i = 0; i < fullStars; i++) {\n      stars.push(<i key={`star-solid-${i}`} className=\"fas fa-star text-yellow-400\"></i>);\n    }\n    if (hasHalfStar) {\n      stars.push(<i key=\"star-half\" className=\"fas fa-star-half-alt text-yellow-400\"></i>);\n    }\n    for (let i = stars.length; i < 5; i++) {\n      stars.push(<i key={`star-empty-${i}`} className=\"far fa-star text-gray-400\"></i>);\n    }\n    return <div className=\"flex space-x-0.5\">{stars}</div>;\n  };\n  const handleAddListing = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    let imageUrls = [];\n    if (uploadedImage) {\n      const url = await uploadImage(uploadedImage);\n      if (url) {\n        imageUrls.push(url);\n      }\n    } else {\n      const aiImageUrl = await generateListingImage({\n        city: formDetails.city,\n        bedrooms: formDetails.bedrooms,\n        bathrooms: formDetails.bathrooms,\n      });\n      imageUrls.push(aiImageUrl);\n    }\n    const newListing = {\n      type: listingType,\n      address: formDetails.address,\n      city: formDetails.city,\n      price: parseInt(formDetails.price, 10),\n      latitude: parseFloat(formDetails.latitude),\n      longitude: parseFloat(formDetails.longitude),\n      description: formDetails.description,\n      image_urls: imageUrls,\n      reviews: [],\n      owner_id: userId,\n      details: formDetails.details,\n    };\n    try {\n      const { error } = await supabase.from('listings').insert([newListing]);\n      if (error) {\n        throw error;\n      }\n      await fetchListings();\n      setShowAddForm(false);\n      setUploadedImage(null);\n      setListingType('house');\n      setFormDetails({});\n    } catch (error) {\n      console.error('Error adding listing:', error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDeleteListing = async (id) => {\n    setLoading(true);\n    try {\n      const { error } = await supabase\n        .from('listings')\n        .delete()\n        .eq('id', id);\n      if (error) {\n        throw error;\n      }\n      await fetchListings();\n    } catch (error) {\n      console.error('Error deleting listing:', error.message);\n    } finally {\n      setShowConfirmDeleteModal(false);\n      setListingToDelete(null);\n      setLoading(false);\n    }\n  };\n  const handleUpdateListing = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    let imageUrls = currentListing.image_urls;\n    if (uploadedImage) {\n      const url = await uploadImage(uploadedImage);\n      if (url) {\n        imageUrls = [url];\n      }\n    }\n    const updatedListing = {\n      ...currentListing,\n      address: formDetails.address,\n      city: formDetails.city,\n      price: parseInt(formDetails.price, 10),\n      latitude: parseFloat(formDetails.latitude),\n      longitude: parseFloat(formDetails.longitude),\n      description: formDetails.description,\n      image_urls: imageUrls,\n      details: formDetails.details,\n    };\n    try {\n      const { error } = await supabase\n        .from('listings')\n        .update(updatedListing)\n        .eq('id', currentListing.id);\n      if (error) {\n        throw error;\n      }\n      await fetchListings();\n      setShowEditModal(false);\n      setCurrentListing(null);\n      setUploadedImage(null);\n    } catch (error) {\n      console.error('Error updating listing:', error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAddReview = async (e) => {\n    e.preventDefault();\n    const form = e.target;\n    const newReview = {\n      reviewer_id: userId,\n      rating: parseInt(form.rating.value, 10),\n      review_text: form.reviewText.value,\n    };\n    const updatedReviews = [...listingForReview.reviews, newReview];\n    try {\n      const { error } = await supabase\n        .from('listings')\n        .update({ reviews: updatedReviews })\n        .eq('id', listingForReview.id);\n      if (error) {\n        throw error;\n      }\n      await fetchListings();\n      setShowAddReviewModal(false);\n      setShowReviewModal(true);\n    } catch (error) {\n      console.error('Error adding review:', error.message);\n    }\n  };\n  const handleUpdateProfile = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const { error } = await supabase.auth.updateUser({\n        data: { name: profileForm.name },\n      });\n      if (error) throw error;\n      alert('Profile updated successfully!');\n    } catch (error) {\n      console.error('Error updating profile:', error.message);\n      alert('Error updating profile. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleToggleFavorite = async (listingId) => {\n    if (!userId) {\n      alert(\"Please log in to add favorites.\");\n      return;\n    }\n    const isFavorite = favorites.includes(listingId);\n    setLoading(true);\n    try {\n      if (isFavorite) {\n        const { error } = await supabase\n          .from('favorites')\n          .delete()\n          .eq('user_id', userId)\n          .eq('listing_id', listingId);\n        if (error) throw error;\n        const { error: noteError } = await supabase\n          .from('private_notes')\n          .delete()\n          .eq('user_id', userId)\n          .eq('listing_id', listingId);\n        if (noteError) console.error(\"Error deleting private note:\", noteError);\n        setFavorites(favorites.filter(id => id !== listingId));\n      } else {\n        const { error } = await supabase\n          .from('favorites')\n          .insert([{ user_id: userId, listing_id: listingId }]);\n        if (error) throw error;\n        setFavorites([...favorites, listingId]);\n      }\n    } catch (error) {\n      console.error('Error toggling favorite:', error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleOpenChat = (listing) => {\n    if (!isLoggedIn) {\n      alert(\"Please log in to chat with a broker.\");\n      return;\n    }\n    setListingForChat(listing);\n    setShowChatModal(true);\n  };\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!newChatMessage.trim() || !userId || !listingForChat) return;\n    try {\n      const { error } = await supabase\n        .from('messages')\n        .insert({\n          listing_id: listingForChat.id,\n          user_id: userId,\n          content: newChatMessage,\n        });\n      if (error) {\n        throw error;\n      }\n      setNewChatMessage('');\n    } catch (error) {\n      console.error('Error sending message:', error.message);\n    }\n  };\n  const scrollToBottom = () => {\n    if (chatMessagesEndRef.current) {\n      chatMessagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  };\n  const handleShareListing = async (listing) => {\n    const listingUrl = `${window.location.origin}?listingId=${listing.id}`;\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      try {\n        await navigator.clipboard.writeText(listingUrl);\n        alert('Listing link copied to clipboard!');\n      } catch (err) {\n        console.error('Failed to copy text:', err);\n        alert('Failed to copy link. Please try again.');\n      }\n    } else {\n      const textarea = document.createElement('textarea');\n      textarea.value = listingUrl;\n      document.body.appendChild(textarea);\n      textarea.select();\n      try {\n        document.execCommand('copy');\n        alert('Listing link copied to clipboard!');\n      } catch (err) {\n        console.error('Fallback: Failed to copy text:', err);\n        alert('Failed to copy link. Please copy it manually from the URL bar.');\n      }\n      document.body.removeChild(textarea);\n    }\n  };\n  const handleNextImage = (listingId, imageUrls) => {\n    setCurrentImageIndex(prev => {\n      const currentIndex = prev[listingId] || 0;\n      const nextIndex = (currentIndex + 1) % imageUrls.length;\n      return { ...prev, [listingId]: nextIndex };\n    });\n  };\n  const handlePrevImage = (listingId, imageUrls) => {\n    setCurrentImageIndex(prev => {\n      const currentIndex = prev[listingId] || 0;\n      const prevIndex = (currentIndex - 1 + imageUrls.length) % imageUrls.length;\n      return { ...prev, [listingId]: prevIndex };\n    });\n  };\n  const handleRegistration = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const form = e.target;\n    const email = form.email.value;\n    const password = form.password.value;\n    const name = form.name.value;\n    try {\n      const { data: authData, error } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: { name }\n        }\n      });\n      if (error) throw error;\n      if (authData.user) {\n        const { error: profileError } = await supabase\n          .from('profiles')\n          .insert([\n            { \n              id: authData.user.id, \n              email: authData.user.email,\n              name: name,\n              role: 'user'\n            }\n          ]);\n        if (profileError) throw profileError;\n      }\n      alert('Registration successful! Please check your email to confirm your account.');\n      setShowRegistrationModal(false);\n      setShowLoginModal(true);\n    } catch (error) {\n      alert(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const form = e.target;\n    const { error } = await supabase.auth.signInWithPassword({\n      email: form.email.value,\n      password: form.password.value,\n    });\n    setLoading(false);\n    if (error) {\n      alert(error.message);\n    } else {\n      setShowLoginModal(false);\n    }\n  };\n  const handleForgotPassword = async () => {\n    const email = prompt('Please enter your email address to reset your password:');\n    if (email) {\n      try {\n        const { error } = await supabase.auth.resetPasswordForEmail(email, {\n          redirectTo: `${window.location.origin}/reset-password`,\n        });\n        if (error) throw error;\n        alert('Password reset email sent. Please check your inbox.');\n      } catch (error) {\n        console.error('Error sending password reset email:', error.message);\n        alert('Error sending password reset email. Please try again.');\n      }\n    }\n  };\n  const handleLogout = async () => {\n    try {\n      const { error } = await supabase.auth.signOut();\n      if (error) throw error;\n      setSession(null);\n      setFavorites([]);\n    } catch (error) {\n      console.error('Error signing out:', error.message);\n      alert('Error signing out. Please try again.');\n    }\n  };\n  const handleOpenNotesModal = async (listing) => {\n    setCurrentListing(listing);\n    setLoading(true);\n    try {\n      const result = await supabase\n        .from('private_notes')\n        .select('note_content')\n        .eq('user_id', userId)\n        .eq('listing_id', listing.id)\n        .single();\n      if (result.error && result.error.code !== 'PGRST116') throw result.error;\n      setCurrentNote(result.data?.note_content || '');\n      setShowNotesModal(true);\n    } catch (error) {\n      console.error('Error fetching private note:', error.message);\n      setCurrentNote('');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSaveNote = async () => {\n    if (!currentListing || !userId) return;\n    setLoading(true);\n    try {\n      const noteData = {\n        user_id: userId,\n        listing_id: currentListing.id,\n        note_content: currentNote,\n      };\n      const { data: existingNote, error: fetchError } = await supabase\n        .from('private_notes')\n        .select('id')\n        .eq('user_id', userId)\n        .eq('listing_id', currentListing.id)\n        .single();\n      if (fetchError && fetchError.code !== 'PGRST116') throw fetchError;\n      if (existingNote) {\n        const { error: updateError } = await supabase\n          .from('private_notes')\n          .update(noteData)\n          .eq('id', existingNote.id);\n        if (updateError) throw updateError;\n      } else {\n        const { error: insertError } = await supabase\n          .from('private_notes')\n          .insert(noteData);\n        if (insertError) throw insertError;\n      }\n      setShowNotesModal(false);\n      alert('Note saved successfully!');\n    } catch (error) {\n      console.error('Error saving note:', error.message);\n      alert('Failed to save note.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const selectedListing = selectedListingId ? listings.find(l => l.id === selectedListingId) : null;\n  const renderMapAndListings = () => {\n    if (loadError) return <div className=\"text-red-500 text-center font-semibold p-8\">Error loading maps</div>;\n    if (!isLoaded) return <div className=\"text-gray-500 text-center font-semibold p-8\">Loading Map...</div>;\n    return (\n      <div className=\"grid grid-cols-1 lg:grid-cols-[1fr_2fr] gap-8\">\n        <div className=\"h-[60vh] lg:h-[80vh] sticky top-28 rounded-2xl overflow-hidden shadow-lg border border-gray-200\">\n          <GoogleMap\n            mapContainerStyle={{ width: '100%', height: '100%' }}\n            center={mapCenter}\n            zoom={10}\n            options={{\n              disableDefaultUI: true,\n              zoomControl: true,\n            }}\n          >\n            {listings.map((listing) => (\n              <MarkerF\n                key={listing.id}\n                position={{ lat: listing.latitude, lng: listing.longitude }}\n                onClick={() => handleSelectListing(listing.id)}\n              />\n            ))}\n          </GoogleMap>\n        </div>\n        <div>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6\">\n            {loading ? (\n              <div className=\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\">\n                <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"></div>\n                <p>Loading listings...</p>\n              </div>\n            ) : listings.length > 0 ? (\n              listings.map(listing => (\n                <div\n                  key={listing.id}\n                  onClick={() => handleSelectListing(listing.id)}\n                  className=\"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-300 cursor-pointer\"\n                >\n                  {listing.image_urls && listing.image_urls.length > 0 ? (\n                    <div className=\"relative h-48 overflow-hidden\">\n                      <img\n                        src={listing.image_urls[currentImageIndex[listing.id] || 0]}\n                        alt={`Listing at ${listing.address}`}\n                        className=\"w-full h-full object-cover\"\n                      />\n                      <div className=\"absolute top-3 right-3 flex space-x-2\">\n                        {isLoggedIn && (\n                          <button \n                            type=\"button\"\n                            onClick={(e) => { e.stopPropagation(); handleToggleFavorite(listing.id); }}\n                            className={`w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm ${\n                              favorites.includes(listing.id) \n                                ? 'bg-red-500 text-white' \n                                : 'bg-white/80 text-gray-700'\n                            }`}\n                          >\n                            <i className={`fas ${favorites.includes(listing.id) ? 'fa-heart' : 'fa-heart'} text-lg`}></i>\n                          </button>\n                        )}\n                      </div>\n                      {listing.image_urls.length > 1 && (\n                        <div className=\"absolute bottom-3 left-1/2 transform -translate-x-1/2 flex space-x-1\">\n                          {listing.image_urls.map((_, index) => (\n                            <span\n                              key={index}\n                              className={`block w-2 h-2 rounded-full transition-colors ${\n                                index === currentImageIndex[listing.id] ? 'bg-white' : 'bg-white/50'\n                              }`}\n                            ></span>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500\">\n                      <div className=\"text-center\">\n                        <i className=\"fas fa-home text-4xl mb-2\"></i>\n                        <p>No Image Available</p>\n                      </div>\n                    </div>\n                  )}\n                  <div className=\"p-5\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div>\n                        <h2 className=\"text-lg font-bold text-gray-900 mb-1\">{listing.address}</h2>\n                        <p className=\"text-gray-600 text-sm\">{listing.city}</p>\n                      </div>\n                      <div className=\"text-xl font-bold text-blue-600 mb-3\">\n                        ${new Intl.NumberFormat().format(listing.price)}\n                      </div>\n                    </div>\n                    <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">{listing.description}</p>\n                    <div className=\"flex flex-wrap gap-2 mt-4\">\n                      {isLoggedIn && currentView === 'public' && (\n                        <>\n                          {listing.owner_id === userId ? (\n                            <>\n                              <button className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\">\n                                <i className=\"fas fa-edit mr-1\"></i> Edit\n                              </button>\n                              <button className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\">\n                                <i className=\"fas fa-trash mr-1\"></i> Delete\n                              </button>\n                            </>\n                          ) : (\n                            <button \n                              type=\"button\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleToggleFavorite(listing.id);\n                              }}\n                              className={`flex-1 text-center px-3 py-2 font-medium rounded-lg transition-colors text-sm ${\n                                favorites.includes(listing.id) \n                                  ? 'bg-red-100 text-red-600 hover:bg-red-200' \n                                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                              }`}\n                            >\n                              <i className={`fas ${favorites.includes(listing.id) ? 'fa-heart' : 'fa-heart'} mr-1`}></i>\n                              {favorites.includes(listing.id) ? 'Saved' : 'Save'}\n                            </button>\n                          )}\n                          <button \n                            type=\"button\"\n                            onClick={(e) => { e.stopPropagation(); handleOpenChat(listing); }}\n                            className=\"flex-1 text-center px-3 py-2 bg-blue-100 text-blue-600 font-medium rounded-lg hover:bg-blue-200 transition-colors text-sm\"\n                          >\n                            <i className=\"fas fa-comment mr-1\"></i> Chat\n                          </button>\n                        </>\n                      )}\n                      <button \n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setListingForReview(listing);\n                          setShowReviewModal(true);\n                        }}\n                        className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\"\n                      >\n                        <i className=\"fas fa-star mr-1\"></i> Reviews\n                      </button>\n                      <button \n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleShareListing(listing);\n                        }}\n                        className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\"\n                      >\n                        <i className=\"fas fa-share-alt mr-1\"></i> Share\n                      </button>\n                      {currentView === 'favorites' && (\n                        <button\n                          type=\"button\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleOpenNotesModal(listing);\n                          }}\n                          className=\"flex-1 text-center px-3 py-2 bg-purple-100 text-purple-700 font-medium rounded-lg hover:bg-purple-200 transition-colors text-sm\"\n                        >\n                          <i className=\"fas fa-sticky-note mr-1\"></i> Note\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div className=\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\">\n                <i className=\"fas fa-home text-4xl mb-4 text-gray-300\"></i>\n                <p>No listings found.</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  };\n  const renderDynamicForm = (isEdit = false) => {\n    const currentListingDetails = isEdit && currentListing ? currentListing.details : formDetails.details;\n    const currentType = isEdit && currentListing ? currentListing.type : listingType;\n    let dynamicFields = null;\n    switch (currentType) {\n      case 'house':\n        dynamicFields = (\n          <>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Bedrooms</label>\n              <input type=\"number\" name=\"bedrooms\" placeholder=\"Number of bedrooms\" required min=\"0\" defaultValue={currentListingDetails?.bedrooms} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, bedrooms: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Bathrooms</label>\n              <input type=\"number\" name=\"bathrooms\" placeholder=\"Number of bathrooms\" required min=\"0\" defaultValue={currentListingDetails?.bathrooms} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, bathrooms: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Square Feet</label>\n              <input type=\"number\" name=\"sqft\" placeholder=\"Square footage\" required min=\"0\" defaultValue={currentListingDetails?.sqft} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, sqft: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n          </>\n        );\n        break;\n      case 'car':\n        dynamicFields = (\n          <>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Make</label>\n              <input type=\"text\" name=\"make\" placeholder=\"Car make\" required defaultValue={currentListingDetails?.make} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, make: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Model</label>\n              <input type=\"text\" name=\"model\" placeholder=\"Car model\" required defaultValue={currentListingDetails?.model} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, model: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Year</label>\n              <input type=\"number\" name=\"year\" placeholder=\"Year\" required defaultValue={currentListingDetails?.year} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, year: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Mileage</label>\n              <input type=\"number\" name=\"mileage\" placeholder=\"Mileage\" required defaultValue={currentListingDetails?.mileage} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, mileage: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n          </>\n        );\n        break;\n      case 'land':\n        dynamicFields = (\n          <>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Acres</label>\n              <input type=\"number\" step=\"any\" name=\"acres\" placeholder=\"Number of acres\" required defaultValue={currentListingDetails?.acres} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, acres: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 font-medium mb-2\">Zoning</label>\n              <input type=\"text\" name=\"zoning\" placeholder=\"Zoning type\" required defaultValue={currentListingDetails?.zoning} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, zoning: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n            </div>\n          </>\n        );\n        break;\n    case 'clothing':\n      dynamicFields = (\n        <>\n          <div>\n            <label className=\"block text-gray-700 font-medium mb-2\">Brand</label>\n            <input type=\"text\" name=\"brand\" placeholder=\"Brand name\" defaultValue={currentListingDetails?.brand} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, brand: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n          </div>\n          <div>\n            <label className=\"block text-gray-700 font-medium mb-2\">Category</label>\n            <select name=\"category\" defaultValue={currentListingDetails?.category} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, category: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\">\n              <option value=\"\">Select category</option>\n              <option value=\"shirts\">Shirts</option>\n              <option value=\"pants\">Pants</option>\n              <option value=\"dresses\">Dresses</option>\n              <option value=\"shoes\">Shoes</option>\n              <option value=\"accessories\">Accessories</option>\n              <option value=\"outerwear\">Outerwear</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-gray-700 font-medium mb-2\">Size</label>\n            <input type=\"text\" name=\"size\" placeholder=\"Size (e.g., S, M, L, XL)\" defaultValue={currentListingDetails?.size} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, size: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n          </div>\n          <div>\n            <label className=\"block text-gray-700 font-medium mb-2\">Color</label>\n            <input type=\"text\" name=\"color\" placeholder=\"Color\" defaultValue={currentListingDetails?.color} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, color: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n          </div>\n        </>\n      );\n      break;\n    default:\n      dynamicFields = null;\n  }\n  return dynamicFields;\n};\n  return (\n    <Router>\n      <div className=\"bg-gray-50 min-h-screen\">\n        <Header \n          currentView={currentView}\n          setCurrentView={setCurrentView}\n          isLoggedIn={isLoggedIn}\n          session={session}\n          showProfileModal={showProfileModal}\n          setShowProfileModal={setShowProfileModal}\n          profileForm={profileForm}\n          setProfileForm={setProfileForm}\n          handleProfileChange={handleProfileChange}\n          handleLogout={handleLogout}\n          setShowLoginModal={setShowLoginModal}\n          setShowRegistrationModal={setShowRegistrationModal}\n        />\n        <Routes>\n          <Route path=\"/\" element={\n            <HomePage \n              setCurrentView={setCurrentView}\n              isLoggedIn={isLoggedIn}\n              setShowAddForm={setShowAddForm}\n            />\n          } />\n          <Route path=\"/apartments\" element={\n            <CategoryListingsPage \n              category=\"apartments\"\n              title=\"Apartment Listings\"\n              colorClass=\"from-blue-600 to-indigo-700\"\n              listings={listings}\n              loading={loading}\n              currentImageIndex={currentImageIndex}\n              handleSelectListing={handleSelectListing}\n              handleToggleFavorite={handleToggleFavorite}\n              favorites={favorites}\n              isLoggedIn={isLoggedIn}\n              handleOpenChat={handleOpenChat}\n              setListingForReview={setListingForReview}\n              setShowReviewModal={setShowReviewModal}\n              handleShareListing={handleShareListing}\n              handleOpenNotesModal={handleOpenNotesModal}\n              currentView={currentView}\n              userId={userId}\n            />\n          } />\n          <Route path=\"/cars\" element={\n            <CategoryListingsPage \n              category=\"cars\"\n              title=\"Car Listings\"\n              colorClass=\"from-green-600 to-emerald-700\"\n              listings={listings}\n              loading={loading}\n              currentImageIndex={currentImageIndex}\n              handleSelectListing={handleSelectListing}\n              handleToggleFavorite={handleToggleFavorite}\n              favorites={favorites}\n              isLoggedIn={isLoggedIn}\n              handleOpenChat={handleOpenChat}\n              setListingForReview={setListingForReview}\n              setShowReviewModal={setShowReviewModal}\n              handleShareListing={handleShareListing}\n              handleOpenNotesModal={handleOpenNotesModal}\n              currentView={currentView}\n              userId={userId}\n            />\n          } />\n          <Route path=\"/land\" element={\n            <CategoryListingsPage \n              category=\"land\"\n              title=\"Land Listings\"\n              colorClass=\"from-yellow-600 to-orange-700\"\n              listings={listings}\n              loading={loading}\n              currentImageIndex={currentImageIndex}\n              handleSelectListing={handleSelectListing}\n              handleToggleFavorite={handleToggleFavorite}\n              favorites={favorites}\n              isLoggedIn={isLoggedIn}\n              handleOpenChat={handleOpenChat}\n              setListingForReview={setListingForReview}\n              setShowReviewModal={setShowReviewModal}\n              handleShareListing={handleShareListing}\n              handleOpenNotesModal={handleOpenNotesModal}\n              currentView={currentView}\n              userId={userId}\n            />\n          } />\n          <Route path=\"/clothing\" element={\n    <CategoryListingsPage \n      category=\"clothing\"\n      title=\"Clothing Listings\"\n      colorClass=\"from-purple-600 to-indigo-700\"\n      listings={listings}\n      loading={loading}\n      currentImageIndex={currentImageIndex}\n      handleSelectListing={handleSelectListing}\n      handleToggleFavorite={handleToggleFavorite}\n      favorites={favorites}\n      isLoggedIn={isLoggedIn}\n      handleOpenChat={handleOpenChat}\n      setListingForReview={setListingForReview}\n      setShowReviewModal={setShowReviewModal}\n      handleShareListing={handleShareListing}\n      handleOpenNotesModal={handleOpenNotesModal}\n      currentView={currentView}\n      userId={userId}\n    />\n          }/>\n\n          <Route path=\"/listing/:id\" element={\n            <ListingDetailPage \n              selectedListing={selectedListing}\n              currentImageIndex={currentImageIndex}\n              handlePrevImage={handlePrevImage}\n              handleNextImage={handleNextImage}\n              renderStars={renderStars}\n              getAverageRating={getAverageRating}\n              isLoggedIn={isLoggedIn}\n              favorites={favorites}\n              handleToggleFavorite={handleToggleFavorite}\n              setListingForReview={setListingForReview}\n              setShowReviewModal={setShowReviewModal}\n              setCurrentListing={setCurrentListing}\n              setUploadedImage={setUploadedImage}\n              setShowEditModal={setShowEditModal}\n              handleOpenChat={handleOpenChat}\n              userId={userId}\n            />\n          } />\n          <Route path=\"*\" element={\n            currentView === 'public' ? (\n              <div className=\"max-w-7xl mx-auto px-6 py-8\">\n                {renderMapAndListings()}\n              </div>\n            ) : selectedListing ? (\n              <ListingDetailPage \n                selectedListing={selectedListing}\n                currentImageIndex={currentImageIndex}\n                handlePrevImage={handlePrevImage}\n                handleNextImage={handleNextImage}\n                renderStars={renderStars}\n                getAverageRating={getAverageRating}\n                isLoggedIn={isLoggedIn}\n                favorites={favorites}\n                handleToggleFavorite={handleToggleFavorite}\n                setListingForReview={setListingForReview}\n                setShowReviewModal={setShowReviewModal}\n                setCurrentListing={setCurrentListing}\n                setUploadedImage={setUploadedImage}\n                setShowEditModal={setShowEditModal}\n                handleOpenChat={handleOpenChat}\n                userId={userId}\n              />\n            ) : (\n              <div className=\"text-center py-12\">\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Page Not Found</h2>\n                <button \n                  type=\"button\"\n                  onClick={() => setCurrentView('public')}\n                  className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  Go to Home\n                </button>\n              </div>\n            )\n          } />\n        </Routes>\n        {/* Add Listing Modal */}\n        {showAddForm && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-white\">Add New Listing</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowAddForm(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                <div className=\"mb-6\">\n                  <label className=\"block text-gray-700 font-medium mb-2\">Listing Type</label>\n                  <select\n                    value={listingType}\n                    onChange={(e) => {\n                      setListingType(e.target.value);\n                      setFormDetails({});\n                    }}\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"house\">House</option>\n                    <option value=\"car\">Car</option>\n                    <option value=\"land\">Land</option>\n                    <option value=\"clothing\">Clothing</option>\n\n                  </select>\n                </div>\n                <form onSubmit={handleAddListing} className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Address</label>\n                      <input \n                        type=\"text\" \n                        name=\"address\" \n                        placeholder=\"Street address\" \n                        required \n                        value={formDetails.address || ''} \n                        onChange={(e) => setFormDetails({ ...formDetails, address: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">City</label>\n                      <input \n                        type=\"text\" \n                        name=\"city\" \n                        placeholder=\"City\" \n                        required \n                        value={formDetails.city || ''} \n                        onChange={(e) => setFormDetails({ ...formDetails, city: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Price</label>\n                      <input \n                        type=\"number\" \n                        name=\"price\" \n                        placeholder=\"Price\" \n                        required \n                        min=\"0\" \n                        value={formDetails.price || ''} \n                        onChange={(e) => setFormDetails({ ...formDetails, price: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Latitude</label>\n                      <input \n                        type=\"number\" \n                        step=\"any\" \n                        name=\"latitude\" \n                        placeholder=\"Latitude\" \n                        required \n                        value={formDetails.latitude || ''} \n                        onChange={(e) => setFormDetails({ ...formDetails, latitude: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Longitude</label>\n                      <input \n                        type=\"number\" \n                        step=\"any\" \n                        name=\"longitude\" \n                        placeholder=\"Longitude\" \n                        required \n                        value={formDetails.longitude || ''} \n                        onChange={(e) => setFormDetails({ ...formDetails, longitude: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Description</label>\n                    <textarea \n                      name=\"description\" \n                      placeholder=\"Description\" \n                      required \n                      value={formDetails.description || ''} \n                      onChange={(e) => setFormDetails({ ...formDetails, description: e.target.value })} \n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      rows=\"3\"\n                    ></textarea>\n                  </div>\n                  {renderDynamicForm()}\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Upload Image (optional)</label>\n                    <input \n                      type=\"file\" \n                      accept=\"image/*\" \n                      onChange={handleImageUpload} \n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                    />\n                  </div>\n                  <div className=\"flex justify-end space-x-4 pt-4\">\n                    <button \n                      type=\"button\" \n                      onClick={() => setShowAddForm(false)} \n                      className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\n                    >\n                      Cancel\n                    </button>\n                    <button \n                      type=\"submit\" \n                      disabled={loading || isGeneratingImage}\n                      className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\n                    >\n                      {loading || isGeneratingImage ? 'Processing...' : 'Add Listing'}\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Edit Listing Modal */}\n        {showEditModal && currentListing && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-white\">Edit Listing</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowEditModal(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                <form onSubmit={handleUpdateListing} className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Address</label>\n                      <input \n                        type=\"text\" \n                        name=\"address\" \n                        placeholder=\"Address\" \n                        required \n                        defaultValue={currentListing.address} \n                        onChange={(e) => setFormDetails({ ...formDetails, address: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">City</label>\n                      <input \n                        type=\"text\" \n                        name=\"city\" \n                        placeholder=\"City\" \n                        required \n                        defaultValue={currentListing.city} \n                        onChange={(e) => setFormDetails({ ...formDetails, city: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Price</label>\n                      <input \n                        type=\"number\" \n                        name=\"price\" \n                        placeholder=\"Price\" \n                        required \n                        min=\"0\" \n                        defaultValue={currentListing.price} \n                        onChange={(e) => setFormDetails({ ...formDetails, price: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Latitude</label>\n                      <input \n                        type=\"number\" \n                        step=\"any\" \n                        name=\"latitude\" \n                        placeholder=\"Latitude\" \n                        required \n                        defaultValue={currentListing.latitude} \n                        onChange={(e) => setFormDetails({ ...formDetails, latitude: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Longitude</label>\n                      <input \n                        type=\"number\" \n                        step=\"any\" \n                        name=\"longitude\" \n                        placeholder=\"Longitude\" \n                        required \n                        defaultValue={currentListing.longitude} \n                        onChange={(e) => setFormDetails({ ...formDetails, longitude: e.target.value })} \n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Description</label>\n                    <textarea \n                      name=\"description\" \n                      placeholder=\"Description\" \n                      required \n                      defaultValue={currentListing.description} \n                      onChange={(e) => setFormDetails({ ...formDetails, description: e.target.value })} \n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                      rows=\"3\"\n                    ></textarea>\n                  </div>\n                  {renderDynamicForm(true)}\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Upload New Image (optional)</label>\n                    <input \n                      type=\"file\" \n                      accept=\"image/*\" \n                      onChange={handleImageUpload} \n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                    />\n                  </div>\n                  <div className=\"flex justify-end space-x-4 pt-4\">\n                    <button \n                      type=\"button\" \n                      onClick={() => setShowEditModal(false)} \n                      className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\n                    >\n                      Cancel\n                    </button>\n                    <button \n                      type=\"submit\" \n                      disabled={loading}\n                      className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\n                    >\n                      {loading ? 'Updating...' : 'Update Listing'}\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Confirm Delete Modal */}\n        {showConfirmDeleteModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8\">\n              <div className=\"text-center\">\n                <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4\">\n                  <i className=\"fas fa-exclamation-triangle text-red-600 text-2xl\"></i>\n                </div>\n                <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Confirm Deletion</h3>\n                <p className=\"text-gray-600 mb-6\">Are you sure you want to delete this listing? This action cannot be undone.</p>\n                <div className=\"flex justify-center space-x-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowConfirmDeleteModal(false);\n                      setListingToDelete(null);\n                    }}\n                    className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleDeleteListing(listingToDelete)} \n                    className=\"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Review Modal */}\n        {showReviewModal && listingForReview && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-white\">Reviews for {listingForReview.address}</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowReviewModal(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                {listingForReview.reviews.length > 0 ? (\n                  <div className=\"space-y-4 max-h-96 overflow-y-auto pr-2\">\n                    {listingForReview.reviews.map((review, index) => (\n                      <div key={index} className=\"bg-gray-50 p-4 rounded-xl border border-gray-200\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <div className=\"flex items-center space-x-2\">\n                            {renderStars(review.rating)}\n                            <span className=\"text-sm font-medium text-gray-700\">\n                              {review.rating === 5 ? 'Excellent' : \n                               review.rating === 4 ? 'Good' : \n                               review.rating === 3 ? 'Average' : \n                               review.rating === 2 ? 'Poor' : 'Terrible'}\n                            </span>\n                          </div>\n                          <span className=\"text-xs text-gray-500\">\n                            {new Date(review.created_at).toLocaleDateString()}\n                          </span>\n                        </div>\n                        <p className=\"text-gray-700\">{review.review_text}</p>\n                        <div className=\"mt-2 text-xs text-gray-500\">\n                          by User {review.reviewer_id.substring(0, 8)}...\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-8\">\n                    <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 mb-4\">\n                      <i className=\"fas fa-star text-gray-400 text-2xl\"></i>\n                    </div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Reviews Yet</h3>\n                    <p className=\"text-gray-600 mb-6\">Be the first to share your experience with this property.</p>\n                  </div>\n                )}\n                <div className=\"mt-6 flex justify-center\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowReviewModal(false);\n                      setShowAddReviewModal(true);\n                    }}\n                    className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center\"\n                  >\n                    <i className=\"fas fa-plus mr-2\"></i>\n                    Add Your Review\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Add Review Modal */}\n        {showAddReviewModal && listingForReview && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-white\">Add Review</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowAddReviewModal(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                <form onSubmit={handleAddReview} className=\"space-y-6\">\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Rating</label>\n                    <div className=\"flex items-center space-x-2\">\n                      {[1, 2, 3, 4, 5].map(num => (\n                        <label key={num} className=\"flex flex-col items-center\">\n                          <input \n                            type=\"radio\" \n                            name=\"rating\" \n                            value={num} \n                            required \n                            className=\"sr-only\" \n                          />\n                          <div className=\"w-10 h-10 rounded-full border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500\">\n                            <span className=\"text-lg font-medium\">{num}</span>\n                          </div>\n                          <span className=\"text-xs text-gray-500 mt-1\">\n                            {num === 1 ? 'Poor' : \n                             num === 2 ? 'Fair' : \n                             num === 3 ? 'Good' : \n                             num === 4 ? 'Very Good' : 'Excellent'}\n                          </span>\n                        </label>\n                      ))}\n                    </div>\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Your Review</label>\n                    <textarea \n                      name=\"reviewText\" \n                      placeholder=\"Share your experience with this property...\" \n                      rows=\"4\" \n                      required \n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    ></textarea>\n                  </div>\n                  <div className=\"flex justify-end space-x-4\">\n                    <button \n                      type=\"button\" \n                      onClick={() => setShowAddReviewModal(false)} \n                      className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\n                    >\n                      Cancel\n                    </button>\n                    <button \n                      type=\"submit\" \n                      className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n                    >\n                      Submit Review\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Notes Modal */}\n        {showNotesModal && currentListing && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\n              <div className=\"bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-white\">Personal Note</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowNotesModal(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">{currentListing.address}</h3>\n                <p className=\"text-gray-600 mb-6\">{currentListing.city}</p>\n                <div className=\"mb-6\">\n                  <label className=\"block text-gray-700 font-medium mb-2\">Your Note</label>\n                  <textarea\n                    value={currentNote}\n                    onChange={(e) => setCurrentNote(e.target.value)}\n                    placeholder=\"Write your private notes here...\"\n                    rows=\"6\"\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                  ></textarea>\n                </div>\n                <div className=\"flex justify-end space-x-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowNotesModal(false);\n                      setCurrentNote('');\n                    }}\n                    className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={handleSaveNote}\n                    className=\"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors\"\n                  >\n                    Save Note\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Chat Modal */}\n        {showChatModal && listingForChat && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md flex flex-col h-full max-h-[80vh]\">\n              <div className=\"bg-gradient-to-r from-green-600 to-teal-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-xl font-bold text-white\">Chat for {listingForChat.address}</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowChatModal(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"flex-grow overflow-y-auto p-4 bg-gray-50\">\n                {chatMessages.length > 0 ? (\n                  <div className=\"space-y-4\">\n                    {chatMessages.map((message) => (\n                      <div\n                        key={message.id}\n                        className={`flex ${message.user_id === userId ? 'justify-end' : 'justify-start'}`}\n                      >\n                        <div\n                          className={`max-w-[80%] p-4 rounded-2xl ${\n                            message.user_id === userId\n                              ? 'bg-green-500 text-white rounded-tr-none'\n                              : 'bg-white border border-gray-200 rounded-tl-none'\n                          }`}\n                        >\n                          <p className=\"break-words\">{message.content}</p>\n                          <p className={`text-xs mt-1 ${\n                            message.user_id === userId ? 'text-green-100' : 'text-gray-500'\n                          }`}>\n                            {new Date(message.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                    <div ref={chatMessagesEndRef} />\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-center h-full\">\n                    <div className=\"text-center\">\n                      <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-200 mb-4\">\n                        <i className=\"fas fa-comments text-gray-500 text-2xl\"></i>\n                      </div>\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Messages Yet</h3>\n                      <p className=\"text-gray-600\">Start the conversation with the broker.</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n              <div className=\"p-4 border-t border-gray-200\">\n                <form onSubmit={handleSendMessage} className=\"flex space-x-2\">\n                  <input\n                    type=\"text\"\n                    value={newChatMessage}\n                    onChange={(e) => setNewChatMessage(e.target.value)}\n                    placeholder=\"Type a message...\"\n                    className=\"flex-grow p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500\"\n                  />\n                  <button\n                    type=\"submit\"\n                    className=\"px-4 py-3 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors\"\n                  >\n                    <i className=\"fas fa-paper-plane\"></i>\n                  </button>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Registration Modal */}\n        {showRegistrationModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\n              <div className=\"bg-gradient-to-r from-green-600 to-emerald-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-white\">Create Account</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowRegistrationModal(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                <form onSubmit={handleRegistration} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Full Name</label>\n                    <input \n                      type=\"text\" \n                      name=\"name\" \n                      placeholder=\"Your full name\" \n                      required \n                      value={profileForm.name}\n                      onChange={handleProfileChange}\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\" \n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Email Address</label>\n                    <input \n                      type=\"email\" \n                      name=\"email\" \n                      placeholder=\"Your email address\" \n                      required \n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\" \n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Password</label>\n                    <input \n                      type=\"password\" \n                      name=\"password\" \n                      placeholder=\"Create a password\" \n                      required \n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\" \n                    />\n                  </div>\n                  <div className=\"pt-2\">\n                    <button \n                      type=\"submit\" \n                      className=\"w-full px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\"\n                    >\n                      Create Account\n                    </button>\n                  </div>\n                </form>\n                <p className=\"mt-6 text-center text-gray-600\">\n                  Already have an account?{' '}\n                  <button \n                    type=\"button\"\n                    onClick={() => { \n                      setShowRegistrationModal(false); \n                      setShowLoginModal(true); \n                    }} \n                    className=\"text-green-600 hover:text-green-700 font-medium\"\n                  >\n                    Sign in\n                  </button>\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Login Modal */}\n        {showLoginModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-white\">Welcome Back</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowLoginModal(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                <form onSubmit={handleLogin} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Email Address</label>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder=\"Enter your email\"\n                      required\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Enter your password\"\n                      required\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <button\n                      type=\"button\"\n                      onClick={handleForgotPassword}\n                      className=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\n                    >\n                      Forgot your password?\n                    </button>\n                  </div>\n                  <div className=\"pt-2\">\n                    <button\n                      type=\"submit\"\n                      disabled={loading}\n                      className=\"w-full px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\n                    >\n                      {loading ? 'Logging in...' : 'Sign In'}\n                    </button>\n                  </div>\n                </form>\n                <p className=\"mt-6 text-center text-gray-600\">\n                  Don't have an account?{' '}\n                  <button \n                    type=\"button\"\n                    onClick={() => { \n                      setShowLoginModal(false); \n                      setShowRegistrationModal(true); \n                    }} \n                    className=\"text-blue-600 hover:text-blue-700 font-medium\"\n                  >\n                    Sign up\n                  </button>\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Profile Update Modal */}\n        {showProfileModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-white\">Update Profile</h2>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowProfileModal(false)} \n                    className=\"text-white hover:text-gray-200 transition-colors\"\n                  >\n                    <i className=\"fas fa-times text-xl\"></i>\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                <form onSubmit={handleUpdateProfile} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-gray-700 font-medium mb-2\">Name</label>\n                    <input \n                      type=\"text\" \n                      name=\"name\" \n                      value={profileForm.name}\n                      onChange={handleProfileChange}\n                      placeholder=\"Your name\" \n                      required \n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \n                    />\n                  </div>\n                  <div className=\"flex justify-end space-x-4 pt-4\">\n                    <button \n                      type=\"button\" \n                      onClick={() => setShowProfileModal(false)} \n                      className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\n                    >\n                      Cancel\n                    </button>\n                    <button \n                      type=\"submit\" \n                      disabled={loading}\n                      className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\n                    >\n                      {loading ? 'Updating...' : 'Update Profile'}\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </Router>\n  );\n};\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}