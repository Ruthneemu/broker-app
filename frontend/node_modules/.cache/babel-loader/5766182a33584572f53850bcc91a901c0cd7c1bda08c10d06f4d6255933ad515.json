{"ast":null,"code":"import _objectSpread from\"C:/Users/HJJJJJJJJJJJJJJJJJJJ/broker/broker-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useMemo,useCallback}from'react';import{BrowserRouter as Router,Routes,Route,useNavigate}from'react-router-dom';import{GoogleMap,useLoadScript,MarkerF}from'@react-google-maps/api';import'./index.css';import{createClient}from'@supabase/supabase-js';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const supabaseUrl='https://ouscjkmgdsnzakairivo.supabase.co';const supabaseAnonKey='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91c2Nqa21nZHNuemFrYWlyaXZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MzY0MzYsImV4cCI6MjA3MTUxMjQzNn0.ii49ymR7Bi7WZTYOkYnE1-kJIlZ7DV5xR_tM3kbX-MU';const supabase=createClient(supabaseUrl,supabaseAnonKey);// Header Component\nconst Header=_ref=>{let{currentView,setCurrentView,isLoggedIn,session,showProfileModal,setShowProfileModal,profileForm,setProfileForm,handleProfileChange,handleLogout,setShowLoginModal,setShowRegistrationModal}=_ref;const[showDropdown,setShowDropdown]=useState(false);const navigate=useNavigate();const handleCategorySelect=category=>{setCurrentView(category);navigate(\"/\".concat(category));setShowDropdown(false);};return/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm sticky top-0 z-40 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-xl\",children:\"B\"})}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"Broker\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:\"Connect\"})]})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"hidden md:flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('public');navigate('/');},className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='public'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:\"Home\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowDropdown(!showDropdown),className:\"px-4 py-2 rounded-lg font-medium text-gray-600 hover:bg-gray-100 transition-colors flex items-center\",children:[\"Categories\",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-down ml-2 text-xs\"})]}),showDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleCategorySelect('apartments'),className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Apartments\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleCategorySelect('cars'),className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Cars\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleCategorySelect('land'),className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Land\"})]})]}),isLoggedIn&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setCurrentView('private'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='private'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:\"My Listings\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setCurrentView('favorites'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(currentView==='favorites'?'bg-blue-100 text-blue-700':'text-gray-600 hover:bg-gray-100'),children:\"Favorites\"})]}),isLoggedIn?/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium\",children:session.user.email.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:session.user.email.split('@')[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-50\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setProfileForm({name:session.user.user_metadata.name||''});setShowProfileModal(true);},className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Update Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleLogout,className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\",children:\"Logout\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowLoginModal(true),className:\"px-4 py-2 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowRegistrationModal(true),className:\"ml-2 px-4 py-2 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 transition-colors\",children:\"Register\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bars text-xl\"})})})]})})});};// Home Page Component\nconst HomePage=_ref2=>{let{setCurrentView,isLoggedIn,setShowAddForm}=_ref2;const navigate=useNavigate();return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 min-h-screen\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto px-6 py-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-16\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl font-bold text-gray-900 mb-6\",children:\"Welcome to BrokerConnect\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-600 max-w-3xl mx-auto\",children:\"Your ultimate marketplace for premium apartments, reliable cars, and valuable land. Discover your next great investment with ease, precision, and trust.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10 flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('apartments');navigate('/apartments');},className:\"px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition-colors\",children:\"Browse Apartments\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('cars');navigate('/cars');},className:\"px-8 py-3 bg-green-600 text-white font-semibold rounded-lg shadow hover:bg-green-700 transition-colors\",children:\"Browse Cars\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('land');navigate('/land');},className:\"px-8 py-3 bg-yellow-600 text-white font-semibold rounded-lg shadow hover:bg-yellow-700 transition-colors\",children:\"Browse Land\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-building text-blue-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Premium Apartments\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Discover luxury apartments in prime locations with top-notch amenities.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('apartments');navigate('/apartments');},className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\",children:\"View Apartments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg border border-green-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-car text-green-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Reliable Cars\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Find quality vehicles from trusted sellers with verified history reports.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('cars');navigate('/cars');},className:\"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\",children:\"View Cars\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-2xl shadow-lg border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tree text-yellow-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Valuable Land\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Invest in prime land parcels with great potential for development.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentView('land');navigate('/land');},className:\"px-6 py-3 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 transition-colors\",children:\"View Land\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-900 mb-6\",children:\"How It Works\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold\",children:\"1\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Browse Listings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Explore our extensive collection of properties, vehicles, and land.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold\",children:\"2\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Connect with Brokers\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Get in touch with professional brokers for expert guidance.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold\",children:\"3\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Make Your Investment\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Secure your next great investment with confidence and ease.\"})]})]})]})]})});};// Category Listings Page Component\nconst CategoryListingsPage=_ref3=>{let{category,title,colorClass,listings,loading,currentImageIndex,handleSelectListing,handleToggleFavorite,favorites,isLoggedIn,handleOpenChat,setListingForReview,setShowReviewModal,handleShareListing,handleOpenNotesModal,currentView}=_ref3;const navigate=useNavigate();const getCategoryIcon=()=>{switch(category){case'apartments':return'fas fa-building';case'cars':return'fas fa-car';case'land':return'fas fa-tree';default:return'fas fa-home';}};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 min-h-screen\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto px-6 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>navigate('/'),className:\"flex items-center text-blue-600 hover:text-blue-800 transition-colors mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Back to Home\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-grow max-w-md\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title, description, or location...\",className:\"w-full p-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search mr-2\"}),\"Search\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading listings...\"})]}):listings.length>0?listings.filter(listing=>listing.type===category.slice(0,-1)).map(listing=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleSelectListing(listing.id),className:\"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-300 cursor-pointer\",children:[listing.image_urls&&listing.image_urls.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-48 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.image_urls[currentImageIndex[listing.id]||0],alt:\"Listing at \".concat(listing.address),className:\"w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 right-3 flex space-x-2\",children:isLoggedIn&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(listing.id);},className:\"w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm \".concat(favorites.includes(listing.id)?'bg-red-500 text-white':'bg-white/80 text-gray-700'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(listing.id)?'fa-heart':'fa-heart',\" text-lg\")})})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home text-4xl mb-2\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No Image Available\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold text-gray-900 mb-1\",children:listing.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:listing.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold text-blue-600 mb-3\",children:[\"$\",new Intl.NumberFormat().format(listing.price)]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-4 line-clamp-2\",children:listing.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mt-4\",children:[isLoggedIn&&/*#__PURE__*/_jsxs(_Fragment,{children:[listing.owner_id===listing.owner_id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit mr-1\"}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash mr-1\"}),\" Delete\"]})]}):/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(listing.id);},className:\"flex-1 text-center px-3 py-2 font-medium rounded-lg transition-colors text-sm \".concat(favorites.includes(listing.id)?'bg-red-100 text-red-600 hover:bg-red-200':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(listing.id)?'fa-heart':'fa-heart',\" mr-1\")}),favorites.includes(listing.id)?'Saved':'Save']}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenChat(listing);},className:\"flex-1 text-center px-3 py-2 bg-blue-100 text-blue-600 font-medium rounded-lg hover:bg-blue-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comment mr-1\"}),\" Chat\"]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();setListingForReview(listing);setShowReviewModal(true);},className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star mr-1\"}),\" Reviews\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleShareListing(listing);},className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-share-alt mr-1\"}),\" Share\"]}),currentView==='favorites'&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenNotesModal(listing);},className:\"flex-1 text-center px-3 py-2 bg-purple-100 text-purple-700 font-medium rounded-lg hover:bg-purple-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sticky-note mr-1\"}),\" Note\"]})]})]})]},listing.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(getCategoryIcon(),\" text-4xl mb-4 text-gray-300\")}),/*#__PURE__*/_jsx(\"p\",{children:\"No listings found.\"})]})})]})});};// Listing Detail Page Component\nconst ListingDetailPage=_ref4=>{let{selectedListing,currentImageIndex,handlePrevImage,handleNextImage,renderStars,getAverageRating,isLoggedIn,favorites,handleToggleFavorite,setListingForReview,setShowReviewModal,setCurrentListing,setUploadedImage,setShowEditModal,handleOpenChat}=_ref4;const navigate=useNavigate();if(!selectedListing){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}const getCategoryColor=()=>{switch(selectedListing.type){case'house':return'from-blue-600 to-indigo-700';case'car':return'from-green-600 to-emerald-700';case'land':return'from-red-600 to-orange-700';default:return'from-gray-600 to-gray-700';}};const getCategoryName=()=>{switch(selectedListing.type){case'house':return'Apartment';case'car':return'Car';case'land':return'Land';default:return'Property';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 min-h-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r \".concat(getCategoryColor(),\" py-6\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-6\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>navigate(-1),className:\"flex items-center text-white hover:text-gray-200 transition-colors mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Back to List\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white\",children:selectedListing.address})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-6 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full h-80 md:h-[500px]\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedListing.image_urls[currentImageIndex[selectedListing.id]||0],alt:\"Property at \".concat(selectedListing.address),className:\"w-full h-full object-cover\"}),selectedListing.image_urls.length>1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handlePrevImage(selectedListing.id,selectedListing.image_urls);},className:\"absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-left\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleNextImage(selectedListing.id,selectedListing.image_urls);},className:\"absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl md:text-4xl font-bold text-gray-900 mb-2\",children:selectedListing.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:selectedListing.city})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 md:mt-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold text-blue-600\",children:[\"$\",new Intl.NumberFormat().format(selectedListing.price)]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-x-6 gap-y-3 text-gray-700 mb-8\",children:[selectedListing.type==='house'&&selectedListing.details&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bed text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.bedrooms,\" Beds\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bath text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.bathrooms,\" Baths\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-ruler-combined text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.sqft,\" sqft\"]})]})]}),selectedListing.type==='car'&&selectedListing.details&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-car text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.make,\" \",selectedListing.details.model]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tachometer-alt text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.mileage,\" miles\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-calendar-alt text-blue-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedListing.details.year})]})]}),selectedListing.type==='land'&&selectedListing.details&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tree text-blue-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedListing.details.acres,\" Acres\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-ruler text-blue-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedListing.details.zoning})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-3\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 leading-relaxed\",children:selectedListing.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-3\",children:\"Reviews\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[renderStars(getAverageRating(selectedListing.reviews)),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[\"(\",selectedListing.reviews.length,\" reviews)\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Contact Broker\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-6\",children:[\"Interested in this \",getCategoryName().toLowerCase(),\"? Reach out to the broker for more details or to schedule a viewing.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-6 rounded-xl border border-blue-200 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope text-blue-600 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"broker@example.com\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Response time: Usually within 24 hours\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your Name\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Your Email\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Your Message\",rows:\"4\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors\",children:\"Send Message\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-6 rounded-xl border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setListingForReview(selectedListing);setShowReviewModal(true);},className:\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star mr-2 text-yellow-500\"}),\"View Reviews\"]}),isLoggedIn&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(selectedListing.id);},className:\"w-full px-4 py-3 font-medium rounded-lg transition-colors flex items-center justify-center \".concat(favorites.includes(selectedListing.id)?'bg-red-50 border border-red-200 text-red-600 hover:bg-red-100':'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(selectedListing.id)?'fa-heart':'fa-heart',\" mr-2\")}),favorites.includes(selectedListing.id)?'Remove from Favorites':'Add to Favorites']}),isLoggedIn&&selectedListing.owner_id===selectedListing.owner_id&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();setCurrentListing(selectedListing);setUploadedImage(null);setShowEditModal(true);},className:\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit mr-2 text-blue-500\"}),\"Edit Listing\"]}),isLoggedIn&&selectedListing.owner_id!==selectedListing.owner_id&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenChat(selectedListing);},className:\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comment mr-2 text-green-500\"}),\"Chat with Broker\"]})]})]})})]})]})]})})]});};// Main App Component\nconst App=()=>{var _session$user3;const[session,setSession]=useState(null);const[listings,setListings]=useState([]);const[currentView,setCurrentView]=useState('public');const[showAddForm,setShowAddForm]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[currentListing,setCurrentListing]=useState(null);const[showConfirmDeleteModal,setShowConfirmDeleteModal]=useState(false);const[listingToDelete,setListingToDelete]=useState(null);const[favorites,setFavorites]=useState([]);const[showReviewModal,setShowReviewModal]=useState(false);const[showAddReviewModal,setShowAddReviewModal]=useState(false);const[listingForReview,setListingForReview]=useState(null);const[showNotesModal,setShowNotesModal]=useState(false);const[currentNote,setCurrentNote]=useState('');const[showChatModal,setShowChatModal]=useState(false);const[listingForChat,setListingForChat]=useState(null);const[chatMessages,setChatMessages]=useState([]);const[newChatMessage,setNewChatMessage]=useState('');const[currentImageIndex,setCurrentImageIndex]=useState({});const[loading,setLoading]=useState(false);const[uploadedImage,setUploadedImage]=useState(null);const[isGeneratingImage,setIsGeneratingImage]=useState(false);const chatMessagesEndRef=useRef(null);const[showProfileModal,setShowProfileModal]=useState(false);const[sortOption,setSortOption]=useState('price_asc');const[carFilters,setCarFilters]=useState({make:'',mileageMax:''});const[landFilters,setLandFilters]=useState({acresMax:'',zoning:''});const[showLoginModal,setShowLoginModal]=useState(false);const[selectedListingId,setSelectedListingId]=useState(null);const[profileForm,setProfileForm]=useState({name:''});const[showRegistrationModal,setShowRegistrationModal]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[filters,setFilters]=useState({priceMin:'',priceMax:'',bedroomsMin:'',bathroomsMin:'',sqftMin:''});const[listingType,setListingType]=useState('house');const[formDetails,setFormDetails]=useState({});const[selectedType,setSelectedType]=useState(null);// Google Maps\nconst{isLoaded,loadError}=useLoadScript({googleMapsApiKey:process.env.REACT_APP_GOOGLE_MAPS_API_KEY});const mapCenter=useMemo(()=>({lat:34.0522,lng:-118.2437}),[]);const fetchListings=useCallback(async()=>{setLoading(true);try{let query=supabase.from('listings').select('*');if(selectedType){query=query.eq('type',selectedType);}if(searchTerm){query=query.textSearch('search_vector',searchTerm,{config:'english',type:'websearch'});}if(filters.priceMin){query=query.gte('price',parseFloat(filters.priceMin));}if(filters.priceMax){query=query.lte('price',parseFloat(filters.priceMax));}if(filters.bedroomsMin){query=query.gte('details->>bedrooms',parseInt(filters.bedroomsMin,10));}if(filters.bathroomsMin){query=query.gte('details->>bathrooms',parseInt(filters.bathroomsMin,10));}if(filters.sqftMin){query=query.gte('details->>sqft',parseInt(filters.sqftMin,10));}if(selectedType==='car'&&carFilters.make){query=query.ilike('details->>make',\"%\".concat(carFilters.make,\"%\"));}if(selectedType==='car'&&carFilters.mileageMax){query=query.lte('details->>mileage',parseFloat(carFilters.mileageMax));}if(selectedType==='land'&&landFilters.acresMax){query=query.lte('details->>acres',parseFloat(landFilters.acresMax));}if(selectedType==='land'&&landFilters.zoning){query=query.ilike('details->>zoning',\"%\".concat(landFilters.zoning,\"%\"));}const{data:listingsData,error:listingsError}=await query;if(listingsError)throw listingsError;setListings(listingsData);if(session){const{data:favoritesData,error:favoritesError}=await supabase.from('favorites').select('listing_id');if(favoritesError)throw favoritesError;setFavorites(favoritesData.map(fav=>fav.listing_id));}}catch(error){console.error('Error fetching data:',error.message);}finally{setLoading(false);}},[selectedType,searchTerm,filters,carFilters,landFilters,session]);useEffect(()=>{const{data:authListener}=supabase.auth.onAuthStateChange(async(event,session)=>{setSession(session);fetchListings();});return()=>{authListener.subscription.unsubscribe();};},[]);useEffect(()=>{fetchListings();},[selectedType,searchTerm,filters,carFilters,landFilters,session]);const trackListingView=async listingId=>{var _session$user;if(!(session!==null&&session!==void 0&&(_session$user=session.user)!==null&&_session$user!==void 0&&_session$user.id))return;try{await supabase.from('listing_views').insert({listing_id:listingId,viewer_id:session.user.id});}catch(error){console.error('Error tracking listing view:',error.message);}};const handleProfileChange=e=>{setProfileForm(_objectSpread(_objectSpread({},profileForm),{},{[e.target.name]:e.target.value}));};const handleSelectListing=listingId=>{var _session$user2;setSelectedListingId(listingId);if(session!==null&&session!==void 0&&(_session$user2=session.user)!==null&&_session$user2!==void 0&&_session$user2.id){trackListingView(listingId);}};useEffect(()=>{if(listingForChat&&session){const fetchMessages=async()=>{const{data,error}=await supabase.from('messages').select('*').eq('listing_id',listingForChat.id).order('created_at',{ascending:true});if(error){console.error(\"Error fetching messages:\",error);}else{setChatMessages(data);}};fetchMessages();const channel=supabase.channel(\"chat-room-\".concat(listingForChat.id)).on('postgres_changes',{event:'INSERT',schema:'public',table:'messages',filter:\"listing_id=eq.\".concat(listingForChat.id)},payload=>{setChatMessages(prevMessages=>[...prevMessages,payload.new]);}).subscribe();return()=>{supabase.removeChannel(channel);};}},[listingForChat,session]);const userId=session===null||session===void 0?void 0:(_session$user3=session.user)===null||_session$user3===void 0?void 0:_session$user3.id;const isLoggedIn=!!session;useEffect(()=>{scrollToBottom();},[chatMessages]);const generateListingImage=async listingDetails=>{setIsGeneratingImage(true);return new Promise(resolve=>{setTimeout(()=>{const imageUrl=\"https://loremflickr.com/640/480/\".concat(listingDetails.bedrooms,\" bed \").concat(listingDetails.bathrooms,\" bath, \").concat(listingDetails.city,\", real estate?lock=\").concat(Math.floor(Math.random()*1000));setIsGeneratingImage(false);resolve(imageUrl);},2000);});};const uploadImage=async file=>{if(!file)return null;const fileExt=file.name.split('.').pop();const fileName=\"\".concat(Math.random(),\".\").concat(fileExt);const filePath=\"listings/\".concat(fileName);try{const{data,error}=await supabase.storage.from('listing_photos').upload(filePath,file);if(error)throw error;const{data:publicUrlData}=supabase.storage.from('listing_photos').getPublicUrl(filePath);return publicUrlData.publicUrl;}catch(error){console.error('Error uploading image:',error.message);return null;}};const handleImageUpload=e=>{const file=e.target.files[0];if(file){setUploadedImage(file);}else{setUploadedImage(null);}};const getAverageRating=reviews=>{if(!reviews||reviews.length===0)return 0;const totalRating=reviews.reduce((sum,review)=>sum+review.rating,0);return totalRating/reviews.length;};const renderStars=rating=>{const stars=[];const fullStars=Math.floor(rating);const hasHalfStar=rating%1!==0;for(let i=0;i<fullStars;i++){stars.push(/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star text-yellow-400\"},\"star-solid-\".concat(i)));}if(hasHalfStar){stars.push(/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star-half-alt text-yellow-400\"},\"star-half\"));}for(let i=stars.length;i<5;i++){stars.push(/*#__PURE__*/_jsx(\"i\",{className:\"far fa-star text-gray-400\"},\"star-empty-\".concat(i)));}return/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-0.5\",children:stars});};const handleAddListing=async e=>{e.preventDefault();setLoading(true);let imageUrls=[];if(uploadedImage){const url=await uploadImage(uploadedImage);if(url){imageUrls.push(url);}}else{const aiImageUrl=await generateListingImage({city:formDetails.city,bedrooms:formDetails.bedrooms,bathrooms:formDetails.bathrooms});imageUrls.push(aiImageUrl);}const newListing={type:listingType,address:formDetails.address,city:formDetails.city,price:parseInt(formDetails.price,10),latitude:parseFloat(formDetails.latitude),longitude:parseFloat(formDetails.longitude),description:formDetails.description,image_urls:imageUrls,reviews:[],owner_id:userId,details:formDetails.details};try{const{error}=await supabase.from('listings').insert([newListing]);if(error){throw error;}await fetchListings();setShowAddForm(false);setUploadedImage(null);setListingType('house');setFormDetails({});}catch(error){console.error('Error adding listing:',error.message);}finally{setLoading(false);}};const handleDeleteListing=async id=>{setLoading(true);try{const{error}=await supabase.from('listings').delete().eq('id',id);if(error){throw error;}await fetchListings();}catch(error){console.error('Error deleting listing:',error.message);}finally{setShowConfirmDeleteModal(false);setListingToDelete(null);setLoading(false);}};const handleUpdateListing=async e=>{e.preventDefault();setLoading(true);let imageUrls=currentListing.image_urls;if(uploadedImage){const url=await uploadImage(uploadedImage);if(url){imageUrls=[url];}}const updatedListing=_objectSpread(_objectSpread({},currentListing),{},{address:formDetails.address,city:formDetails.city,price:parseInt(formDetails.price,10),latitude:parseFloat(formDetails.latitude),longitude:parseFloat(formDetails.longitude),description:formDetails.description,image_urls:imageUrls,details:formDetails.details});try{const{error}=await supabase.from('listings').update(updatedListing).eq('id',currentListing.id);if(error){throw error;}await fetchListings();setShowEditModal(false);setCurrentListing(null);setUploadedImage(null);}catch(error){console.error('Error updating listing:',error.message);}finally{setLoading(false);}};const handleAddReview=async e=>{e.preventDefault();const form=e.target;const newReview={reviewer_id:userId,rating:parseInt(form.rating.value,10),review_text:form.reviewText.value};const updatedReviews=[...listingForReview.reviews,newReview];try{const{error}=await supabase.from('listings').update({reviews:updatedReviews}).eq('id',listingForReview.id);if(error){throw error;}await fetchListings();setShowAddReviewModal(false);setShowReviewModal(true);}catch(error){console.error('Error adding review:',error.message);}};const handleUpdateProfile=async e=>{e.preventDefault();setLoading(true);try{const{error}=await supabase.auth.updateUser({data:{name:profileForm.name}});if(error)throw error;alert('Profile updated successfully!');}catch(error){console.error('Error updating profile:',error.message);alert('Error updating profile. Please try again.');}finally{setLoading(false);}};const handleToggleFavorite=async listingId=>{if(!userId){alert(\"Please log in to add favorites.\");return;}const isFavorite=favorites.includes(listingId);setLoading(true);try{if(isFavorite){const{error}=await supabase.from('favorites').delete().eq('user_id',userId).eq('listing_id',listingId);if(error)throw error;const{error:noteError}=await supabase.from('private_notes').delete().eq('user_id',userId).eq('listing_id',listingId);if(noteError)console.error(\"Error deleting private note:\",noteError);setFavorites(favorites.filter(id=>id!==listingId));}else{const{error}=await supabase.from('favorites').insert([{user_id:userId,listing_id:listingId}]);if(error)throw error;setFavorites([...favorites,listingId]);}}catch(error){console.error('Error toggling favorite:',error.message);}finally{setLoading(false);}};const handleOpenChat=listing=>{if(!isLoggedIn){alert(\"Please log in to chat with a broker.\");return;}setListingForChat(listing);setShowChatModal(true);};const handleSendMessage=async e=>{e.preventDefault();if(!newChatMessage.trim()||!userId||!listingForChat)return;try{const{error}=await supabase.from('messages').insert({listing_id:listingForChat.id,user_id:userId,content:newChatMessage});if(error){throw error;}setNewChatMessage('');}catch(error){console.error('Error sending message:',error.message);}};const scrollToBottom=()=>{if(chatMessagesEndRef.current){chatMessagesEndRef.current.scrollIntoView({behavior:'smooth'});}};const handleShareListing=async listing=>{const listingUrl=\"\".concat(window.location.origin,\"?listingId=\").concat(listing.id);if(navigator.clipboard&&navigator.clipboard.writeText){try{await navigator.clipboard.writeText(listingUrl);alert('Listing link copied to clipboard!');}catch(err){console.error('Failed to copy text:',err);alert('Failed to copy link. Please try again.');}}else{const textarea=document.createElement('textarea');textarea.value=listingUrl;document.body.appendChild(textarea);textarea.select();try{document.execCommand('copy');alert('Listing link copied to clipboard!');}catch(err){console.error('Fallback: Failed to copy text:',err);alert('Failed to copy link. Please copy it manually from the URL bar.');}document.body.removeChild(textarea);}};const handleNextImage=(listingId,imageUrls)=>{setCurrentImageIndex(prev=>{const currentIndex=prev[listingId]||0;const nextIndex=(currentIndex+1)%imageUrls.length;return _objectSpread(_objectSpread({},prev),{},{[listingId]:nextIndex});});};const handlePrevImage=(listingId,imageUrls)=>{setCurrentImageIndex(prev=>{const currentIndex=prev[listingId]||0;const prevIndex=(currentIndex-1+imageUrls.length)%imageUrls.length;return _objectSpread(_objectSpread({},prev),{},{[listingId]:prevIndex});});};const handleRegistration=async e=>{e.preventDefault();setLoading(true);const form=e.target;const email=form.email.value;const password=form.password.value;const name=form.name.value;try{const{data:authData,error}=await supabase.auth.signUp({email,password,options:{data:{name}}});if(error)throw error;if(authData.user){const{error:profileError}=await supabase.from('profiles').insert([{id:authData.user.id,email:authData.user.email,name:name,role:'user'}]);if(profileError)throw profileError;}alert('Registration successful! Please check your email to confirm your account.');setShowRegistrationModal(false);setShowLoginModal(true);}catch(error){alert(error.message);}finally{setLoading(false);}};const handleLogin=async e=>{e.preventDefault();setLoading(true);const form=e.target;const{error}=await supabase.auth.signInWithPassword({email:form.email.value,password:form.password.value});setLoading(false);if(error){alert(error.message);}else{setShowLoginModal(false);}};const handleForgotPassword=async()=>{const email=prompt('Please enter your email address to reset your password:');if(email){try{const{error}=await supabase.auth.resetPasswordForEmail(email,{redirectTo:\"\".concat(window.location.origin,\"/reset-password\")});if(error)throw error;alert('Password reset email sent. Please check your inbox.');}catch(error){console.error('Error sending password reset email:',error.message);alert('Error sending password reset email. Please try again.');}}};const handleLogout=async()=>{try{const{error}=await supabase.auth.signOut();if(error)throw error;setSession(null);setFavorites([]);}catch(error){console.error('Error signing out:',error.message);alert('Error signing out. Please try again.');}};const handleOpenNotesModal=async listing=>{setCurrentListing(listing);setLoading(true);try{const{data,error}=await supabase.from('private_notes').select('note_content').eq('user_id',userId).eq('listing_id',listing.id).single();if(error&&error.code!=='PGRST116')throw error;setCurrentNote((data===null||data===void 0?void 0:data.note_content)||'');setShowNotesModal(true);}catch(error){console.error('Error fetching private note:',error.message);setCurrentNote('');}finally{setLoading(false);}};const handleSaveNote=async()=>{if(!currentListing||!userId)return;setLoading(true);try{const noteData={user_id:userId,listing_id:currentListing.id,note_content:currentNote};const{data:existingNote,error:fetchError}=await supabase.from('private_notes').select('id').eq('user_id',userId).eq('listing_id',currentListing.id).single();if(fetchError&&fetchError.code!=='PGRST116')throw fetchError;if(existingNote){const{error:updateError}=await supabase.from('private_notes').update(noteData).eq('id',existingNote.id);if(updateError)throw updateError;}else{const{error:insertError}=await supabase.from('private_notes').insert(noteData);if(insertError)throw insertError;}setShowNotesModal(false);alert('Note saved successfully!');}catch(error){console.error('Error saving note:',error.message);alert('Failed to save note.');}finally{setLoading(false);}};const selectedListing=selectedListingId?listings.find(l=>l.id===selectedListingId):null;const renderMapAndListings=()=>{if(loadError)return/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center font-semibold p-8\",children:\"Error loading maps\"});if(!isLoaded)return/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-center font-semibold p-8\",children:\"Loading Map...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-[1fr_2fr] gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-[60vh] lg:h-[80vh] sticky top-28 rounded-2xl overflow-hidden shadow-lg border border-gray-200\",children:/*#__PURE__*/_jsx(GoogleMap,{mapContainerStyle:{width:'100%',height:'100%'},center:mapCenter,zoom:10,options:{disableDefaultUI:true,zoomControl:true},children:listings.map(listing=>/*#__PURE__*/_jsx(MarkerF,{position:{lat:listing.latitude,lng:listing.longitude},onClick:()=>handleSelectListing(listing.id)},listing.id))})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading listings...\"})]}):listings.length>0?listings.map(listing=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleSelectListing(listing.id),className:\"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-300 cursor-pointer\",children:[listing.image_urls&&listing.image_urls.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-48 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.image_urls[currentImageIndex[listing.id]||0],alt:\"Listing at \".concat(listing.address),className:\"w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 right-3 flex space-x-2\",children:isLoggedIn&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(listing.id);},className:\"w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm \".concat(favorites.includes(listing.id)?'bg-red-500 text-white':'bg-white/80 text-gray-700'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(listing.id)?'fa-heart':'fa-heart',\" text-lg\")})})}),listing.image_urls.length>1&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-3 left-1/2 transform -translate-x-1/2 flex space-x-1\",children:listing.image_urls.map((_,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"block w-2 h-2 rounded-full transition-colors \".concat(index===currentImageIndex[listing.id]?'bg-white':'bg-white/50')},index))})]}):/*#__PURE__*/_jsx(\"div\",{className:\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home text-4xl mb-2\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No Image Available\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold text-gray-900 mb-1\",children:listing.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:listing.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold text-blue-600 mb-3\",children:[\"$\",new Intl.NumberFormat().format(listing.price)]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-4 line-clamp-2\",children:listing.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mt-4\",children:[isLoggedIn&&currentView==='public'&&/*#__PURE__*/_jsxs(_Fragment,{children:[listing.owner_id===userId?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit mr-1\"}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash mr-1\"}),\" Delete\"]})]}):/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleToggleFavorite(listing.id);},className:\"flex-1 text-center px-3 py-2 font-medium rounded-lg transition-colors text-sm \".concat(favorites.includes(listing.id)?'bg-red-100 text-red-600 hover:bg-red-200':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(favorites.includes(listing.id)?'fa-heart':'fa-heart',\" mr-1\")}),favorites.includes(listing.id)?'Saved':'Save']}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenChat(listing);},className:\"flex-1 text-center px-3 py-2 bg-blue-100 text-blue-600 font-medium rounded-lg hover:bg-blue-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comment mr-1\"}),\" Chat\"]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();setListingForReview(listing);setShowReviewModal(true);},className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star mr-1\"}),\" Reviews\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleShareListing(listing);},className:\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-share-alt mr-1\"}),\" Share\"]}),currentView==='favorites'&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:e=>{e.stopPropagation();handleOpenNotesModal(listing);},className:\"flex-1 text-center px-3 py-2 bg-purple-100 text-purple-700 font-medium rounded-lg hover:bg-purple-200 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sticky-note mr-1\"}),\" Note\"]})]})]})]},listing.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-home text-4xl mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No listings found.\"})]})})})]});};const sortListings=listings=>{const sorted=[...listings];switch(sortOption){case'price_asc':return sorted.sort((a,b)=>a.price-b.price);case'price_desc':return sorted.sort((a,b)=>b.price-a.price);case'date_desc':return sorted.sort((a,b)=>new Date(b.created_at)-new Date(a.created_at));case'rating_desc':return sorted.sort((a,b)=>{const avgRatingA=a.reviews.length>0?a.reviews.reduce((sum,r)=>sum+r.rating,0)/a.reviews.length:0;const avgRatingB=b.reviews.length>0?b.reviews.reduce((sum,r)=>sum+r.rating,0)/b.reviews.length:0;return avgRatingB-avgRatingA;});default:return sorted;}};const renderDynamicForm=function(){let isEdit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const currentListingDetails=isEdit&&currentListing?currentListing.details:formDetails.details;const currentType=isEdit&&currentListing?currentListing.type:listingType;let dynamicFields=null;switch(currentType){case'house':dynamicFields=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Bedrooms\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"bedrooms\",placeholder:\"Number of bedrooms\",required:true,min:\"0\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.bedrooms,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{bedrooms:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Bathrooms\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"bathrooms\",placeholder:\"Number of bathrooms\",required:true,min:\"0\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.bathrooms,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{bathrooms:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Square Feet\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"sqft\",placeholder:\"Square footage\",required:true,min:\"0\",defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.sqft,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{sqft:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]});break;case'car':dynamicFields=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Make\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"make\",placeholder:\"Car make\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.make,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{make:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Model\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"model\",placeholder:\"Car model\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.model,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{model:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"year\",placeholder:\"Year\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.year,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{year:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Mileage\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"mileage\",placeholder:\"Mileage\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.mileage,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{mileage:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]});break;case'land':dynamicFields=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Acres\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"acres\",placeholder:\"Number of acres\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.acres,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{acres:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Zoning\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"zoning\",placeholder:\"Zoning type\",required:true,defaultValue:currentListingDetails===null||currentListingDetails===void 0?void 0:currentListingDetails.zoning,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{details:_objectSpread(_objectSpread({},formDetails.details),{},{zoning:e.target.value})})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]});break;default:dynamicFields=null;}return dynamicFields;};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 min-h-screen\",children:[/*#__PURE__*/_jsx(Header,{currentView:currentView,setCurrentView:setCurrentView,isLoggedIn:isLoggedIn,session:session,showProfileModal:showProfileModal,setShowProfileModal:setShowProfileModal,profileForm:profileForm,setProfileForm:setProfileForm,handleProfileChange:handleProfileChange,handleLogout:handleLogout,setShowLoginModal:setShowLoginModal,setShowRegistrationModal:setShowRegistrationModal}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{setCurrentView:setCurrentView,isLoggedIn:isLoggedIn,setShowAddForm:setShowAddForm})}),/*#__PURE__*/_jsx(Route,{path:\"/apartments\",element:/*#__PURE__*/_jsx(CategoryListingsPage,{category:\"apartments\",title:\"Apartment Listings\",colorClass:\"from-blue-600 to-indigo-700\",listings:listings,loading:loading,currentImageIndex:currentImageIndex,handleSelectListing:handleSelectListing,handleToggleFavorite:handleToggleFavorite,favorites:favorites,isLoggedIn:isLoggedIn,handleOpenChat:handleOpenChat,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,handleShareListing:handleShareListing,handleOpenNotesModal:handleOpenNotesModal,currentView:currentView})}),/*#__PURE__*/_jsx(Route,{path:\"/cars\",element:/*#__PURE__*/_jsx(CategoryListingsPage,{category:\"cars\",title:\"Car Listings\",colorClass:\"from-green-600 to-emerald-700\",listings:listings,loading:loading,currentImageIndex:currentImageIndex,handleSelectListing:handleSelectListing,handleToggleFavorite:handleToggleFavorite,favorites:favorites,isLoggedIn:isLoggedIn,handleOpenChat:handleOpenChat,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,handleShareListing:handleShareListing,handleOpenNotesModal:handleOpenNotesModal,currentView:currentView})}),/*#__PURE__*/_jsx(Route,{path:\"/land\",element:/*#__PURE__*/_jsx(CategoryListingsPage,{category:\"land\",title:\"Land Listings\",colorClass:\"from-yellow-600 to-orange-700\",listings:listings,loading:loading,currentImageIndex:currentImageIndex,handleSelectListing:handleSelectListing,handleToggleFavorite:handleToggleFavorite,favorites:favorites,isLoggedIn:isLoggedIn,handleOpenChat:handleOpenChat,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,handleShareListing:handleShareListing,handleOpenNotesModal:handleOpenNotesModal,currentView:currentView})}),/*#__PURE__*/_jsx(Route,{path:\"/listing/:id\",element:/*#__PURE__*/_jsx(ListingDetailPage,{selectedListing:selectedListing,currentImageIndex:currentImageIndex,handlePrevImage:handlePrevImage,handleNextImage:handleNextImage,renderStars:renderStars,getAverageRating:getAverageRating,isLoggedIn:isLoggedIn,favorites:favorites,handleToggleFavorite:handleToggleFavorite,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,setCurrentListing:setCurrentListing,setUploadedImage:setUploadedImage,setShowEditModal:setShowEditModal,handleOpenChat:handleOpenChat})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:currentView==='public'?/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-6 py-8\",children:renderMapAndListings()}):selectedListing?/*#__PURE__*/_jsx(ListingDetailPage,{selectedListing:selectedListing,currentImageIndex:currentImageIndex,handlePrevImage:handlePrevImage,handleNextImage:handleNextImage,renderStars:renderStars,getAverageRating:getAverageRating,isLoggedIn:isLoggedIn,favorites:favorites,handleToggleFavorite:handleToggleFavorite,setListingForReview:setListingForReview,setShowReviewModal:setShowReviewModal,setCurrentListing:setCurrentListing,setUploadedImage:setUploadedImage,setShowEditModal:setShowEditModal,handleOpenChat:handleOpenChat}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Page Not Found\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setCurrentView('public'),className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\",children:\"Go to Home\"})]})})]}),showAddForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Add New Listing\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddForm(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Listing Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:listingType,onChange:e=>{setListingType(e.target.value);setFormDetails({});},className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"car\",children:\"Car\"}),/*#__PURE__*/_jsx(\"option\",{value:\"land\",children:\"Land\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddListing,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",placeholder:\"Street address\",required:true,value:formDetails.address||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{address:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",placeholder:\"City\",required:true,value:formDetails.city||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{city:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",placeholder:\"Price\",required:true,min:\"0\",value:formDetails.price||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{price:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Latitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"latitude\",placeholder:\"Latitude\",required:true,value:formDetails.latitude||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{latitude:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Longitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"longitude\",placeholder:\"Longitude\",required:true,value:formDetails.longitude||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{longitude:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description\",required:true,value:formDetails.description||'',onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{description:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",rows:\"3\"})]}),renderDynamicForm(),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Upload Image (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddForm(false),className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||isGeneratingImage,className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:loading||isGeneratingImage?'Processing...':'Add Listing'})]})]})]})]})}),showEditModal&&currentListing&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Edit Listing\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowEditModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateListing,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",placeholder:\"Address\",required:true,defaultValue:currentListing.address,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{address:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",placeholder:\"City\",required:true,defaultValue:currentListing.city,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{city:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",placeholder:\"Price\",required:true,min:\"0\",defaultValue:currentListing.price,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{price:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Latitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"latitude\",placeholder:\"Latitude\",required:true,defaultValue:currentListing.latitude,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{latitude:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Longitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",name:\"longitude\",placeholder:\"Longitude\",required:true,defaultValue:currentListing.longitude,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{longitude:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description\",required:true,defaultValue:currentListing.description,onChange:e=>setFormDetails(_objectSpread(_objectSpread({},formDetails),{},{description:e.target.value})),className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",rows:\"3\"})]}),renderDynamicForm(true),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Upload New Image (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowEditModal(false),className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:loading?'Updating...':'Update Listing'})]})]})})]})}),showConfirmDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle text-red-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:\"Confirm Deletion\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Are you sure you want to delete this listing? This action cannot be undone.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowConfirmDeleteModal(false);setListingToDelete(null);},className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleDeleteListing(listingToDelete),className:\"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors\",children:\"Delete\"})]})]})})}),showReviewModal&&listingForReview&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white\",children:[\"Reviews for \",listingForReview.address]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowReviewModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[listingForReview.reviews.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 max-h-96 overflow-y-auto pr-2\",children:listingForReview.reviews.map((review,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-xl border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[renderStars(review.rating),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:review.rating===5?'Excellent':review.rating===4?'Good':review.rating===3?'Average':review.rating===2?'Poor':'Terrible'})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(review.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:review.review_text}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-gray-500\",children:[\"by User \",review.reviewer_id.substring(0,8),\"...\"]})]},index))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star text-gray-400 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No Reviews Yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Be the first to share your experience with this property.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-center\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setShowReviewModal(false);setShowAddReviewModal(true);},className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-2\"}),\"Add Your Review\"]})})]})]})}),showAddReviewModal&&listingForReview&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Add Review\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddReviewModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddReview,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:[1,2,3,4,5].map(num=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"rating\",value:num,required:true,className:\"sr-only\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-medium\",children:num})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 mt-1\",children:num===1?'Poor':num===2?'Fair':num===3?'Good':num===4?'Very Good':'Excellent'})]},num))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Your Review\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"reviewText\",placeholder:\"Share your experience with this property...\",rows:\"4\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddReviewModal(false),className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\",children:\"Submit Review\"})]})]})})]})}),showNotesModal&&currentListing&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Personal Note\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowNotesModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:currentListing.address}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:currentListing.city}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Your Note\"}),/*#__PURE__*/_jsx(\"textarea\",{value:currentNote,onChange:e=>setCurrentNote(e.target.value),placeholder:\"Write your private notes here...\",rows:\"6\",className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowNotesModal(false);setCurrentNote('');},className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSaveNote,className:\"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors\",children:\"Save Note\"})]})]})]})}),showChatModal&&listingForChat&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md flex flex-col h-full max-h-[80vh]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-green-600 to-teal-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-white\",children:[\"Chat for \",listingForChat.address]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowChatModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow overflow-y-auto p-4 bg-gray-50\",children:chatMessages.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[chatMessages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(message.user_id===userId?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-[80%] p-4 rounded-2xl \".concat(message.user_id===userId?'bg-green-500 text-white rounded-tr-none':'bg-white border border-gray-200 rounded-tl-none'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"break-words\",children:message.content}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(message.user_id===userId?'text-green-100':'text-gray-500'),children:new Date(message.created_at).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]})},message.id)),/*#__PURE__*/_jsx(\"div\",{ref:chatMessagesEndRef})]}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-200 mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comments text-gray-500 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No Messages Yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Start the conversation with the broker.\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newChatMessage,onChange:e=>setNewChatMessage(e.target.value),placeholder:\"Type a message...\",className:\"flex-grow p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-3 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-paper-plane\"})})]})})]})}),showRegistrationModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-green-600 to-emerald-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Create Account\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowRegistrationModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegistration,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Your full name\",required:true,value:profileForm.name,onChange:handleProfileChange,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Your email address\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Create a password\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\",children:\"Create Account\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-6 text-center text-gray-600\",children:[\"Already have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowRegistrationModal(false);setShowLoginModal(true);},className:\"text-green-600 hover:text-green-700 font-medium\",children:\"Sign in\"})]})]})]})}),showLoginModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowLoginModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Enter your email\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Enter your password\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleForgotPassword,className:\"text-sm text-blue-600 hover:text-blue-700 font-medium\",children:\"Forgot your password?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:loading?'Logging in...':'Sign In'})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-6 text-center text-gray-600\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowLoginModal(false);setShowRegistrationModal(true);},className:\"text-blue-600 hover:text-blue-700 font-medium\",children:\"Sign up\"})]})]})]})}),showProfileModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Update Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowProfileModal(false),className:\"text-white hover:text-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateProfile,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:profileForm.name,onChange:handleProfileChange,placeholder:\"Your name\",required:true,className:\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowProfileModal(false),className:\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",children:loading?'Updating...':'Update Profile'})]})]})})]})})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","useCallback","BrowserRouter","Router","Routes","Route","useNavigate","GoogleMap","useLoadScript","MarkerF","createClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","supabaseUrl","supabaseAnonKey","supabase","Header","_ref","currentView","setCurrentView","isLoggedIn","session","showProfileModal","setShowProfileModal","profileForm","setProfileForm","handleProfileChange","handleLogout","setShowLoginModal","setShowRegistrationModal","showDropdown","setShowDropdown","navigate","handleCategorySelect","category","concat","className","children","type","onClick","user","email","charAt","toUpperCase","split","name","user_metadata","HomePage","_ref2","setShowAddForm","CategoryListingsPage","_ref3","title","colorClass","listings","loading","currentImageIndex","handleSelectListing","handleToggleFavorite","favorites","handleOpenChat","setListingForReview","setShowReviewModal","handleShareListing","handleOpenNotesModal","getCategoryIcon","placeholder","length","filter","listing","slice","map","id","image_urls","src","alt","address","e","stopPropagation","includes","city","Intl","NumberFormat","format","price","description","owner_id","ListingDetailPage","_ref4","selectedListing","handlePrevImage","handleNextImage","renderStars","getAverageRating","setCurrentListing","setUploadedImage","setShowEditModal","getCategoryColor","getCategoryName","details","bedrooms","bathrooms","sqft","make","model","mileage","year","acres","zoning","reviews","toLowerCase","required","rows","App","_session$user3","setSession","setListings","showAddForm","showEditModal","currentListing","showConfirmDeleteModal","setShowConfirmDeleteModal","listingToDelete","setListingToDelete","setFavorites","showReviewModal","showAddReviewModal","setShowAddReviewModal","listingForReview","showNotesModal","setShowNotesModal","currentNote","setCurrentNote","showChatModal","setShowChatModal","listingForChat","setListingForChat","chatMessages","setChatMessages","newChatMessage","setNewChatMessage","setCurrentImageIndex","setLoading","uploadedImage","isGeneratingImage","setIsGeneratingImage","chatMessagesEndRef","sortOption","setSortOption","carFilters","setCarFilters","mileageMax","landFilters","setLandFilters","acresMax","showLoginModal","selectedListingId","setSelectedListingId","showRegistrationModal","searchTerm","setSearchTerm","filters","setFilters","priceMin","priceMax","bedroomsMin","bathroomsMin","sqftMin","listingType","setListingType","formDetails","setFormDetails","selectedType","setSelectedType","isLoaded","loadError","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","mapCenter","lat","lng","fetchListings","query","from","select","eq","textSearch","config","gte","parseFloat","lte","parseInt","ilike","data","listingsData","error","listingsError","favoritesData","favoritesError","fav","listing_id","console","message","authListener","auth","onAuthStateChange","event","subscription","unsubscribe","trackListingView","listingId","_session$user","insert","viewer_id","_objectSpread","target","value","_session$user2","fetchMessages","order","ascending","channel","on","schema","table","payload","prevMessages","new","subscribe","removeChannel","userId","scrollToBottom","generateListingImage","listingDetails","Promise","resolve","setTimeout","imageUrl","Math","floor","random","uploadImage","file","fileExt","pop","fileName","filePath","storage","upload","publicUrlData","getPublicUrl","publicUrl","handleImageUpload","files","totalRating","reduce","sum","review","rating","stars","fullStars","hasHalfStar","i","push","handleAddListing","preventDefault","imageUrls","url","aiImageUrl","newListing","latitude","longitude","handleDeleteListing","delete","handleUpdateListing","updatedListing","update","handleAddReview","form","newReview","reviewer_id","review_text","reviewText","updatedReviews","handleUpdateProfile","updateUser","alert","isFavorite","noteError","user_id","handleSendMessage","trim","content","current","scrollIntoView","behavior","listingUrl","window","location","origin","navigator","clipboard","writeText","err","textarea","document","createElement","body","appendChild","execCommand","removeChild","prev","currentIndex","nextIndex","prevIndex","handleRegistration","password","authData","signUp","options","profileError","role","handleLogin","signInWithPassword","handleForgotPassword","prompt","resetPasswordForEmail","redirectTo","signOut","single","code","note_content","handleSaveNote","noteData","existingNote","fetchError","updateError","insertError","find","l","renderMapAndListings","mapContainerStyle","width","height","center","zoom","disableDefaultUI","zoomControl","position","_","index","sortListings","sorted","sort","a","b","Date","created_at","avgRatingA","r","avgRatingB","renderDynamicForm","isEdit","arguments","undefined","currentListingDetails","currentType","dynamicFields","min","defaultValue","onChange","step","path","element","onSubmit","accept","disabled","toLocaleDateString","substring","num","toLocaleTimeString","hour","minute","ref"],"sources":["C:/Users/HJJJJJJJJJJJJJJJJJJJ/broker/broker-app/frontend/src/app.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, useNavigate } from 'react-router-dom';\r\nimport { GoogleMap, useLoadScript, MarkerF } from '@react-google-maps/api';\r\nimport './index.css';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = 'https://ouscjkmgdsnzakairivo.supabase.co';\r\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91c2Nqa21nZHNuemFrYWlyaXZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MzY0MzYsImV4cCI6MjA3MTUxMjQzNn0.ii49ymR7Bi7WZTYOkYnE1-kJIlZ7DV5xR_tM3kbX-MU';\r\nconst supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\n// Header Component\r\nconst Header = ({ currentView, setCurrentView, isLoggedIn, session, showProfileModal, setShowProfileModal, profileForm, setProfileForm, handleProfileChange, handleLogout, setShowLoginModal, setShowRegistrationModal }) => {\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleCategorySelect = (category) => {\r\n    setCurrentView(category);\r\n    navigate(`/${category}`);\r\n    setShowDropdown(false);\r\n  };\r\n\r\n  return (\r\n    <header className=\"bg-white shadow-sm sticky top-0 z-40 border-b border-gray-200\">\r\n      <div className=\"max-w-7xl mx-auto px-6 py-4\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-sm\">\r\n              <span className=\"text-white font-bold text-xl\">B</span>\r\n            </div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">\r\n              <span className=\"text-blue-600\">Broker</span><span className=\"text-gray-800\">Connect</span>\r\n            </h1>\r\n          </div>\r\n\r\n          <nav className=\"hidden md:flex items-center space-x-1\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setCurrentView('public');\r\n                navigate('/');\r\n              }}\r\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                currentView === 'public' \r\n                  ? 'bg-blue-100 text-blue-700' \r\n                  : 'text-gray-600 hover:bg-gray-100'\r\n              }`}\r\n            >\r\n              Home\r\n            </button>\r\n\r\n            <div className=\"relative\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowDropdown(!showDropdown)}\r\n                className=\"px-4 py-2 rounded-lg font-medium text-gray-600 hover:bg-gray-100 transition-colors flex items-center\"\r\n              >\r\n                Categories\r\n                <i className=\"fas fa-chevron-down ml-2 text-xs\"></i>\r\n              </button>\r\n\r\n              {showDropdown && (\r\n                <div className=\"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleCategorySelect('apartments')}\r\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\r\n                  >\r\n                    Apartments\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleCategorySelect('cars')}\r\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\r\n                  >\r\n                    Cars\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleCategorySelect('land')}\r\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\r\n                  >\r\n                    Land\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {isLoggedIn && (\r\n              <>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setCurrentView('private')}\r\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                    currentView === 'private' \r\n                      ? 'bg-blue-100 text-blue-700' \r\n                      : 'text-gray-600 hover:bg-gray-100'\r\n                  }`}\r\n                >\r\n                  My Listings\r\n                </button>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setCurrentView('favorites')}\r\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                    currentView === 'favorites' \r\n                      ? 'bg-blue-100 text-blue-700' \r\n                      : 'text-gray-600 hover:bg-gray-100'\r\n                  }`}\r\n                >\r\n                  Favorites\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            {isLoggedIn ? (\r\n              <div className=\"relative group\">\r\n                <button className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium\">\r\n                    {session.user.email.charAt(0).toUpperCase()}\r\n                  </div>\r\n                  <span className=\"text-gray-700\">{session.user.email.split('@')[0]}</span>\r\n                </button>\r\n\r\n                <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-50\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setProfileForm({ name: session.user.user_metadata.name || '' });\r\n                      setShowProfileModal(true);\r\n                    }}\r\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\r\n                  >\r\n                    Update Profile\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleLogout}\r\n                    className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left\"\r\n                  >\r\n                    Logout\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <button \r\n                  type=\"button\"\r\n                  onClick={() => setShowLoginModal(true)} \r\n                  className=\"px-4 py-2 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Login\r\n                </button>\r\n                <button \r\n                  type=\"button\"\r\n                  onClick={() => setShowRegistrationModal(true)} \r\n                  className=\"ml-2 px-4 py-2 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 transition-colors\"\r\n                >\r\n                  Register\r\n                </button>\r\n              </>\r\n            )}\r\n          </nav>\r\n\r\n          {/* Mobile menu button */}\r\n          <div className=\"md:hidden\">\r\n            <button className=\"text-gray-500 hover:text-gray-700\">\r\n              <i className=\"fas fa-bars text-xl\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\n// Home Page Component\r\nconst HomePage = ({ setCurrentView, isLoggedIn, setShowAddForm }) => {\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 min-h-screen\">\r\n      <main className=\"max-w-7xl mx-auto px-6 py-16\">\r\n        <div className=\"text-center mb-16\">\r\n          <h1 className=\"text-5xl font-bold text-gray-900 mb-6\">Welcome to BrokerConnect</h1>\r\n          <p className=\"text-xl text-gray-600 max-w-3xl mx-auto\">\r\n            Your ultimate marketplace for premium apartments, reliable cars, and valuable land. \r\n            Discover your next great investment with ease, precision, and trust.\r\n          </p>\r\n          <div className=\"mt-10 flex justify-center space-x-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setCurrentView('apartments');\r\n                navigate('/apartments');\r\n              }}\r\n              className=\"px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition-colors\"\r\n            >\r\n              Browse Apartments\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setCurrentView('cars');\r\n                navigate('/cars');\r\n              }}\r\n              className=\"px-8 py-3 bg-green-600 text-white font-semibold rounded-lg shadow hover:bg-green-700 transition-colors\"\r\n            >\r\n              Browse Cars\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setCurrentView('land');\r\n                navigate('/land');\r\n              }}\r\n              className=\"px-8 py-3 bg-yellow-600 text-white font-semibold rounded-lg shadow hover:bg-yellow-700 transition-colors\"\r\n            >\r\n              Browse Land\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16\">\r\n          <div className=\"bg-white p-8 rounded-2xl shadow-lg border border-blue-200\">\r\n            <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-6\">\r\n              <i className=\"fas fa-building text-blue-600 text-2xl\"></i>\r\n            </div>\r\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Premium Apartments</h3>\r\n            <p className=\"text-gray-600 mb-6\">Discover luxury apartments in prime locations with top-notch amenities.</p>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setCurrentView('apartments');\r\n                navigate('/apartments');\r\n              }}\r\n              className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              View Apartments\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"bg-white p-8 rounded-2xl shadow-lg border border-green-200\">\r\n            <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6\">\r\n              <i className=\"fas fa-car text-green-600 text-2xl\"></i>\r\n            </div>\r\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Reliable Cars</h3>\r\n            <p className=\"text-gray-600 mb-6\">Find quality vehicles from trusted sellers with verified history reports.</p>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setCurrentView('cars');\r\n                navigate('/cars');\r\n              }}\r\n              className=\"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\"\r\n            >\r\n              View Cars\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"bg-white p-8 rounded-2xl shadow-lg border border-yellow-200\">\r\n            <div className=\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-6\">\r\n              <i className=\"fas fa-tree text-yellow-600 text-2xl\"></i>\r\n            </div>\r\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Valuable Land</h3>\r\n            <p className=\"text-gray-600 mb-6\">Invest in prime land parcels with great potential for development.</p>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setCurrentView('land');\r\n                navigate('/land');\r\n              }}\r\n              className=\"px-6 py-3 bg-yellow-600 text-white font-medium rounded-lg hover:bg-yellow-700 transition-colors\"\r\n            >\r\n              View Land\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-6\">How It Works</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n            <div className=\"bg-white p-6 rounded-xl shadow-sm\">\r\n              <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <span className=\"text-blue-600 font-bold\">1</span>\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Browse Listings</h3>\r\n              <p className=\"text-gray-600\">Explore our extensive collection of properties, vehicles, and land.</p>\r\n            </div>\r\n            <div className=\"bg-white p-6 rounded-xl shadow-sm\">\r\n              <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <span className=\"text-blue-600 font-bold\">2</span>\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Connect with Brokers</h3>\r\n              <p className=\"text-gray-600\">Get in touch with professional brokers for expert guidance.</p>\r\n            </div>\r\n            <div className=\"bg-white p-6 rounded-xl shadow-sm\">\r\n              <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <span className=\"text-blue-600 font-bold\">3</span>\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Make Your Investment</h3>\r\n              <p className=\"text-gray-600\">Secure your next great investment with confidence and ease.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Category Listings Page Component\r\nconst CategoryListingsPage = ({ \r\n  category, \r\n  title, \r\n  colorClass, \r\n  listings, \r\n  loading, \r\n  currentImageIndex, \r\n  handleSelectListing, \r\n  handleToggleFavorite, \r\n  favorites, \r\n  isLoggedIn, \r\n  handleOpenChat, \r\n  setListingForReview, \r\n  setShowReviewModal, \r\n  handleShareListing, \r\n  handleOpenNotesModal, \r\n  currentView \r\n}) => {\r\n  const navigate = useNavigate();\r\n\r\n  const getCategoryIcon = () => {\r\n    switch(category) {\r\n      case 'apartments': return 'fas fa-building';\r\n      case 'cars': return 'fas fa-car';\r\n      case 'land': return 'fas fa-tree';\r\n      default: return 'fas fa-home';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 min-h-screen\">\r\n      <main className=\"max-w-7xl mx-auto px-6 py-8\">\r\n        <div className=\"flex justify-between items-center mb-8\">\r\n          <div>\r\n            <button \r\n              type=\"button\"\r\n              onClick={() => navigate('/')}\r\n              className=\"flex items-center text-blue-600 hover:text-blue-800 transition-colors mb-4\"\r\n            >\r\n              <i className=\"fas fa-arrow-left mr-2\"></i>\r\n              <span>Back to Home</span>\r\n            </button>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{title}</h1>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"relative flex-grow max-w-md\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder={`Search by title, description, or location...`}\r\n                className=\"w-full p-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n              <i className=\"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></i>\r\n            </div>\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors flex items-center\"\r\n            >\r\n              <i className=\"fas fa-search mr-2\"></i>\r\n              Search\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n          {loading ? (\r\n            <div className=\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\">\r\n              <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"></div>\r\n              <p>Loading listings...</p>\r\n            </div>\r\n          ) : listings.length > 0 ? (\r\n            listings.filter(listing => listing.type === category.slice(0, -1)).map(listing => (\r\n              <div\r\n                key={listing.id}\r\n                onClick={() => handleSelectListing(listing.id)}\r\n                className=\"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-300 cursor-pointer\"\r\n              >\r\n                {listing.image_urls && listing.image_urls.length > 0 ? (\r\n                  <div className=\"relative h-48 overflow-hidden\">\r\n                    <img\r\n                      src={listing.image_urls[currentImageIndex[listing.id] || 0]}\r\n                      alt={`Listing at ${listing.address}`}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                    <div className=\"absolute top-3 right-3 flex space-x-2\">\r\n                      {isLoggedIn && (\r\n                        <button \r\n                          type=\"button\"\r\n                          onClick={(e) => { e.stopPropagation(); handleToggleFavorite(listing.id); }}\r\n                          className={`w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm ${\r\n                            favorites.includes(listing.id) \r\n                              ? 'bg-red-500 text-white' \r\n                              : 'bg-white/80 text-gray-700'\r\n                          }`}\r\n                        >\r\n                          <i className={`fas ${favorites.includes(listing.id) ? 'fa-heart' : 'fa-heart'} text-lg`}></i>\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500\">\r\n                    <div className=\"text-center\">\r\n                      <i className=\"fas fa-home text-4xl mb-2\"></i>\r\n                      <p>No Image Available</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"p-5\">\r\n                  <div className=\"flex justify-between items-start mb-2\">\r\n                    <div>\r\n                      <h2 className=\"text-lg font-bold text-gray-900 mb-1\">{listing.address}</h2>\r\n                      <p className=\"text-gray-600 text-sm\">{listing.city}</p>\r\n                    </div>\r\n                    <div className=\"text-xl font-bold text-blue-600 mb-3\">\r\n                      ${new Intl.NumberFormat().format(listing.price)}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">{listing.description}</p>\r\n\r\n                  <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                    {isLoggedIn && (\r\n                      <>\r\n                        {listing.owner_id === listing.owner_id ? (\r\n                          <>\r\n                            <button className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\">\r\n                              <i className=\"fas fa-edit mr-1\"></i> Edit\r\n                            </button>\r\n                            <button className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\">\r\n                              <i className=\"fas fa-trash mr-1\"></i> Delete\r\n                            </button>\r\n                          </>\r\n                        ) : (\r\n                          <button \r\n                            type=\"button\"\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              handleToggleFavorite(listing.id);\r\n                            }}\r\n                            className={`flex-1 text-center px-3 py-2 font-medium rounded-lg transition-colors text-sm ${\r\n                              favorites.includes(listing.id) \r\n                                ? 'bg-red-100 text-red-600 hover:bg-red-200' \r\n                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                            }`}\r\n                          >\r\n                            <i className={`fas ${favorites.includes(listing.id) ? 'fa-heart' : 'fa-heart'} mr-1`}></i>\r\n                            {favorites.includes(listing.id) ? 'Saved' : 'Save'}\r\n                          </button>\r\n                        )}\r\n                        <button \r\n                          type=\"button\"\r\n                          onClick={(e) => { e.stopPropagation(); handleOpenChat(listing); }}\r\n                          className=\"flex-1 text-center px-3 py-2 bg-blue-100 text-blue-600 font-medium rounded-lg hover:bg-blue-200 transition-colors text-sm\"\r\n                        >\r\n                          <i className=\"fas fa-comment mr-1\"></i> Chat\r\n                        </button>\r\n                      </>\r\n                    )}\r\n\r\n                    <button \r\n                      type=\"button\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setListingForReview(listing);\r\n                        setShowReviewModal(true);\r\n                      }}\r\n                      className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\"\r\n                    >\r\n                      <i className=\"fas fa-star mr-1\"></i> Reviews\r\n                    </button>\r\n                    <button \r\n                      type=\"button\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleShareListing(listing);\r\n                      }}\r\n                      className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\"\r\n                    >\r\n                      <i className=\"fas fa-share-alt mr-1\"></i> Share\r\n                    </button>\r\n                    {currentView === 'favorites' && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleOpenNotesModal(listing);\r\n                        }}\r\n                        className=\"flex-1 text-center px-3 py-2 bg-purple-100 text-purple-700 font-medium rounded-lg hover:bg-purple-200 transition-colors text-sm\"\r\n                      >\r\n                        <i className=\"fas fa-sticky-note mr-1\"></i> Note\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\">\r\n              <i className={`fas ${getCategoryIcon()} text-4xl mb-4 text-gray-300`}></i>\r\n              <p>No listings found.</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Listing Detail Page Component\r\nconst ListingDetailPage = ({ \r\n  selectedListing, \r\n  currentImageIndex, \r\n  handlePrevImage, \r\n  handleNextImage, \r\n  renderStars, \r\n  getAverageRating, \r\n  isLoggedIn, \r\n  favorites, \r\n  handleToggleFavorite, \r\n  setListingForReview, \r\n  setShowReviewModal, \r\n  setCurrentListing, \r\n  setUploadedImage, \r\n  setShowEditModal, \r\n  handleOpenChat \r\n}) => {\r\n  const navigate = useNavigate();\r\n\r\n  if (!selectedListing) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  const getCategoryColor = () => {\r\n    switch(selectedListing.type) {\r\n      case 'house': return 'from-blue-600 to-indigo-700';\r\n      case 'car': return 'from-green-600 to-emerald-700';\r\n      case 'land': return 'from-red-600 to-orange-700';\r\n      default: return 'from-gray-600 to-gray-700';\r\n    }\r\n  };\r\n\r\n  const getCategoryName = () => {\r\n    switch(selectedListing.type) {\r\n      case 'house': return 'Apartment';\r\n      case 'car': return 'Car';\r\n      case 'land': return 'Land';\r\n      default: return 'Property';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 min-h-screen\">\r\n      <div className={`bg-gradient-to-r ${getCategoryColor()} py-6`}>\r\n        <div className=\"max-w-7xl mx-auto px-6\">\r\n          <button \r\n            type=\"button\"\r\n            onClick={() => navigate(-1)}\r\n            className=\"flex items-center text-white hover:text-gray-200 transition-colors mb-4\"\r\n          >\r\n            <i className=\"fas fa-arrow-left mr-2\"></i>\r\n            <span>Back to List</span>\r\n          </button>\r\n          <h1 className=\"text-3xl font-bold text-white\">{selectedListing.address}</h1>\r\n        </div>\r\n      </div>\r\n\r\n      <main className=\"max-w-7xl mx-auto px-6 py-8\">\r\n        <div className=\"bg-white rounded-2xl shadow-lg overflow-hidden\">\r\n          <div className=\"relative w-full h-80 md:h-[500px]\">\r\n            <img\r\n              src={selectedListing.image_urls[currentImageIndex[selectedListing.id] || 0]}\r\n              alt={`Property at ${selectedListing.address}`}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n            {selectedListing.image_urls.length > 1 && (\r\n              <>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(e) => { e.stopPropagation(); handlePrevImage(selectedListing.id, selectedListing.image_urls); }}\r\n                  className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-colors\"\r\n                >\r\n                  <i className=\"fas fa-chevron-left\"></i>\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(e) => { e.stopPropagation(); handleNextImage(selectedListing.id, selectedListing.image_urls); }}\r\n                  className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-colors\"\r\n                >\r\n                  <i className=\"fas fa-chevron-right\"></i>\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"p-6 md:p-8\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\r\n              <div>\r\n                <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-2\">{selectedListing.address}</h1>\r\n                <p className=\"text-lg text-gray-600\">{selectedListing.city}</p>\r\n              </div>\r\n              <div className=\"mt-4 md:mt-0\">\r\n                <div className=\"text-3xl font-bold text-blue-600\">${new Intl.NumberFormat().format(selectedListing.price)}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap items-center gap-x-6 gap-y-3 text-gray-700 mb-8\">\r\n              {selectedListing.type === 'house' && selectedListing.details && (\r\n                <>\r\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\r\n                    <i className=\"fas fa-bed text-blue-500 mr-2\"></i>\r\n                    <span className=\"font-medium\">{selectedListing.details.bedrooms} Beds</span>\r\n                  </div>\r\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\r\n                    <i className=\"fas fa-bath text-blue-500 mr-2\"></i>\r\n                    <span className=\"font-medium\">{selectedListing.details.bathrooms} Baths</span>\r\n                  </div>\r\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\r\n                    <i className=\"fas fa-ruler-combined text-blue-500 mr-2\"></i>\r\n                    <span className=\"font-medium\">{selectedListing.details.sqft} sqft</span>\r\n                  </div>\r\n                </>\r\n              )}\r\n              {selectedListing.type === 'car' && selectedListing.details && (\r\n                <>\r\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\r\n                    <i className=\"fas fa-car text-blue-500 mr-2\"></i>\r\n                    <span className=\"font-medium\">{selectedListing.details.make} {selectedListing.details.model}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\r\n                    <i className=\"fas fa-tachometer-alt text-blue-500 mr-2\"></i>\r\n                    <span className=\"font-medium\">{selectedListing.details.mileage} miles</span>\r\n                  </div>\r\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\r\n                    <i className=\"fas fa-calendar-alt text-blue-500 mr-2\"></i>\r\n                    <span className=\"font-medium\">{selectedListing.details.year}</span>\r\n                  </div>\r\n                </>\r\n              )}\r\n              {selectedListing.type === 'land' && selectedListing.details && (\r\n                <>\r\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\r\n                    <i className=\"fas fa-tree text-blue-500 mr-2\"></i>\r\n                    <span className=\"font-medium\">{selectedListing.details.acres} Acres</span>\r\n                  </div>\r\n                  <div className=\"flex items-center bg-blue-50 px-4 py-2 rounded-lg\">\r\n                    <i className=\"fas fa-ruler text-blue-500 mr-2\"></i>\r\n                    <span className=\"font-medium\">{selectedListing.details.zoning}</span>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"mb-8\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 mb-3\">Description</h3>\r\n              <p className=\"text-gray-600 leading-relaxed\">{selectedListing.description}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-8\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 mb-3\">Reviews</h3>\r\n              <div className=\"flex items-center space-x-2\">\r\n                {renderStars(getAverageRating(selectedListing.reviews))}\r\n                <span className=\"text-gray-600\">({selectedListing.reviews.length} reviews)</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n              <div className=\"md:col-span-2\">\r\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Contact Broker</h3>\r\n                <p className=\"text-gray-600 mb-6\">Interested in this {getCategoryName().toLowerCase()}? Reach out to the broker for more details or to schedule a viewing.</p>\r\n\r\n                <div className=\"bg-blue-50 p-6 rounded-xl border border-blue-200 mb-6\">\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <i className=\"fas fa-envelope text-blue-600 mr-3\"></i>\r\n                    <span className=\"font-medium\">broker@example.com</span>\r\n                  </div>\r\n                  <p className=\"text-gray-600 text-sm\">Response time: Usually within 24 hours</p>\r\n                </div>\r\n\r\n                <form className=\"space-y-4\">\r\n                  <div>\r\n                    <input type=\"text\" placeholder=\"Your Name\" required className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n                  </div>\r\n                  <div>\r\n                    <input type=\"email\" placeholder=\"Your Email\" required className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n                  </div>\r\n                  <div>\r\n                    <textarea placeholder=\"Your Message\" rows=\"4\" required className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"></textarea>\r\n                  </div>\r\n                  <button type=\"submit\" className=\"w-full px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors\">\r\n                    Send Message\r\n                  </button>\r\n                </form>\r\n              </div>\r\n\r\n              <div>\r\n                <div className=\"bg-gray-50 p-6 rounded-xl border border-gray-200\">\r\n                  <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Actions</h3>\r\n                  <div className=\"space-y-3\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        setListingForReview(selectedListing);\r\n                        setShowReviewModal(true);\r\n                      }}\r\n                      className=\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\"\r\n                    >\r\n                      <i className=\"fas fa-star mr-2 text-yellow-500\"></i>\r\n                      View Reviews\r\n                    </button>\r\n\r\n                    {isLoggedIn && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleToggleFavorite(selectedListing.id);\r\n                        }}\r\n                        className={`w-full px-4 py-3 font-medium rounded-lg transition-colors flex items-center justify-center ${\r\n                          favorites.includes(selectedListing.id) \r\n                            ? 'bg-red-50 border border-red-200 text-red-600 hover:bg-red-100' \r\n                            : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                        }`}\r\n                      >\r\n                        <i className={`fas ${favorites.includes(selectedListing.id) ? 'fa-heart' : 'fa-heart'} mr-2`}></i>\r\n                        {favorites.includes(selectedListing.id) ? 'Remove from Favorites' : 'Add to Favorites'}\r\n                      </button>\r\n                    )}\r\n\r\n                    {isLoggedIn && selectedListing.owner_id === selectedListing.owner_id && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          setCurrentListing(selectedListing);\r\n                          setUploadedImage(null);\r\n                          setShowEditModal(true);\r\n                        }}\r\n                        className=\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\"\r\n                      >\r\n                        <i className=\"fas fa-edit mr-2 text-blue-500\"></i>\r\n                        Edit Listing\r\n                      </button>\r\n                    )}\r\n\r\n                    {isLoggedIn && selectedListing.owner_id !== selectedListing.owner_id && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={(e) => { e.stopPropagation(); handleOpenChat(selectedListing); }}\r\n                        className=\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center\"\r\n                      >\r\n                        <i className=\"fas fa-comment mr-2 text-green-500\"></i>\r\n                        Chat with Broker\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Main App Component\r\nconst App = () => {\r\n  const [session, setSession] = useState(null);\r\n  const [listings, setListings] = useState([]);\r\n  const [currentView, setCurrentView] = useState('public');\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [currentListing, setCurrentListing] = useState(null);\r\n  const [showConfirmDeleteModal, setShowConfirmDeleteModal] = useState(false);\r\n  const [listingToDelete, setListingToDelete] = useState(null);\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [showReviewModal, setShowReviewModal] = useState(false);\r\n  const [showAddReviewModal, setShowAddReviewModal] = useState(false);\r\n  const [listingForReview, setListingForReview] = useState(null);\r\n  const [showNotesModal, setShowNotesModal] = useState(false);\r\n  const [currentNote, setCurrentNote] = useState('');\r\n  const [showChatModal, setShowChatModal] = useState(false);\r\n  const [listingForChat, setListingForChat] = useState(null);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [newChatMessage, setNewChatMessage] = useState('');\r\n  const [currentImageIndex, setCurrentImageIndex] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploadedImage, setUploadedImage] = useState(null);\r\n  const [isGeneratingImage, setIsGeneratingImage] = useState(false);\r\n  const chatMessagesEndRef = useRef(null);\r\n  const [showProfileModal, setShowProfileModal] = useState(false);\r\n  const [sortOption, setSortOption] = useState('price_asc');\r\n  const [carFilters, setCarFilters] = useState({ make: '', mileageMax: '' });\r\n  const [landFilters, setLandFilters] = useState({ acresMax: '', zoning: '' });\r\n  const [showLoginModal, setShowLoginModal] = useState(false);\r\n  const [selectedListingId, setSelectedListingId] = useState(null);\r\n  const [profileForm, setProfileForm] = useState({ name: '' });\r\n  const [showRegistrationModal, setShowRegistrationModal] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filters, setFilters] = useState({\r\n    priceMin: '',\r\n    priceMax: '',\r\n    bedroomsMin: '',\r\n    bathroomsMin: '',\r\n    sqftMin: '',\r\n  });\r\n\r\n  const [listingType, setListingType] = useState('house'); \r\n  const [formDetails, setFormDetails] = useState({});\r\n  const [selectedType, setSelectedType] = useState(null);\r\n\r\n  // Google Maps\r\n  const { isLoaded, loadError } = useLoadScript({\r\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\r\n  });\r\n  const mapCenter = useMemo(() => ({ lat: 34.0522, lng: -118.2437 }), []);\r\n\r\n  const fetchListings = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      let query = supabase.from('listings').select('*');\r\n      if (selectedType) {\r\n        query = query.eq('type', selectedType);\r\n      }\r\n      if (searchTerm) {\r\n        query = query.textSearch('search_vector', searchTerm, {\r\n          config: 'english',\r\n          type: 'websearch'\r\n        });\r\n      }\r\n      if (filters.priceMin) {\r\n        query = query.gte('price', parseFloat(filters.priceMin));\r\n      }\r\n      if (filters.priceMax) {\r\n        query = query.lte('price', parseFloat(filters.priceMax));\r\n      }\r\n      if (filters.bedroomsMin) {\r\n        query = query.gte('details->>bedrooms', parseInt(filters.bedroomsMin, 10));\r\n      }\r\n      if (filters.bathroomsMin) {\r\n        query = query.gte('details->>bathrooms', parseInt(filters.bathroomsMin, 10));\r\n      }\r\n      if (filters.sqftMin) {\r\n        query = query.gte('details->>sqft', parseInt(filters.sqftMin, 10));\r\n      }\r\n      if (selectedType === 'car' && carFilters.make) {\r\n        query = query.ilike('details->>make', `%${carFilters.make}%`);\r\n      }\r\n      if (selectedType === 'car' && carFilters.mileageMax) {\r\n        query = query.lte('details->>mileage', parseFloat(carFilters.mileageMax));\r\n      }\r\n      if (selectedType === 'land' && landFilters.acresMax) {\r\n        query = query.lte('details->>acres', parseFloat(landFilters.acresMax));\r\n      }\r\n      if (selectedType === 'land' && landFilters.zoning) {\r\n        query = query.ilike('details->>zoning', `%${landFilters.zoning}%`);\r\n      }\r\n      const { data: listingsData, error: listingsError } = await query;\r\n      if (listingsError) throw listingsError;\r\n      setListings(listingsData);\r\n      if (session) {\r\n        const { data: favoritesData, error: favoritesError } = await supabase\r\n          .from('favorites')\r\n          .select('listing_id');\r\n        if (favoritesError) throw favoritesError;\r\n        setFavorites(favoritesData.map(fav => fav.listing_id));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [selectedType, searchTerm, filters, carFilters, landFilters, session]);\r\n\r\n useEffect(() => {\r\n  const { data: authListener } = supabase.auth.onAuthStateChange(\r\n    async (event, session) => {\r\n      setSession(session);\r\n      fetchListings();\r\n    }\r\n  );\r\n\r\n  return () => {\r\n    authListener.subscription.unsubscribe();\r\n  };\r\n}, []); \r\n\r\n useEffect(() => {\r\n  fetchListings();\r\n}, [selectedType, searchTerm, filters, carFilters, landFilters, session]);\r\n\r\n  const trackListingView = async (listingId) => {\r\n    if (!session?.user?.id) return;\r\n    try {\r\n      await supabase.from('listing_views').insert({\r\n        listing_id: listingId,\r\n        viewer_id: session.user.id,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error tracking listing view:', error.message);\r\n    }\r\n  };\r\n\r\n  const handleProfileChange = (e) => {\r\n    setProfileForm({\r\n      ...profileForm,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSelectListing = (listingId) => {\r\n    setSelectedListingId(listingId);\r\n    if (session?.user?.id) {\r\n      trackListingView(listingId);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (listingForChat && session) {\r\n      const fetchMessages = async () => {\r\n        const { data, error } = await supabase\r\n          .from('messages')\r\n          .select('*')\r\n          .eq('listing_id', listingForChat.id)\r\n          .order('created_at', { ascending: true });\r\n        if (error) {\r\n          console.error(\"Error fetching messages:\", error);\r\n        } else {\r\n          setChatMessages(data);\r\n        }\r\n      };\r\n      fetchMessages();\r\n      const channel = supabase\r\n        .channel(`chat-room-${listingForChat.id}`)\r\n        .on(\r\n          'postgres_changes',\r\n          {\r\n            event: 'INSERT',\r\n            schema: 'public',\r\n            table: 'messages',\r\n            filter: `listing_id=eq.${listingForChat.id}`,\r\n          },\r\n          (payload) => {\r\n            setChatMessages(prevMessages => [...prevMessages, payload.new]);\r\n          }\r\n        )\r\n        .subscribe();\r\n      return () => {\r\n        supabase.removeChannel(channel);\r\n      };\r\n    }\r\n  }, [listingForChat, session]);\r\n\r\n  const userId = session?.user?.id;\r\n  const isLoggedIn = !!session;\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [chatMessages]);\r\n\r\n  const generateListingImage = async (listingDetails) => {\r\n    setIsGeneratingImage(true);\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        const imageUrl = `https://loremflickr.com/640/480/${listingDetails.bedrooms} bed ${listingDetails.bathrooms} bath, ${listingDetails.city}, real estate?lock=${Math.floor(Math.random() * 1000)}`;\r\n        setIsGeneratingImage(false);\r\n        resolve(imageUrl);\r\n      }, 2000);\r\n    });\r\n  };\r\n\r\n  const uploadImage = async (file) => {\r\n    if (!file) return null;\r\n    const fileExt = file.name.split('.').pop();\r\n    const fileName = `${Math.random()}.${fileExt}`;\r\n    const filePath = `listings/${fileName}`;\r\n    try {\r\n      const { data, error } = await supabase.storage\r\n        .from('listing_photos')\r\n        .upload(filePath, file);\r\n      if (error) throw error;\r\n      const { data: publicUrlData } = supabase.storage\r\n        .from('listing_photos')\r\n        .getPublicUrl(filePath);\r\n      return publicUrlData.publicUrl;\r\n    } catch (error) {\r\n      console.error('Error uploading image:', error.message);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setUploadedImage(file);\r\n    } else {\r\n      setUploadedImage(null);\r\n    }\r\n  };\r\n\r\n  const getAverageRating = (reviews) => {\r\n    if (!reviews || reviews.length === 0) return 0;\r\n    const totalRating = reviews.reduce((sum, review) => sum + review.rating, 0);\r\n    return totalRating / reviews.length;\r\n  };\r\n\r\n  const renderStars = (rating) => {\r\n    const stars = [];\r\n    const fullStars = Math.floor(rating);\r\n    const hasHalfStar = rating % 1 !== 0;\r\n    for (let i = 0; i < fullStars; i++) {\r\n      stars.push(<i key={`star-solid-${i}`} className=\"fas fa-star text-yellow-400\"></i>);\r\n    }\r\n    if (hasHalfStar) {\r\n      stars.push(<i key=\"star-half\" className=\"fas fa-star-half-alt text-yellow-400\"></i>);\r\n    }\r\n    for (let i = stars.length; i < 5; i++) {\r\n      stars.push(<i key={`star-empty-${i}`} className=\"far fa-star text-gray-400\"></i>);\r\n    }\r\n    return <div className=\"flex space-x-0.5\">{stars}</div>;\r\n  };\r\n\r\n  const handleAddListing = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    let imageUrls = [];\r\n    if (uploadedImage) {\r\n      const url = await uploadImage(uploadedImage);\r\n      if (url) {\r\n        imageUrls.push(url);\r\n      }\r\n    } else {\r\n      const aiImageUrl = await generateListingImage({\r\n        city: formDetails.city,\r\n        bedrooms: formDetails.bedrooms,\r\n        bathrooms: formDetails.bathrooms,\r\n      });\r\n      imageUrls.push(aiImageUrl);\r\n    }\r\n    const newListing = {\r\n      type: listingType,\r\n      address: formDetails.address,\r\n      city: formDetails.city,\r\n      price: parseInt(formDetails.price, 10),\r\n      latitude: parseFloat(formDetails.latitude),\r\n      longitude: parseFloat(formDetails.longitude),\r\n      description: formDetails.description,\r\n      image_urls: imageUrls,\r\n      reviews: [],\r\n      owner_id: userId,\r\n      details: formDetails.details,\r\n    };\r\n    try {\r\n      const { error } = await supabase.from('listings').insert([newListing]);\r\n      if (error) {\r\n        throw error;\r\n      }\r\n      await fetchListings();\r\n      setShowAddForm(false);\r\n      setUploadedImage(null);\r\n      setListingType('house');\r\n      setFormDetails({});\r\n    } catch (error) {\r\n      console.error('Error adding listing:', error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteListing = async (id) => {\r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('listings')\r\n        .delete()\r\n        .eq('id', id);\r\n      if (error) {\r\n        throw error;\r\n      }\r\n      await fetchListings();\r\n    } catch (error) {\r\n      console.error('Error deleting listing:', error.message);\r\n    } finally {\r\n      setShowConfirmDeleteModal(false);\r\n      setListingToDelete(null);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateListing = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    let imageUrls = currentListing.image_urls;\r\n    if (uploadedImage) {\r\n      const url = await uploadImage(uploadedImage);\r\n      if (url) {\r\n        imageUrls = [url];\r\n      }\r\n    }\r\n    const updatedListing = {\r\n      ...currentListing,\r\n      address: formDetails.address,\r\n      city: formDetails.city,\r\n      price: parseInt(formDetails.price, 10),\r\n      latitude: parseFloat(formDetails.latitude),\r\n      longitude: parseFloat(formDetails.longitude),\r\n      description: formDetails.description,\r\n      image_urls: imageUrls,\r\n      details: formDetails.details,\r\n    };\r\n    try {\r\n      const { error } = await supabase\r\n        .from('listings')\r\n        .update(updatedListing)\r\n        .eq('id', currentListing.id);\r\n      if (error) {\r\n        throw error;\r\n      }\r\n      await fetchListings();\r\n      setShowEditModal(false);\r\n      setCurrentListing(null);\r\n      setUploadedImage(null);\r\n    } catch (error) {\r\n      console.error('Error updating listing:', error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddReview = async (e) => {\r\n    e.preventDefault();\r\n    const form = e.target;\r\n    const newReview = {\r\n      reviewer_id: userId,\r\n      rating: parseInt(form.rating.value, 10),\r\n      review_text: form.reviewText.value,\r\n    };\r\n    const updatedReviews = [...listingForReview.reviews, newReview];\r\n    try {\r\n      const { error } = await supabase\r\n        .from('listings')\r\n        .update({ reviews: updatedReviews })\r\n        .eq('id', listingForReview.id);\r\n      if (error) {\r\n        throw error;\r\n      }\r\n      await fetchListings();\r\n      setShowAddReviewModal(false);\r\n      setShowReviewModal(true);\r\n    } catch (error) {\r\n      console.error('Error adding review:', error.message);\r\n    }\r\n  };\r\n\r\n  const handleUpdateProfile = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.updateUser({\r\n        data: { name: profileForm.name },\r\n      });\r\n      if (error) throw error;\r\n      alert('Profile updated successfully!');\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error.message);\r\n      alert('Error updating profile. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleFavorite = async (listingId) => {\r\n    if (!userId) {\r\n      alert(\"Please log in to add favorites.\");\r\n      return;\r\n    }\r\n    const isFavorite = favorites.includes(listingId);\r\n    setLoading(true);\r\n    try {\r\n      if (isFavorite) {\r\n        const { error } = await supabase\r\n          .from('favorites')\r\n          .delete()\r\n          .eq('user_id', userId)\r\n          .eq('listing_id', listingId);\r\n        if (error) throw error;\r\n        const { error: noteError } = await supabase\r\n          .from('private_notes')\r\n          .delete()\r\n          .eq('user_id', userId)\r\n          .eq('listing_id', listingId);\r\n        if (noteError) console.error(\"Error deleting private note:\", noteError);\r\n        setFavorites(favorites.filter(id => id !== listingId));\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('favorites')\r\n          .insert([{ user_id: userId, listing_id: listingId }]);\r\n        if (error) throw error;\r\n        setFavorites([...favorites, listingId]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling favorite:', error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenChat = (listing) => {\r\n    if (!isLoggedIn) {\r\n      alert(\"Please log in to chat with a broker.\");\r\n      return;\r\n    }\r\n    setListingForChat(listing);\r\n    setShowChatModal(true);\r\n  };\r\n\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!newChatMessage.trim() || !userId || !listingForChat) return;\r\n    try {\r\n      const { error } = await supabase\r\n        .from('messages')\r\n        .insert({\r\n          listing_id: listingForChat.id,\r\n          user_id: userId,\r\n          content: newChatMessage,\r\n        });\r\n      if (error) {\r\n        throw error;\r\n      }\r\n      setNewChatMessage('');\r\n    } catch (error) {\r\n      console.error('Error sending message:', error.message);\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (chatMessagesEndRef.current) {\r\n      chatMessagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const handleShareListing = async (listing) => {\r\n    const listingUrl = `${window.location.origin}?listingId=${listing.id}`;\r\n    if (navigator.clipboard && navigator.clipboard.writeText) {\r\n      try {\r\n        await navigator.clipboard.writeText(listingUrl);\r\n        alert('Listing link copied to clipboard!');\r\n      } catch (err) {\r\n        console.error('Failed to copy text:', err);\r\n        alert('Failed to copy link. Please try again.');\r\n      }\r\n    } else {\r\n      const textarea = document.createElement('textarea');\r\n      textarea.value = listingUrl;\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n      try {\r\n        document.execCommand('copy');\r\n        alert('Listing link copied to clipboard!');\r\n      } catch (err) {\r\n        console.error('Fallback: Failed to copy text:', err);\r\n        alert('Failed to copy link. Please copy it manually from the URL bar.');\r\n      }\r\n      document.body.removeChild(textarea);\r\n    }\r\n  };\r\n\r\n  const handleNextImage = (listingId, imageUrls) => {\r\n    setCurrentImageIndex(prev => {\r\n      const currentIndex = prev[listingId] || 0;\r\n      const nextIndex = (currentIndex + 1) % imageUrls.length;\r\n      return { ...prev, [listingId]: nextIndex };\r\n    });\r\n  };\r\n\r\n  const handlePrevImage = (listingId, imageUrls) => {\r\n    setCurrentImageIndex(prev => {\r\n      const currentIndex = prev[listingId] || 0;\r\n      const prevIndex = (currentIndex - 1 + imageUrls.length) % imageUrls.length;\r\n      return { ...prev, [listingId]: prevIndex };\r\n    });\r\n  };\r\n\r\n  const handleRegistration = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const form = e.target;\r\n    const email = form.email.value;\r\n    const password = form.password.value;\r\n    const name = form.name.value;\r\n\r\n    try {\r\n      const { data: authData, error } = await supabase.auth.signUp({\r\n        email,\r\n        password,\r\n        options: {\r\n          data: { name }\r\n        }\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (authData.user) {\r\n        const { error: profileError } = await supabase\r\n          .from('profiles')\r\n          .insert([\r\n            { \r\n              id: authData.user.id, \r\n              email: authData.user.email,\r\n              name: name,\r\n              role: 'user'\r\n            }\r\n          ]);\r\n\r\n        if (profileError) throw profileError;\r\n      }\r\n\r\n      alert('Registration successful! Please check your email to confirm your account.');\r\n      setShowRegistrationModal(false);\r\n      setShowLoginModal(true);\r\n    } catch (error) {\r\n      alert(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const form = e.target;\r\n    const { error } = await supabase.auth.signInWithPassword({\r\n      email: form.email.value,\r\n      password: form.password.value,\r\n    });\r\n    setLoading(false);\r\n    if (error) {\r\n      alert(error.message);\r\n    } else {\r\n      setShowLoginModal(false);\r\n    }\r\n  };\r\n\r\n  const handleForgotPassword = async () => {\r\n    const email = prompt('Please enter your email address to reset your password:');\r\n    if (email) {\r\n      try {\r\n        const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n          redirectTo: `${window.location.origin}/reset-password`,\r\n        });\r\n        if (error) throw error;\r\n        alert('Password reset email sent. Please check your inbox.');\r\n      } catch (error) {\r\n        console.error('Error sending password reset email:', error.message);\r\n        alert('Error sending password reset email. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n\r\n      setSession(null);\r\n      setFavorites([]);\r\n    } catch (error) {\r\n      console.error('Error signing out:', error.message);\r\n      alert('Error signing out. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleOpenNotesModal = async (listing) => {\r\n    setCurrentListing(listing);\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('private_notes')\r\n        .select('note_content')\r\n        .eq('user_id', userId)\r\n        .eq('listing_id', listing.id)\r\n        .single();\r\n      if (error && error.code !== 'PGRST116') throw error;\r\n      setCurrentNote(data?.note_content || '');\r\n      setShowNotesModal(true);\r\n    } catch (error) {\r\n      console.error('Error fetching private note:', error.message);\r\n      setCurrentNote('');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveNote = async () => {\r\n    if (!currentListing || !userId) return;\r\n    setLoading(true);\r\n    try {\r\n      const noteData = {\r\n        user_id: userId,\r\n        listing_id: currentListing.id,\r\n        note_content: currentNote,\r\n      };\r\n      const { data: existingNote, error: fetchError } = await supabase\r\n        .from('private_notes')\r\n        .select('id')\r\n        .eq('user_id', userId)\r\n        .eq('listing_id', currentListing.id)\r\n        .single();\r\n      if (fetchError && fetchError.code !== 'PGRST116') throw fetchError;\r\n      if (existingNote) {\r\n        const { error: updateError } = await supabase\r\n          .from('private_notes')\r\n          .update(noteData)\r\n          .eq('id', existingNote.id);\r\n        if (updateError) throw updateError;\r\n      } else {\r\n        const { error: insertError } = await supabase\r\n          .from('private_notes')\r\n          .insert(noteData);\r\n        if (insertError) throw insertError;\r\n      }\r\n      setShowNotesModal(false);\r\n      alert('Note saved successfully!');\r\n    } catch (error) {\r\n      console.error('Error saving note:', error.message);\r\n      alert('Failed to save note.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectedListing = selectedListingId ? listings.find(l => l.id === selectedListingId) : null;\r\n\r\n  const renderMapAndListings = () => {\r\n    if (loadError) return <div className=\"text-red-500 text-center font-semibold p-8\">Error loading maps</div>;\r\n    if (!isLoaded) return <div className=\"text-gray-500 text-center font-semibold p-8\">Loading Map...</div>;\r\n\r\n    return (\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-[1fr_2fr] gap-8\">\r\n        <div className=\"h-[60vh] lg:h-[80vh] sticky top-28 rounded-2xl overflow-hidden shadow-lg border border-gray-200\">\r\n          <GoogleMap\r\n            mapContainerStyle={{ width: '100%', height: '100%' }}\r\n            center={mapCenter}\r\n            zoom={10}\r\n            options={{\r\n              disableDefaultUI: true,\r\n              zoomControl: true,\r\n            }}\r\n          >\r\n            {listings.map((listing) => (\r\n              <MarkerF\r\n                key={listing.id}\r\n                position={{ lat: listing.latitude, lng: listing.longitude }}\r\n                onClick={() => handleSelectListing(listing.id)}\r\n              />\r\n            ))}\r\n          </GoogleMap>\r\n        </div>\r\n\r\n        <div>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6\">\r\n            {loading ? (\r\n              <div className=\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\">\r\n                <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"></div>\r\n                <p>Loading listings...</p>\r\n              </div>\r\n            ) : listings.length > 0 ? (\r\n              listings.map(listing => (\r\n                <div\r\n                  key={listing.id}\r\n                  onClick={() => handleSelectListing(listing.id)}\r\n                  className=\"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-300 cursor-pointer\"\r\n                >\r\n                  {listing.image_urls && listing.image_urls.length > 0 ? (\r\n                    <div className=\"relative h-48 overflow-hidden\">\r\n                      <img\r\n                        src={listing.image_urls[currentImageIndex[listing.id] || 0]}\r\n                        alt={`Listing at ${listing.address}`}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                      <div className=\"absolute top-3 right-3 flex space-x-2\">\r\n                        {isLoggedIn && (\r\n                          <button \r\n                            type=\"button\"\r\n                            onClick={(e) => { e.stopPropagation(); handleToggleFavorite(listing.id); }}\r\n                            className={`w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm ${\r\n                              favorites.includes(listing.id) \r\n                                ? 'bg-red-500 text-white' \r\n                                : 'bg-white/80 text-gray-700'\r\n                            }`}\r\n                          >\r\n                            <i className={`fas ${favorites.includes(listing.id) ? 'fa-heart' : 'fa-heart'} text-lg`}></i>\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n\r\n                      {listing.image_urls.length > 1 && (\r\n                        <div className=\"absolute bottom-3 left-1/2 transform -translate-x-1/2 flex space-x-1\">\r\n                          {listing.image_urls.map((_, index) => (\r\n                            <span\r\n                              key={index}\r\n                              className={`block w-2 h-2 rounded-full transition-colors ${\r\n                                index === currentImageIndex[listing.id] ? 'bg-white' : 'bg-white/50'\r\n                              }`}\r\n                            ></span>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500\">\r\n                      <div className=\"text-center\">\r\n                        <i className=\"fas fa-home text-4xl mb-2\"></i>\r\n                        <p>No Image Available</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"p-5\">\r\n                    <div className=\"flex justify-between items-start mb-2\">\r\n                      <div>\r\n                        <h2 className=\"text-lg font-bold text-gray-900 mb-1\">{listing.address}</h2>\r\n                        <p className=\"text-gray-600 text-sm\">{listing.city}</p>\r\n                      </div>\r\n                      <div className=\"text-xl font-bold text-blue-600 mb-3\">\r\n                        ${new Intl.NumberFormat().format(listing.price)}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">{listing.description}</p>\r\n\r\n                    <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                      {isLoggedIn && currentView === 'public' && (\r\n                        <>\r\n                          {listing.owner_id === userId ? (\r\n                            <>\r\n                              <button className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\">\r\n                                <i className=\"fas fa-edit mr-1\"></i> Edit\r\n                              </button>\r\n                              <button className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\">\r\n                                <i className=\"fas fa-trash mr-1\"></i> Delete\r\n                              </button>\r\n                            </>\r\n                          ) : (\r\n                            <button \r\n                              type=\"button\"\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleToggleFavorite(listing.id);\r\n                              }}\r\n                              className={`flex-1 text-center px-3 py-2 font-medium rounded-lg transition-colors text-sm ${\r\n                                favorites.includes(listing.id) \r\n                                  ? 'bg-red-100 text-red-600 hover:bg-red-200' \r\n                                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                              }`}\r\n                            >\r\n                              <i className={`fas ${favorites.includes(listing.id) ? 'fa-heart' : 'fa-heart'} mr-1`}></i>\r\n                              {favorites.includes(listing.id) ? 'Saved' : 'Save'}\r\n                            </button>\r\n                          )}\r\n                          <button \r\n                            type=\"button\"\r\n                            onClick={(e) => { e.stopPropagation(); handleOpenChat(listing); }}\r\n                            className=\"flex-1 text-center px-3 py-2 bg-blue-100 text-blue-600 font-medium rounded-lg hover:bg-blue-200 transition-colors text-sm\"\r\n                          >\r\n                            <i className=\"fas fa-comment mr-1\"></i> Chat\r\n                          </button>\r\n                        </>\r\n                      )}\r\n\r\n                      <button \r\n                        type=\"button\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          setListingForReview(listing);\r\n                          setShowReviewModal(true);\r\n                        }}\r\n                        className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\"\r\n                      >\r\n                        <i className=\"fas fa-star mr-1\"></i> Reviews\r\n                      </button>\r\n                      <button \r\n                        type=\"button\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleShareListing(listing);\r\n                        }}\r\n                        className=\"flex-1 text-center px-3 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors text-sm\"\r\n                      >\r\n                        <i className=\"fas fa-share-alt mr-1\"></i> Share\r\n                      </button>\r\n                      {currentView === 'favorites' && (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            handleOpenNotesModal(listing);\r\n                          }}\r\n                          className=\"flex-1 text-center px-3 py-2 bg-purple-100 text-purple-700 font-medium rounded-lg hover:bg-purple-200 transition-colors text-sm\"\r\n                        >\r\n                          <i className=\"fas fa-sticky-note mr-1\"></i> Note\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <div className=\"text-center text-gray-500 text-xl font-semibold col-span-full py-12\">\r\n                <i className=\"fas fa-home text-4xl mb-4 text-gray-300\"></i>\r\n                <p>No listings found.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const sortListings = (listings) => {\r\n    const sorted = [...listings];\r\n    switch (sortOption) {\r\n      case 'price_asc':\r\n        return sorted.sort((a, b) => a.price - b.price);\r\n      case 'price_desc':\r\n        return sorted.sort((a, b) => b.price - a.price);\r\n      case 'date_desc':\r\n        return sorted.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n      case 'rating_desc':\r\n        return sorted.sort((a, b) => {\r\n          const avgRatingA = a.reviews.length > 0 ? a.reviews.reduce((sum, r) => sum + r.rating, 0) / a.reviews.length : 0;\r\n          const avgRatingB = b.reviews.length > 0 ? b.reviews.reduce((sum, r) => sum + r.rating, 0) / b.reviews.length : 0;\r\n          return avgRatingB - avgRatingA;\r\n        });\r\n      default:\r\n        return sorted;\r\n    }\r\n  };\r\n\r\n  const renderDynamicForm = (isEdit = false) => {\r\n    const currentListingDetails = isEdit && currentListing ? currentListing.details : formDetails.details;\r\n    const currentType = isEdit && currentListing ? currentListing.type : listingType;\r\n    let dynamicFields = null;\r\n\r\n    switch (currentType) {\r\n      case 'house':\r\n        dynamicFields = (\r\n          <>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Bedrooms</label>\r\n              <input type=\"number\" name=\"bedrooms\" placeholder=\"Number of bedrooms\" required min=\"0\" defaultValue={currentListingDetails?.bedrooms} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, bedrooms: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Bathrooms</label>\r\n              <input type=\"number\" name=\"bathrooms\" placeholder=\"Number of bathrooms\" required min=\"0\" defaultValue={currentListingDetails?.bathrooms} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, bathrooms: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Square Feet</label>\r\n              <input type=\"number\" name=\"sqft\" placeholder=\"Square footage\" required min=\"0\" defaultValue={currentListingDetails?.sqft} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, sqft: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n          </>\r\n        );\r\n        break;\r\n      case 'car':\r\n        dynamicFields = (\r\n          <>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Make</label>\r\n              <input type=\"text\" name=\"make\" placeholder=\"Car make\" required defaultValue={currentListingDetails?.make} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, make: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Model</label>\r\n              <input type=\"text\" name=\"model\" placeholder=\"Car model\" required defaultValue={currentListingDetails?.model} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, model: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Year</label>\r\n              <input type=\"number\" name=\"year\" placeholder=\"Year\" required defaultValue={currentListingDetails?.year} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, year: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Mileage</label>\r\n              <input type=\"number\" name=\"mileage\" placeholder=\"Mileage\" required defaultValue={currentListingDetails?.mileage} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, mileage: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n          </>\r\n        );\r\n        break;\r\n      case 'land':\r\n        dynamicFields = (\r\n          <>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Acres</label>\r\n              <input type=\"number\" step=\"any\" name=\"acres\" placeholder=\"Number of acres\" required defaultValue={currentListingDetails?.acres} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, acres: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-gray-700 font-medium mb-2\">Zoning</label>\r\n              <input type=\"text\" name=\"zoning\" placeholder=\"Zoning type\" required defaultValue={currentListingDetails?.zoning} onChange={(e) => setFormDetails({ ...formDetails, details: { ...formDetails.details, zoning: e.target.value } })} className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n            </div>\r\n          </>\r\n        );\r\n        break;\r\n      default:\r\n        dynamicFields = null;\r\n    }\r\n    return dynamicFields;\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"bg-gray-50 min-h-screen\">\r\n        <Header \r\n          currentView={currentView}\r\n          setCurrentView={setCurrentView}\r\n          isLoggedIn={isLoggedIn}\r\n          session={session}\r\n          showProfileModal={showProfileModal}\r\n          setShowProfileModal={setShowProfileModal}\r\n          profileForm={profileForm}\r\n          setProfileForm={setProfileForm}\r\n          handleProfileChange={handleProfileChange}\r\n          handleLogout={handleLogout}\r\n          setShowLoginModal={setShowLoginModal}\r\n          setShowRegistrationModal={setShowRegistrationModal}\r\n        />\r\n\r\n        <Routes>\r\n          <Route path=\"/\" element={\r\n            <HomePage \r\n              setCurrentView={setCurrentView}\r\n              isLoggedIn={isLoggedIn}\r\n              setShowAddForm={setShowAddForm}\r\n            />\r\n          } />\r\n\r\n          <Route path=\"/apartments\" element={\r\n            <CategoryListingsPage \r\n              category=\"apartments\"\r\n              title=\"Apartment Listings\"\r\n              colorClass=\"from-blue-600 to-indigo-700\"\r\n              listings={listings}\r\n              loading={loading}\r\n              currentImageIndex={currentImageIndex}\r\n              handleSelectListing={handleSelectListing}\r\n              handleToggleFavorite={handleToggleFavorite}\r\n              favorites={favorites}\r\n              isLoggedIn={isLoggedIn}\r\n              handleOpenChat={handleOpenChat}\r\n              setListingForReview={setListingForReview}\r\n              setShowReviewModal={setShowReviewModal}\r\n              handleShareListing={handleShareListing}\r\n              handleOpenNotesModal={handleOpenNotesModal}\r\n              currentView={currentView}\r\n            />\r\n          } />\r\n\r\n          <Route path=\"/cars\" element={\r\n            <CategoryListingsPage \r\n              category=\"cars\"\r\n              title=\"Car Listings\"\r\n              colorClass=\"from-green-600 to-emerald-700\"\r\n              listings={listings}\r\n              loading={loading}\r\n              currentImageIndex={currentImageIndex}\r\n              handleSelectListing={handleSelectListing}\r\n              handleToggleFavorite={handleToggleFavorite}\r\n              favorites={favorites}\r\n              isLoggedIn={isLoggedIn}\r\n              handleOpenChat={handleOpenChat}\r\n              setListingForReview={setListingForReview}\r\n              setShowReviewModal={setShowReviewModal}\r\n              handleShareListing={handleShareListing}\r\n              handleOpenNotesModal={handleOpenNotesModal}\r\n              currentView={currentView}\r\n            />\r\n          } />\r\n\r\n          <Route path=\"/land\" element={\r\n            <CategoryListingsPage \r\n              category=\"land\"\r\n              title=\"Land Listings\"\r\n              colorClass=\"from-yellow-600 to-orange-700\"\r\n              listings={listings}\r\n              loading={loading}\r\n              currentImageIndex={currentImageIndex}\r\n              handleSelectListing={handleSelectListing}\r\n              handleToggleFavorite={handleToggleFavorite}\r\n              favorites={favorites}\r\n              isLoggedIn={isLoggedIn}\r\n              handleOpenChat={handleOpenChat}\r\n              setListingForReview={setListingForReview}\r\n              setShowReviewModal={setShowReviewModal}\r\n              handleShareListing={handleShareListing}\r\n              handleOpenNotesModal={handleOpenNotesModal}\r\n              currentView={currentView}\r\n            />\r\n          } />\r\n\r\n          <Route path=\"/listing/:id\" element={\r\n            <ListingDetailPage \r\n              selectedListing={selectedListing}\r\n              currentImageIndex={currentImageIndex}\r\n              handlePrevImage={handlePrevImage}\r\n              handleNextImage={handleNextImage}\r\n              renderStars={renderStars}\r\n              getAverageRating={getAverageRating}\r\n              isLoggedIn={isLoggedIn}\r\n              favorites={favorites}\r\n              handleToggleFavorite={handleToggleFavorite}\r\n              setListingForReview={setListingForReview}\r\n              setShowReviewModal={setShowReviewModal}\r\n              setCurrentListing={setCurrentListing}\r\n              setUploadedImage={setUploadedImage}\r\n              setShowEditModal={setShowEditModal}\r\n              handleOpenChat={handleOpenChat}\r\n            />\r\n          } />\r\n\r\n          <Route path=\"*\" element={\r\n            currentView === 'public' ? (\r\n              <div className=\"max-w-7xl mx-auto px-6 py-8\">\r\n                {renderMapAndListings()}\r\n              </div>\r\n            ) : selectedListing ? (\r\n              <ListingDetailPage \r\n                selectedListing={selectedListing}\r\n                currentImageIndex={currentImageIndex}\r\n                handlePrevImage={handlePrevImage}\r\n                handleNextImage={handleNextImage}\r\n                renderStars={renderStars}\r\n                getAverageRating={getAverageRating}\r\n                isLoggedIn={isLoggedIn}\r\n                favorites={favorites}\r\n                handleToggleFavorite={handleToggleFavorite}\r\n                setListingForReview={setListingForReview}\r\n                setShowReviewModal={setShowReviewModal}\r\n                setCurrentListing={setCurrentListing}\r\n                setUploadedImage={setUploadedImage}\r\n                setShowEditModal={setShowEditModal}\r\n                handleOpenChat={handleOpenChat}\r\n              />\r\n            ) : (\r\n              <div className=\"text-center py-12\">\r\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Page Not Found</h2>\r\n                <button \r\n                  type=\"button\"\r\n                  onClick={() => setCurrentView('public')}\r\n                  className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Go to Home\r\n                </button>\r\n              </div>\r\n            )\r\n          } />\r\n        </Routes>\r\n\r\n        {/* Add Listing Modal */}\r\n        {showAddForm && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-2xl font-bold text-white\">Add New Listing</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowAddForm(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                <div className=\"mb-6\">\r\n                  <label className=\"block text-gray-700 font-medium mb-2\">Listing Type</label>\r\n                  <select\r\n                    value={listingType}\r\n                    onChange={(e) => {\r\n                      setListingType(e.target.value);\r\n                      setFormDetails({});\r\n                    }}\r\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"house\">House</option>\r\n                    <option value=\"car\">Car</option>\r\n                    <option value=\"land\">Land</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <form onSubmit={handleAddListing} className=\"space-y-4\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">Address</label>\r\n                      <input \r\n                        type=\"text\" \r\n                        name=\"address\" \r\n                        placeholder=\"Street address\" \r\n                        required \r\n                        value={formDetails.address || ''} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, address: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">City</label>\r\n                      <input \r\n                        type=\"text\" \r\n                        name=\"city\" \r\n                        placeholder=\"City\" \r\n                        required \r\n                        value={formDetails.city || ''} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, city: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">Price</label>\r\n                      <input \r\n                        type=\"number\" \r\n                        name=\"price\" \r\n                        placeholder=\"Price\" \r\n                        required \r\n                        min=\"0\" \r\n                        value={formDetails.price || ''} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, price: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">Latitude</label>\r\n                      <input \r\n                        type=\"number\" \r\n                        step=\"any\" \r\n                        name=\"latitude\" \r\n                        placeholder=\"Latitude\" \r\n                        required \r\n                        value={formDetails.latitude || ''} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, latitude: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">Longitude</label>\r\n                      <input \r\n                        type=\"number\" \r\n                        step=\"any\" \r\n                        name=\"longitude\" \r\n                        placeholder=\"Longitude\" \r\n                        required \r\n                        value={formDetails.longitude || ''} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, longitude: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Description</label>\r\n                    <textarea \r\n                      name=\"description\" \r\n                      placeholder=\"Description\" \r\n                      required \r\n                      value={formDetails.description || ''} \r\n                      onChange={(e) => setFormDetails({ ...formDetails, description: e.target.value })} \r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      rows=\"3\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  {renderDynamicForm()}\r\n\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Upload Image (optional)</label>\r\n                    <input \r\n                      type=\"file\" \r\n                      accept=\"image/*\" \r\n                      onChange={handleImageUpload} \r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex justify-end space-x-4 pt-4\">\r\n                    <button \r\n                      type=\"button\" \r\n                      onClick={() => setShowAddForm(false)} \r\n                      className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                    <button \r\n                      type=\"submit\" \r\n                      disabled={loading || isGeneratingImage}\r\n                      className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n                    >\r\n                      {loading || isGeneratingImage ? 'Processing...' : 'Add Listing'}\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Edit Listing Modal */}\r\n        {showEditModal && currentListing && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-2xl font-bold text-white\">Edit Listing</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowEditModal(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                <form onSubmit={handleUpdateListing} className=\"space-y-4\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">Address</label>\r\n                      <input \r\n                        type=\"text\" \r\n                        name=\"address\" \r\n                        placeholder=\"Address\" \r\n                        required \r\n                        defaultValue={currentListing.address} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, address: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">City</label>\r\n                      <input \r\n                        type=\"text\" \r\n                        name=\"city\" \r\n                        placeholder=\"City\" \r\n                        required \r\n                        defaultValue={currentListing.city} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, city: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">Price</label>\r\n                      <input \r\n                        type=\"number\" \r\n                        name=\"price\" \r\n                        placeholder=\"Price\" \r\n                        required \r\n                        min=\"0\" \r\n                        defaultValue={currentListing.price} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, price: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">Latitude</label>\r\n                      <input \r\n                        type=\"number\" \r\n                        step=\"any\" \r\n                        name=\"latitude\" \r\n                        placeholder=\"Latitude\" \r\n                        required \r\n                        defaultValue={currentListing.latitude} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, latitude: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-gray-700 font-medium mb-2\">Longitude</label>\r\n                      <input \r\n                        type=\"number\" \r\n                        step=\"any\" \r\n                        name=\"longitude\" \r\n                        placeholder=\"Longitude\" \r\n                        required \r\n                        defaultValue={currentListing.longitude} \r\n                        onChange={(e) => setFormDetails({ ...formDetails, longitude: e.target.value })} \r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Description</label>\r\n                    <textarea \r\n                      name=\"description\" \r\n                      placeholder=\"Description\" \r\n                      required \r\n                      defaultValue={currentListing.description} \r\n                      onChange={(e) => setFormDetails({ ...formDetails, description: e.target.value })} \r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                      rows=\"3\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  {renderDynamicForm(true)}\r\n\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Upload New Image (optional)</label>\r\n                    <input \r\n                      type=\"file\" \r\n                      accept=\"image/*\" \r\n                      onChange={handleImageUpload} \r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex justify-end space-x-4 pt-4\">\r\n                    <button \r\n                      type=\"button\" \r\n                      onClick={() => setShowEditModal(false)} \r\n                      className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                    <button \r\n                      type=\"submit\" \r\n                      disabled={loading}\r\n                      className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n                    >\r\n                      {loading ? 'Updating...' : 'Update Listing'}\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Confirm Delete Modal */}\r\n        {showConfirmDeleteModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8\">\r\n              <div className=\"text-center\">\r\n                <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4\">\r\n                  <i className=\"fas fa-exclamation-triangle text-red-600 text-2xl\"></i>\r\n                </div>\r\n                <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Confirm Deletion</h3>\r\n                <p className=\"text-gray-600 mb-6\">Are you sure you want to delete this listing? This action cannot be undone.</p>\r\n                <div className=\"flex justify-center space-x-4\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setShowConfirmDeleteModal(false);\r\n                      setListingToDelete(null);\r\n                    }}\r\n                    className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleDeleteListing(listingToDelete)} \r\n                    className=\"px-6 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors\"\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Review Modal */}\r\n        {showReviewModal && listingForReview && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-2xl font-bold text-white\">Reviews for {listingForReview.address}</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowReviewModal(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                {listingForReview.reviews.length > 0 ? (\r\n                  <div className=\"space-y-4 max-h-96 overflow-y-auto pr-2\">\r\n                    {listingForReview.reviews.map((review, index) => (\r\n                      <div key={index} className=\"bg-gray-50 p-4 rounded-xl border border-gray-200\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            {renderStars(review.rating)}\r\n                            <span className=\"text-sm font-medium text-gray-700\">\r\n                              {review.rating === 5 ? 'Excellent' : \r\n                               review.rating === 4 ? 'Good' : \r\n                               review.rating === 3 ? 'Average' : \r\n                               review.rating === 2 ? 'Poor' : 'Terrible'}\r\n                            </span>\r\n                          </div>\r\n                          <span className=\"text-xs text-gray-500\">\r\n                            {new Date(review.created_at).toLocaleDateString()}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-gray-700\">{review.review_text}</p>\r\n                        <div className=\"mt-2 text-xs text-gray-500\">\r\n                          by User {review.reviewer_id.substring(0, 8)}...\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 mb-4\">\r\n                      <i className=\"fas fa-star text-gray-400 text-2xl\"></i>\r\n                    </div>\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Reviews Yet</h3>\r\n                    <p className=\"text-gray-600 mb-6\">Be the first to share your experience with this property.</p>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mt-6 flex justify-center\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setShowReviewModal(false);\r\n                      setShowAddReviewModal(true);\r\n                    }}\r\n                    className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center\"\r\n                  >\r\n                    <i className=\"fas fa-plus mr-2\"></i>\r\n                    Add Your Review\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Add Review Modal */}\r\n        {showAddReviewModal && listingForReview && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\r\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-2xl font-bold text-white\">Add Review</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowAddReviewModal(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                <form onSubmit={handleAddReview} className=\"space-y-6\">\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Rating</label>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      {[1, 2, 3, 4, 5].map(num => (\r\n                        <label key={num} className=\"flex flex-col items-center\">\r\n                          <input \r\n                            type=\"radio\" \r\n                            name=\"rating\" \r\n                            value={num} \r\n                            required \r\n                            className=\"sr-only\" \r\n                          />\r\n                          <div className=\"w-10 h-10 rounded-full border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n                            <span className=\"text-lg font-medium\">{num}</span>\r\n                          </div>\r\n                          <span className=\"text-xs text-gray-500 mt-1\">\r\n                            {num === 1 ? 'Poor' : \r\n                             num === 2 ? 'Fair' : \r\n                             num === 3 ? 'Good' : \r\n                             num === 4 ? 'Very Good' : 'Excellent'}\r\n                          </span>\r\n                        </label>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Your Review</label>\r\n                    <textarea \r\n                      name=\"reviewText\" \r\n                      placeholder=\"Share your experience with this property...\" \r\n                      rows=\"4\" \r\n                      required \r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"flex justify-end space-x-4\">\r\n                    <button \r\n                      type=\"button\" \r\n                      onClick={() => setShowAddReviewModal(false)} \r\n                      className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                    <button \r\n                      type=\"submit\" \r\n                      className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      Submit Review\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Notes Modal */}\r\n        {showNotesModal && currentListing && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\r\n              <div className=\"bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-2xl font-bold text-white\">Personal Note</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowNotesModal(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">{currentListing.address}</h3>\r\n                <p className=\"text-gray-600 mb-6\">{currentListing.city}</p>\r\n\r\n                <div className=\"mb-6\">\r\n                  <label className=\"block text-gray-700 font-medium mb-2\">Your Note</label>\r\n                  <textarea\r\n                    value={currentNote}\r\n                    onChange={(e) => setCurrentNote(e.target.value)}\r\n                    placeholder=\"Write your private notes here...\"\r\n                    rows=\"6\"\r\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n                  ></textarea>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end space-x-4\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setShowNotesModal(false);\r\n                      setCurrentNote('');\r\n                    }}\r\n                    className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleSaveNote}\r\n                    className=\"px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors\"\r\n                  >\r\n                    Save Note\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Chat Modal */}\r\n        {showChatModal && listingForChat && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md flex flex-col h-full max-h-[80vh]\">\r\n              <div className=\"bg-gradient-to-r from-green-600 to-teal-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-xl font-bold text-white\">Chat for {listingForChat.address}</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowChatModal(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex-grow overflow-y-auto p-4 bg-gray-50\">\r\n                {chatMessages.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    {chatMessages.map((message) => (\r\n                      <div\r\n                        key={message.id}\r\n                        className={`flex ${message.user_id === userId ? 'justify-end' : 'justify-start'}`}\r\n                      >\r\n                        <div\r\n                          className={`max-w-[80%] p-4 rounded-2xl ${\r\n                            message.user_id === userId\r\n                              ? 'bg-green-500 text-white rounded-tr-none'\r\n                              : 'bg-white border border-gray-200 rounded-tl-none'\r\n                          }`}\r\n                        >\r\n                          <p className=\"break-words\">{message.content}</p>\r\n                          <p className={`text-xs mt-1 ${\r\n                            message.user_id === userId ? 'text-green-100' : 'text-gray-500'\r\n                          }`}>\r\n                            {new Date(message.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    <div ref={chatMessagesEndRef} />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex items-center justify-center h-full\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-200 mb-4\">\r\n                        <i className=\"fas fa-comments text-gray-500 text-2xl\"></i>\r\n                      </div>\r\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Messages Yet</h3>\r\n                      <p className=\"text-gray-600\">Start the conversation with the broker.</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"p-4 border-t border-gray-200\">\r\n                <form onSubmit={handleSendMessage} className=\"flex space-x-2\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newChatMessage}\r\n                    onChange={(e) => setNewChatMessage(e.target.value)}\r\n                    placeholder=\"Type a message...\"\r\n                    className=\"flex-grow p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                  />\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"px-4 py-3 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-paper-plane\"></i>\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Registration Modal */}\r\n        {showRegistrationModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\r\n              <div className=\"bg-gradient-to-r from-green-600 to-emerald-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-2xl font-bold text-white\">Create Account</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowRegistrationModal(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                <form onSubmit={handleRegistration} className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Full Name</label>\r\n                    <input \r\n                      type=\"text\" \r\n                      name=\"name\" \r\n                      placeholder=\"Your full name\" \r\n                      required \r\n                      value={profileForm.name}\r\n                      onChange={handleProfileChange}\r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\" \r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Email Address</label>\r\n                    <input \r\n                      type=\"email\" \r\n                      name=\"email\" \r\n                      placeholder=\"Your email address\" \r\n                      required \r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\" \r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Password</label>\r\n                    <input \r\n                      type=\"password\" \r\n                      name=\"password\" \r\n                      placeholder=\"Create a password\" \r\n                      required \r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\" \r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"pt-2\">\r\n                    <button \r\n                      type=\"submit\" \r\n                      className=\"w-full px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\"\r\n                    >\r\n                      Create Account\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n\r\n                <p className=\"mt-6 text-center text-gray-600\">\r\n                  Already have an account?{' '}\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => { \r\n                      setShowRegistrationModal(false); \r\n                      setShowLoginModal(true); \r\n                    }} \r\n                    className=\"text-green-600 hover:text-green-700 font-medium\"\r\n                  >\r\n                    Sign in\r\n                  </button>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Login Modal */}\r\n        {showLoginModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\r\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-2xl font-bold text-white\">Welcome Back</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowLoginModal(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                <form onSubmit={handleLogin} className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Email Address</label>\r\n                    <input\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      placeholder=\"Enter your email\"\r\n                      required\r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Password</label>\r\n                    <input\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      placeholder=\"Enter your password\"\r\n                      required\r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={handleForgotPassword}\r\n                      className=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\r\n                    >\r\n                      Forgot your password?\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div className=\"pt-2\">\r\n                    <button\r\n                      type=\"submit\"\r\n                      disabled={loading}\r\n                      className=\"w-full px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n                    >\r\n                      {loading ? 'Logging in...' : 'Sign In'}\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n\r\n                <p className=\"mt-6 text-center text-gray-600\">\r\n                  Don't have an account?{' '}\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => { \r\n                      setShowLoginModal(false); \r\n                      setShowRegistrationModal(true); \r\n                    }} \r\n                    className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n                  >\r\n                    Sign up\r\n                  </button>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Profile Update Modal */}\r\n        {showProfileModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md\">\r\n              <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <h2 className=\"text-2xl font-bold text-white\">Update Profile</h2>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => setShowProfileModal(false)} \r\n                    className=\"text-white hover:text-gray-200 transition-colors\"\r\n                  >\r\n                    <i className=\"fas fa-times text-xl\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"p-6\">\r\n                <form onSubmit={handleUpdateProfile} className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-gray-700 font-medium mb-2\">Name</label>\r\n                    <input \r\n                      type=\"text\" \r\n                      name=\"name\" \r\n                      value={profileForm.name}\r\n                      onChange={handleProfileChange}\r\n                      placeholder=\"Your name\" \r\n                      required \r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n                    />\r\n                  </div>\r\n                  <div className=\"flex justify-end space-x-4 pt-4\">\r\n                    <button \r\n                      type=\"button\" \r\n                      onClick={() => setShowProfileModal(false)} \r\n                      className=\"px-6 py-3 bg-gray-200 text-gray-800 font-medium rounded-lg hover:bg-gray-300 transition-colors\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                    <button \r\n                      type=\"submit\" \r\n                      disabled={loading}\r\n                      className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n                    >\r\n                      {loading ? 'Updating...' : 'Update Profile'}\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}